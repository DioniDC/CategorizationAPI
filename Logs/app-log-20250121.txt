2025-01-21 20:36:05.189 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-21 20:36:05.216 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-21 20:36:05.217 -03:00 [INF] Hosting environment: Development
2025-01-21 20:36:05.218 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-21 20:36:26.467 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 287
2025-01-21 20:36:26.485 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-21 20:36:26.488 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:36:26.508 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 20:36:26.521 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 20:36:26.530 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 20:36:26.653 -03:00 [INF] Processando lista de produtos.
2025-01-21 20:36:26.658 -03:00 [INF] Processando 5 produtos.
2025-01-21 20:36:26.659 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 20:36:26.675 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8132 caracteres.
2025-01-21 20:36:26.680 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:36:26.683 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:36:29.318 -03:00 [INF] Received HTTP response headers after 2632.4062ms - 200
2025-01-21 20:36:29.326 -03:00 [INF] End processing HTTP request after 2648.5925ms - 200
2025-01-21 20:36:29.328 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsI5DK8vNAQhy1InyW0ewhFW36ktp",
  "object": "chat.completion",
  "created": 1737502587,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"itens\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"COXA DE FRANGO\",\n      \"Subgrupo\": \"10123\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1736,
    "completion_tokens": 162,
    "total_tokens": 1898,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 20:36:29.391 -03:00 [INF] JSON bruto recebido: {
  "itens": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "COXA DE FRANGO",
      "Subgrupo": "10123"
    }
  ]
}
2025-01-21 20:36:29.400 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 20:36:29.404 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'itens'.
2025-01-21 20:36:29.407 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 20:36:29.415 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2902.0931ms
2025-01-21 20:36:29.417 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:36:29.419 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2934.5230 ms
2025-01-21 20:36:29.424 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2957.2234ms
2025-01-21 20:37:40.838 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 282
2025-01-21 20:37:40.841 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:37:40.841 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 20:37:40.845 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 20:37:40.846 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 20:37:40.907 -03:00 [INF] Processando lista de produtos.
2025-01-21 20:37:40.908 -03:00 [INF] Processando 5 produtos.
2025-01-21 20:37:40.910 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 20:37:40.916 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8127 caracteres.
2025-01-21 20:37:40.917 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:37:40.918 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:37:42.271 -03:00 [INF] Received HTTP response headers after 1352.2226ms - 200
2025-01-21 20:37:42.272 -03:00 [INF] End processing HTTP request after 1355.4567ms - 200
2025-01-21 20:37:42.274 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsI6OnE5kftSPnWHFrCdwkTxMHoVC",
  "object": "chat.completion",
  "created": 1737502660,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALMEIRAO\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"10213\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"COXA DE FRANGO\",\n      \"Subgrupo\": \"10123\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1735,
    "completion_tokens": 161,
    "total_tokens": 1896,
    "prompt_tokens_details": {
      "cached_tokens": 1536,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 20:37:42.279 -03:00 [INF] JSON bruto recebido: {
  "Produtos": [
    {
      "Codigo": 1,
      "Nome": "ALMEIRAO",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "10213"
    },
    {
      "Codigo": 5,
      "Nome": "COXA DE FRANGO",
      "Subgrupo": "10123"
    }
  ]
}
2025-01-21 20:37:42.284 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 20:37:42.285 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Produtos'.
2025-01-21 20:37:42.286 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 20:37:42.287 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1442.6296ms
2025-01-21 20:37:42.288 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:37:42.291 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1450.5813 ms
2025-01-21 20:37:42.293 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1455.3852ms
2025-01-21 20:38:05.139 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 280
2025-01-21 20:38:05.142 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:38:05.142 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 20:38:05.146 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 20:38:05.147 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 20:38:05.203 -03:00 [INF] Processando lista de produtos.
2025-01-21 20:38:05.204 -03:00 [INF] Processando 5 produtos.
2025-01-21 20:38:05.205 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 20:38:05.206 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8125 caracteres.
2025-01-21 20:38:05.207 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:38:05.208 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:38:06.798 -03:00 [INF] Received HTTP response headers after 1589.0236ms - 200
2025-01-21 20:38:06.799 -03:00 [INF] End processing HTTP request after 1592.1551ms - 200
2025-01-21 20:38:06.800 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsI6mVmd7urtq8YcUgBy5sDy6jnfn",
  "object": "chat.completion",
  "created": 1737502684,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Itens\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"REXONA\",\n      \"Subgrupo\": \"10313\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"COXA DE FRANGO\",\n      \"Subgrupo\": \"10123\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1734,
    "completion_tokens": 160,
    "total_tokens": 1894,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 20:38:06.806 -03:00 [INF] JSON bruto recebido: {
  "Itens": [
    {
      "Codigo": 1,
      "Nome": "REXONA",
      "Subgrupo": "10313"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "COXA DE FRANGO",
      "Subgrupo": "10123"
    }
  ]
}
2025-01-21 20:38:06.810 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 20:38:06.811 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Itens'.
2025-01-21 20:38:06.812 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 20:38:06.814 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1668.1011ms
2025-01-21 20:38:06.815 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:38:06.816 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1674.6212 ms
2025-01-21 20:38:06.819 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1680.2935ms
2025-01-21 20:54:34.642 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 276
2025-01-21 20:54:34.644 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:54:34.645 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 20:54:34.648 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 20:54:34.657 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool 70%",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool 100%",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104133",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
            ,
            {
              "Codigo": "104134",
              "Nome": "alcool 46%",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 20:54:34.701 -03:00 [INF] Processando lista de produtos.
2025-01-21 20:54:34.701 -03:00 [INF] Processando 5 produtos.
2025-01-21 20:54:34.702 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 20:54:34.703 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8797 caracteres.
2025-01-21 20:54:34.704 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:54:34.705 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:54:36.273 -03:00 [INF] Received HTTP response headers after 1566.7508ms - 200
2025-01-21 20:54:36.274 -03:00 [INF] End processing HTTP request after 1569.7064ms - 200
2025-01-21 20:54:36.279 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIMkrTyNA6cso35E6jTz0jt5sQjy",
  "object": "chat.completion",
  "created": 1737503674,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10313\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"1021\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104134\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1871,
    "completion_tokens": 97,
    "total_tokens": 1968,
    "prompt_tokens_details": {
      "cached_tokens": 1408,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 20:54:36.283 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10313"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"1021"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104134"}
]
2025-01-21 20:54:36.292 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-21 20:54:36.293 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 20:54:36.294 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1646.6063ms
2025-01-21 20:54:36.295 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:54:36.296 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1652.2855 ms
2025-01-21 20:54:36.298 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1655.6767ms
2025-01-21 20:55:23.142 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 276
2025-01-21 20:55:23.144 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:55:23.145 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 20:55:23.147 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 20:55:23.156 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 20:55:23.204 -03:00 [INF] Processando lista de produtos.
2025-01-21 20:55:23.204 -03:00 [INF] Processando 5 produtos.
2025-01-21 20:55:23.205 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 20:55:23.212 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8448 caracteres.
2025-01-21 20:55:23.214 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:55:23.215 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:55:24.575 -03:00 [INF] Received HTTP response headers after 1358.9631ms - 200
2025-01-21 20:55:24.576 -03:00 [INF] End processing HTTP request after 1362.546ms - 200
2025-01-21 20:55:24.580 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsINWA5mwFrcpEHqf016h8QO0vFhR",
  "object": "chat.completion",
  "created": 1737503722,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\n        \"Codigo\": 1,\n        \"Nome\": \"REXONA\",\n        \"Subgrupo\": \"10313\"\n    },\n    {\n        \"Codigo\": 2,\n        \"Nome\": \"CENOURA\",\n        \"Subgrupo\": \"10113\"\n    },\n    {\n        \"Codigo\": 3,\n        \"Nome\": \"PERNIL SUINO\",\n        \"Subgrupo\": \"10122\"\n    },\n    {\n        \"Codigo\": 4,\n        \"Nome\": \"ENLATADO\",\n        \"Subgrupo\": \"242424\"\n    },\n    {\n        \"Codigo\": 5,\n        \"Nome\": \"alcool 46%\",\n        \"Subgrupo\": \"104132\"\n    }\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1798,
    "completion_tokens": 151,
    "total_tokens": 1949,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 20:55:24.585 -03:00 [INF] JSON bruto recebido: [
    {
        "Codigo": 1,
        "Nome": "REXONA",
        "Subgrupo": "10313"
    },
    {
        "Codigo": 2,
        "Nome": "CENOURA",
        "Subgrupo": "10113"
    },
    {
        "Codigo": 3,
        "Nome": "PERNIL SUINO",
        "Subgrupo": "10122"
    },
    {
        "Codigo": 4,
        "Nome": "ENLATADO",
        "Subgrupo": "242424"
    },
    {
        "Codigo": 5,
        "Nome": "alcool 46%",
        "Subgrupo": "104132"
    }
]
2025-01-21 20:55:24.592 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-21 20:55:24.593 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 20:55:24.594 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1447.2465ms
2025-01-21 20:55:24.595 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:55:24.596 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1452.6670 ms
2025-01-21 20:55:24.598 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1456.048ms
2025-01-21 20:55:54.366 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 276
2025-01-21 20:55:54.368 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:55:54.369 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 20:55:54.372 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 20:55:54.373 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 20:55:54.428 -03:00 [INF] Processando lista de produtos.
2025-01-21 20:55:54.429 -03:00 [INF] Processando 5 produtos.
2025-01-21 20:55:54.430 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 20:55:54.431 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8448 caracteres.
2025-01-21 20:55:54.432 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:55:54.433 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:55:55.727 -03:00 [INF] Received HTTP response headers after 1292.4047ms - 200
2025-01-21 20:55:55.728 -03:00 [INF] End processing HTTP request after 1295.9672ms - 200
2025-01-21 20:55:55.740 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIO1Zj9fqoRUK0qk2K1ScapjhhTF",
  "object": "chat.completion",
  "created": 1737503753,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"produtos\": [\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10313\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1798,
    "completion_tokens": 105,
    "total_tokens": 1903,
    "prompt_tokens_details": {
      "cached_tokens": 1792,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 20:55:55.745 -03:00 [INF] JSON bruto recebido: {
  "produtos": [
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10313"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"}
  ]
}
2025-01-21 20:55:55.749 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 20:55:55.749 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'produtos'.
2025-01-21 20:55:55.750 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 20:55:55.753 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1380.9073ms
2025-01-21 20:55:55.754 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:55:55.756 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1387.3107 ms
2025-01-21 20:55:55.757 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1390.7486ms
2025-01-21 20:56:03.032 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 276
2025-01-21 20:56:03.034 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:56:03.036 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 20:56:03.040 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 20:56:03.042 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 20:56:03.115 -03:00 [INF] Processando lista de produtos.
2025-01-21 20:56:03.116 -03:00 [INF] Processando 5 produtos.
2025-01-21 20:56:03.117 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 20:56:03.119 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8448 caracteres.
2025-01-21 20:56:03.121 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:56:03.123 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:56:04.533 -03:00 [INF] Received HTTP response headers after 1408.6377ms - 200
2025-01-21 20:56:04.534 -03:00 [INF] End processing HTTP request after 1412.8337ms - 200
2025-01-21 20:56:04.539 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIOA0ptEkZyyQi0So37ociYzHthd",
  "object": "chat.completion",
  "created": 1737503762,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\n        \"Codigo\": 1,\n        \"Nome\": \"REXONA\",\n        \"Subgrupo\": \"10313\"\n    },\n    {\n        \"Codigo\": 2,\n        \"Nome\": \"CENOURA\",\n        \"Subgrupo\": \"10113\"\n    },\n    {\n        \"Codigo\": 3,\n        \"Nome\": \"PERNIL SUINO\",\n        \"Subgrupo\": \"10122\"\n    },\n    {\n        \"Codigo\": 4,\n        \"Nome\": \"ENLATADO\",\n        \"Subgrupo\": \"242424\"\n    },\n    {\n        \"Codigo\": 5,\n        \"Nome\": \"alcool 46%\",\n        \"Subgrupo\": \"104131\"\n    }\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1798,
    "completion_tokens": 151,
    "total_tokens": 1949,
    "prompt_tokens_details": {
      "cached_tokens": 1408,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 20:56:04.544 -03:00 [INF] JSON bruto recebido: [
    {
        "Codigo": 1,
        "Nome": "REXONA",
        "Subgrupo": "10313"
    },
    {
        "Codigo": 2,
        "Nome": "CENOURA",
        "Subgrupo": "10113"
    },
    {
        "Codigo": 3,
        "Nome": "PERNIL SUINO",
        "Subgrupo": "10122"
    },
    {
        "Codigo": 4,
        "Nome": "ENLATADO",
        "Subgrupo": "242424"
    },
    {
        "Codigo": 5,
        "Nome": "alcool 46%",
        "Subgrupo": "104131"
    }
]
2025-01-21 20:56:04.551 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-21 20:56:04.551 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 20:56:04.553 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1512.9786ms
2025-01-21 20:56:04.554 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:56:04.555 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1521.3170 ms
2025-01-21 20:56:04.557 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1524.9165ms
2025-01-21 20:56:06.861 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 276
2025-01-21 20:56:06.863 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:56:06.864 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 20:56:06.867 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 20:56:06.868 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 20:56:06.935 -03:00 [INF] Processando lista de produtos.
2025-01-21 20:56:06.935 -03:00 [INF] Processando 5 produtos.
2025-01-21 20:56:06.936 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 20:56:06.941 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8448 caracteres.
2025-01-21 20:56:06.942 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:56:06.943 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:56:08.414 -03:00 [INF] Received HTTP response headers after 1470.2386ms - 200
2025-01-21 20:56:08.416 -03:00 [INF] End processing HTTP request after 1473.9039ms - 200
2025-01-21 20:56:08.422 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIOE6OMdZ0DoYdgGP6GFlI1lWH39",
  "object": "chat.completion",
  "created": 1737503766,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"REXONA\",\n      \"Subgrupo\": \"10313\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"alcool 46%\",\n      \"Subgrupo\": \"104131\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1798,
    "completion_tokens": 159,
    "total_tokens": 1957,
    "prompt_tokens_details": {
      "cached_tokens": 1792,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 20:56:08.427 -03:00 [INF] JSON bruto recebido: {
  "Produtos": [
    {
      "Codigo": 1,
      "Nome": "REXONA",
      "Subgrupo": "10313"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "alcool 46%",
      "Subgrupo": "104131"
    }
  ]
}
2025-01-21 20:56:08.432 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 20:56:08.434 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Produtos'.
2025-01-21 20:56:08.435 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 20:56:08.437 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1569.9923ms
2025-01-21 20:56:08.438 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:56:08.439 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1576.1600 ms
2025-01-21 20:56:08.440 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1579.6126ms
2025-01-21 20:56:10.141 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 276
2025-01-21 20:56:10.143 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:56:10.145 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 20:56:10.147 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 20:56:10.148 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 20:56:10.188 -03:00 [INF] Processando lista de produtos.
2025-01-21 20:56:10.188 -03:00 [INF] Processando 5 produtos.
2025-01-21 20:56:10.189 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 20:56:10.190 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8448 caracteres.
2025-01-21 20:56:10.191 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:56:10.192 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 20:56:11.189 -03:00 [INF] Received HTTP response headers after 995.7373ms - 200
2025-01-21 20:56:11.190 -03:00 [INF] End processing HTTP request after 999.1119ms - 200
2025-01-21 20:56:11.192 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIOHkx1MNIyRAXiQoDkdNeeUB6ts",
  "object": "chat.completion",
  "created": 1737503769,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10313\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1798,
    "completion_tokens": 97,
    "total_tokens": 1895,
    "prompt_tokens_details": {
      "cached_tokens": 1792,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 20:56:11.197 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10313"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"}
]
2025-01-21 20:56:11.200 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-21 20:56:11.201 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 20:56:11.202 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1055.6024ms
2025-01-21 20:56:11.204 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 20:56:11.206 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1062.9984 ms
2025-01-21 20:56:11.208 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1066.5537ms
2025-01-21 21:14:30.690 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 1914
2025-01-21 21:14:30.692 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:14:30.693 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:14:30.696 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:14:30.697 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:14:30.731 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:14:30.732 -03:00 [INF] Processando 35 produtos.
2025-01-21 21:14:30.732 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:14:30.733 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 10116 caracteres.
2025-01-21 21:14:30.734 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:14:30.735 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:14:36.030 -03:00 [INF] Received HTTP response headers after 5293.5686ms - 200
2025-01-21 21:14:36.031 -03:00 [INF] End processing HTTP request after 5296.5648ms - 200
2025-01-21 21:14:36.032 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIg2GUw6Pz0jm0Z1VblzEP5Gam1I",
  "object": "chat.completion",
  "created": 1737504870,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10123\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"},\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10123\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"},\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10123\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"},\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10123\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"},\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10123\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"},\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10123\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2242,
    "completion_tokens": 567,
    "total_tokens": 2809,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:14:36.040 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10111"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10123"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"},
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10111"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10123"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"},
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10111"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10123"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"},
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10111"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10123"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"},
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10111"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10123"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"},
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10111"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10123"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"}
]
2025-01-21 21:14:36.050 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-21 21:14:36.051 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:14:36.052 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 5356.7484ms
2025-01-21 21:14:36.053 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:14:36.054 -03:00 [INF] HTTP POST /produto/processar responded 200 in 5361.6064 ms
2025-01-21 21:14:36.055 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 5365.262ms
2025-01-21 21:21:34.903 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 327
2025-01-21 21:21:34.905 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:21:34.907 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:21:34.909 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:21:34.910 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:21:34.933 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:21:34.933 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:21:34.934 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:21:34.935 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8499 caracteres.
2025-01-21 21:21:34.935 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:21:34.936 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:21:36.607 -03:00 [INF] Received HTTP response headers after 1670.2215ms - 200
2025-01-21 21:21:36.608 -03:00 [INF] End processing HTTP request after 1672.9896ms - 200
2025-01-21 21:21:36.609 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIms4f56kbpYM8ocOygvwVcynm1c",
  "object": "chat.completion",
  "created": 1737505294,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"frutas\": [\n    {\"Codigo\":1,\"Nome\":\"maça\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"}\n  ],\n  \"carnes\": [\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n  ],\n  \"bebidas\": [\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"}\n  ],\n  \"limpeza\": [\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"}\n  ],\n  \"higiene\": [\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10313\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1811,
    "completion_tokens": 157,
    "total_tokens": 1968,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:21:36.613 -03:00 [INF] JSON bruto recebido: {
  "frutas": [
    {"Codigo":1,"Nome":"maça","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"}
  ],
  "carnes": [
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"}
  ],
  "bebidas": [
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"}
  ],
  "limpeza": [
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"}
  ],
  "higiene": [
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10313"}
  ]
}
2025-01-21 21:21:36.615 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 21:21:36.616 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'frutas'.
2025-01-21 21:21:36.617 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:21:36.618 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1709.4107ms
2025-01-21 21:21:36.619 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:21:36.620 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1714.5192 ms
2025-01-21 21:21:36.621 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1717.9427ms
2025-01-21 21:21:39.087 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 327
2025-01-21 21:21:39.089 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:21:39.090 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:21:39.092 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:21:39.093 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:21:39.129 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:21:39.130 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:21:39.131 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:21:39.132 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8499 caracteres.
2025-01-21 21:21:39.133 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:21:39.135 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:21:40.464 -03:00 [INF] Received HTTP response headers after 1328.0335ms - 200
2025-01-21 21:21:40.465 -03:00 [INF] End processing HTTP request after 1331.6067ms - 200
2025-01-21 21:21:40.466 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsImwmUsNjMuXZIp51SkiCSO4Lpsn",
  "object": "chat.completion",
  "created": 1737505298,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"maça\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"},\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"},\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10313\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1811,
    "completion_tokens": 114,
    "total_tokens": 1925,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:21:40.470 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"maça","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"},
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"},
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10313"}
]
2025-01-21 21:21:40.472 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-21 21:21:40.473 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:21:40.474 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1382.4362ms
2025-01-21 21:21:40.475 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:21:40.476 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1387.0775 ms
2025-01-21 21:21:40.477 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1390.4206ms
2025-01-21 21:21:55.871 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 326
2025-01-21 21:21:55.873 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:21:55.874 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:21:55.877 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:21:55.878 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:21:55.912 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:21:55.913 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:21:55.915 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:21:55.916 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8498 caracteres.
2025-01-21 21:21:55.917 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:21:55.918 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:21:58.121 -03:00 [INF] Received HTTP response headers after 2202.3119ms - 200
2025-01-21 21:21:58.122 -03:00 [INF] End processing HTTP request after 2205.6222ms - 200
2025-01-21 21:21:58.123 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsInDFJO4NVk7LbvnrNxnOAlcMjl8",
  "object": "chat.completion",
  "created": 1737505315,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Frutas Nacionais\": {\n    \"Codigo\": \"10111\",\n    \"Nome\": \"Frutas Nacionais\",\n    \"Subgrupo\": \"1\"\n  },\n  \"Frutas Importadas\": {\n    \"Codigo\": \"10112\",\n    \"Nome\": \"Frutas Importadas\",\n    \"Subgrupo\": \"2\"\n  },\n  \"Carnes Suínas\": {\n    \"Codigo\": \"10122\",\n    \"Nome\": \"Carnes Suínas\",\n    \"Subgrupo\": \"3\"\n  },\n  \"Igo Enlatado\": {\n    \"Codigo\": \"242424\",\n    \"Nome\": \"Igo Enlatado\",\n    \"Subgrupo\": \"4\"\n  },\n  \"alcool em gel\": {\n    \"Codigo\": \"104132\",\n    \"Nome\": \"alcool em gel\",\n    \"Subgrupo\": \"5\"\n  },\n  \"REXONA\": {\n    \"Codigo\": 1,\n    \"Nome\": \"REXONA\",\n    \"Subgrupo\": \"\"\n  }\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1809,
    "completion_tokens": 222,
    "total_tokens": 2031,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:21:58.127 -03:00 [INF] JSON bruto recebido: {
  "Frutas Nacionais": {
    "Codigo": "10111",
    "Nome": "Frutas Nacionais",
    "Subgrupo": "1"
  },
  "Frutas Importadas": {
    "Codigo": "10112",
    "Nome": "Frutas Importadas",
    "Subgrupo": "2"
  },
  "Carnes Suínas": {
    "Codigo": "10122",
    "Nome": "Carnes Suínas",
    "Subgrupo": "3"
  },
  "Igo Enlatado": {
    "Codigo": "242424",
    "Nome": "Igo Enlatado",
    "Subgrupo": "4"
  },
  "alcool em gel": {
    "Codigo": "104132",
    "Nome": "alcool em gel",
    "Subgrupo": "5"
  },
  "REXONA": {
    "Codigo": 1,
    "Nome": "REXONA",
    "Subgrupo": ""
  }
}
2025-01-21 21:21:58.131 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 21:21:58.132 -03:00 [ERR] Erro ao desserializar JSON: Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[Produto]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.
To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.
Path '['Frutas Nacionais'].Codigo', line 3, position 13.
2025-01-21 21:21:58.133 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:21:58.134 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2257.8972ms
2025-01-21 21:21:58.135 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:21:58.136 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2263.2863 ms
2025-01-21 21:21:58.138 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2266.9032ms
2025-01-21 21:22:01.811 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 326
2025-01-21 21:22:01.813 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:22:01.815 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:22:01.817 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:22:01.818 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:22:01.852 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:22:01.853 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:22:01.854 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:22:01.855 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8498 caracteres.
2025-01-21 21:22:01.856 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:22:01.858 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:22:04.114 -03:00 [INF] Received HTTP response headers after 2255.6349ms - 200
2025-01-21 21:22:04.115 -03:00 [INF] End processing HTTP request after 2258.8795ms - 200
2025-01-21 21:22:04.133 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsInJjrGppaQs3VyR6jac1OEpYDDx",
  "object": "chat.completion",
  "created": 1737505321,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"frutas\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"maça\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"tomate\",\n      \"Subgrupo\": \"10113\"\n    }\n  ],\n  \"carnes\": [\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    }\n  ],\n  \"bebidas\": [\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    }\n  ],\n  \"limpeza\": [\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"alcool 46%\",\n      \"Subgrupo\": \"104131\"\n    }\n  ],\n  \"higiene\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"REXONA\",\n      \"Subgrupo\": \"10313\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1809,
    "completion_tokens": 220,
    "total_tokens": 2029,
    "prompt_tokens_details": {
      "cached_tokens": 1792,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:22:04.138 -03:00 [INF] JSON bruto recebido: {
  "frutas": [
    {
      "Codigo": 1,
      "Nome": "maça",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "tomate",
      "Subgrupo": "10113"
    }
  ],
  "carnes": [
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    }
  ],
  "bebidas": [
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    }
  ],
  "limpeza": [
    {
      "Codigo": 5,
      "Nome": "alcool 46%",
      "Subgrupo": "104131"
    }
  ],
  "higiene": [
    {
      "Codigo": 1,
      "Nome": "REXONA",
      "Subgrupo": "10313"
    }
  ]
}
2025-01-21 21:22:04.141 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 21:22:04.141 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'frutas'.
2025-01-21 21:22:04.142 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:22:04.143 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2326.4365ms
2025-01-21 21:22:04.144 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:22:04.145 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2331.5755 ms
2025-01-21 21:22:04.146 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2334.834ms
2025-01-21 21:22:32.109 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 326
2025-01-21 21:22:32.111 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:22:32.113 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:22:32.115 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:22:32.116 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:22:32.150 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:22:32.151 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:22:32.152 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:22:32.153 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8498 caracteres.
2025-01-21 21:22:32.154 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:22:32.155 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:22:34.462 -03:00 [INF] Received HTTP response headers after 2306.4268ms - 200
2025-01-21 21:22:34.463 -03:00 [INF] End processing HTTP request after 2309.631ms - 200
2025-01-21 21:22:34.468 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsInnFMBPfA8EwkB5lIj9DCU14cRk",
  "object": "chat.completion",
  "created": 1737505351,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"frutas\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"maça\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"tomate\",\n      \"Subgrupo\": \"10113\"\n    }\n  ],\n  \"carnes\": [\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    }\n  ],\n  \"bebidas\": [\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    }\n  ],\n  \"limpeza\": [\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"alcool 46%\",\n      \"Subgrupo\": \"104132\"\n    }\n  ],\n  \"higiene\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"REXONA\",\n      \"Subgrupo\": \"10313\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1809,
    "completion_tokens": 220,
    "total_tokens": 2029,
    "prompt_tokens_details": {
      "cached_tokens": 1792,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:22:34.472 -03:00 [INF] JSON bruto recebido: {
  "frutas": [
    {
      "Codigo": 1,
      "Nome": "maça",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "tomate",
      "Subgrupo": "10113"
    }
  ],
  "carnes": [
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    }
  ],
  "bebidas": [
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    }
  ],
  "limpeza": [
    {
      "Codigo": 5,
      "Nome": "alcool 46%",
      "Subgrupo": "104132"
    }
  ],
  "higiene": [
    {
      "Codigo": 1,
      "Nome": "REXONA",
      "Subgrupo": "10313"
    }
  ]
}
2025-01-21 21:22:34.475 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 21:22:34.476 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'frutas'.
2025-01-21 21:22:34.477 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:22:34.478 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2362.7835ms
2025-01-21 21:22:34.479 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:22:34.480 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2368.1847 ms
2025-01-21 21:22:34.481 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2371.6602ms
2025-01-21 21:22:36.866 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 326
2025-01-21 21:22:36.868 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:22:36.869 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:22:36.872 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:22:36.873 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:22:36.903 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:22:36.904 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:22:36.904 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:22:36.905 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8498 caracteres.
2025-01-21 21:22:36.906 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:22:36.907 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:22:38.664 -03:00 [INF] Received HTTP response headers after 1755.8674ms - 200
2025-01-21 21:22:38.665 -03:00 [INF] End processing HTTP request after 1759.1232ms - 200
2025-01-21 21:22:38.672 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsInsA50zA7nuifTzdNeTCTTzqfuP",
  "object": "chat.completion",
  "created": 1737505356,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"frutas\": [\n    {\"Codigo\":1,\"Nome\":\"maça\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"tomate\",\"Subgrupo\":\"10113\"}\n  ],\n  \"carnes\": [\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n  ],\n  \"bebidas\": [\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"}\n  ],\n  \"limpeza\": [\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"}\n  ],\n  \"higiene\": [\n    {\"Codigo\":1,\"Nome\":\"REXONA\",\"Subgrupo\":\"10313\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1809,
    "completion_tokens": 155,
    "total_tokens": 1964,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:22:38.678 -03:00 [INF] JSON bruto recebido: {
  "frutas": [
    {"Codigo":1,"Nome":"maça","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"tomate","Subgrupo":"10113"}
  ],
  "carnes": [
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"}
  ],
  "bebidas": [
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"}
  ],
  "limpeza": [
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"}
  ],
  "higiene": [
    {"Codigo":1,"Nome":"REXONA","Subgrupo":"10313"}
  ]
}
2025-01-21 21:22:38.683 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 21:22:38.684 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'frutas'.
2025-01-21 21:22:38.685 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:22:38.686 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1814.5409ms
2025-01-21 21:22:38.687 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:22:38.689 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1821.0351 ms
2025-01-21 21:22:38.690 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1824.6266ms
2025-01-21 21:22:54.955 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 326
2025-01-21 21:22:54.957 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:22:54.958 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:22:54.960 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:22:54.961 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:22:54.996 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:22:54.997 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:22:54.998 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:22:54.999 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8498 caracteres.
2025-01-21 21:22:55.000 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:22:55.002 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:22:57.468 -03:00 [INF] Received HTTP response headers after 2465.1031ms - 200
2025-01-21 21:22:57.469 -03:00 [INF] End processing HTTP request after 2468.4393ms - 200
2025-01-21 21:22:57.470 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIoAaHdR2qX5KdtDU1lWUArODdDJ",
  "object": "chat.completion",
  "created": 1737505374,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"FrutasNacionais\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"MAÇA\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"TOMATE\",\n      \"Subgrupo\": \"10113\"\n    }\n  ],\n  \"FrutasImportadas\": [\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    }\n  ],\n  \"LimpezaGeral\": [\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"alcool 46%\",\n      \"Subgrupo\": \"104131\"\n    }\n  ],\n  \"HigienePessoal\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"REXONA\",\n      \"Subgrupo\": \"10311\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1811,
    "completion_tokens": 223,
    "total_tokens": 2034,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:22:57.473 -03:00 [INF] JSON bruto recebido: {
  "FrutasNacionais": [
    {
      "Codigo": 1,
      "Nome": "MAÇA",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "TOMATE",
      "Subgrupo": "10113"
    }
  ],
  "FrutasImportadas": [
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    }
  ],
  "LimpezaGeral": [
    {
      "Codigo": 5,
      "Nome": "alcool 46%",
      "Subgrupo": "104131"
    }
  ],
  "HigienePessoal": [
    {
      "Codigo": 1,
      "Nome": "REXONA",
      "Subgrupo": "10311"
    }
  ]
}
2025-01-21 21:22:57.477 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 21:22:57.477 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'FrutasNacionais'.
2025-01-21 21:22:57.478 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:22:57.479 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2519.3437ms
2025-01-21 21:22:57.480 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:22:57.481 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2524.2714 ms
2025-01-21 21:22:57.482 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2527.5399ms
2025-01-21 21:23:06.245 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 327
2025-01-21 21:23:06.247 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:23:06.248 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:23:06.250 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:23:06.251 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:23:06.273 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:23:06.274 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:23:06.275 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:23:06.275 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8499 caracteres.
2025-01-21 21:23:06.276 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:23:06.277 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:23:07.716 -03:00 [INF] Received HTTP response headers after 1438.0508ms - 200
2025-01-21 21:23:07.717 -03:00 [INF] End processing HTTP request after 1441.0381ms - 200
2025-01-21 21:23:07.718 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIoL97RVRVYHOpti11FUGWaLn1UT",
  "object": "chat.completion",
  "created": 1737505385,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"frutas\": [\n    {\"Codigo\":1,\"Nome\":\"MAÇA\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":1,\"Nome\":\"TOMATE\",\"Subgrupo\":\"10113\"}\n  ],\n  \"carnes\": [\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n  ],\n  \"bebidas\": [\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"}\n  ],\n  \"limpeza\": [\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1812,
    "completion_tokens": 149,
    "total_tokens": 1961,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:23:07.722 -03:00 [INF] JSON bruto recebido: {
  "frutas": [
    {"Codigo":1,"Nome":"MAÇA","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":1,"Nome":"TOMATE","Subgrupo":"10113"}
  ],
  "carnes": [
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"}
  ],
  "bebidas": [
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"}
  ],
  "limpeza": [
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"}
  ]
}
2025-01-21 21:23:07.725 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 21:23:07.725 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'frutas'.
2025-01-21 21:23:07.726 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:23:07.727 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1477.8477ms
2025-01-21 21:23:07.728 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:23:07.729 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1482.1400 ms
2025-01-21 21:23:07.731 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1485.4958ms
2025-01-21 21:23:41.040 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 327
2025-01-21 21:23:41.042 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:23:41.043 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:23:41.046 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:23:41.054 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
            ,
            {
              "Codigo": "101133",
              "Nome": "Legumes",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:23:41.088 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:23:41.089 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:23:41.090 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:23:41.091 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8676 caracteres.
2025-01-21 21:23:41.092 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:23:41.093 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:23:43.672 -03:00 [INF] Received HTTP response headers after 2578.9364ms - 200
2025-01-21 21:23:43.674 -03:00 [INF] End processing HTTP request after 2581.9452ms - 200
2025-01-21 21:23:43.676 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIouCCxrakMuT160SBgt0eFLXT65",
  "object": "chat.completion",
  "created": 1737505420,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"frutas\": [\n    {\"Codigo\":1,\"Nome\":\"MAÇA\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":1,\"Nome\":\"TOMATE\",\"Subgrupo\":\"10113\"}\n  ],\n  \"legumes\": [\n    {\"Codigo\":1,\"Nome\":\"TOMATE\",\"Subgrupo\":\"101133\"}\n  ],\n  \"carnes\": [\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n  ],\n  \"bebidas\": [\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"}\n  ],\n  \"limpeza\": [\n    {\"Codigo\":5,\"Nome\":\"alcool 46%\",\"Subgrupo\":\"104131\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1845,
    "completion_tokens": 175,
    "total_tokens": 2020,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:23:43.680 -03:00 [INF] JSON bruto recebido: {
  "frutas": [
    {"Codigo":1,"Nome":"MAÇA","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":1,"Nome":"TOMATE","Subgrupo":"10113"}
  ],
  "legumes": [
    {"Codigo":1,"Nome":"TOMATE","Subgrupo":"101133"}
  ],
  "carnes": [
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"}
  ],
  "bebidas": [
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"}
  ],
  "limpeza": [
    {"Codigo":5,"Nome":"alcool 46%","Subgrupo":"104131"}
  ]
}
2025-01-21 21:23:43.683 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-21 21:23:43.683 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'frutas'.
2025-01-21 21:23:43.684 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:23:43.686 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2640.104ms
2025-01-21 21:23:43.687 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:23:43.687 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2645.2404 ms
2025-01-21 21:23:43.689 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2648.6685ms
2025-01-21 21:23:48.327 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 327
2025-01-21 21:23:48.329 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:23:48.330 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:23:48.332 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:23:48.332 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
            ,
            {
              "Codigo": "101133",
              "Nome": "Legumes",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:23:48.368 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:23:48.370 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:23:48.371 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:23:48.372 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8676 caracteres.
2025-01-21 21:23:48.373 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:23:48.374 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:23:50.097 -03:00 [INF] Received HTTP response headers after 1722.8487ms - 200
2025-01-21 21:23:50.098 -03:00 [INF] End processing HTTP request after 1725.8347ms - 200
2025-01-21 21:23:50.099 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIp1malxQ5P3doYpVJB0wHYKiVN5",
  "object": "chat.completion",
  "created": 1737505427,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\n        \"Codigo\": 1,\n        \"Nome\": \"MAÇA\",\n        \"Subgrupo\": \"10111\"\n    },\n    {\n        \"Codigo\": 2,\n        \"Nome\": \"CENOURA\",\n        \"Subgrupo\": \"10113\"\n    },\n    {\n        \"Codigo\": 3,\n        \"Nome\": \"PERNIL SUINO\",\n        \"Subgrupo\": \"10122\"\n    },\n    {\n        \"Codigo\": 4,\n        \"Nome\": \"ENLATADO\",\n        \"Subgrupo\": \"242424\"\n    },\n    {\n        \"Codigo\": 5,\n        \"Nome\": \"alcool 46%\",\n        \"Subgrupo\": \"104131\"\n    },\n    {\n        \"Codigo\": 1,\n        \"Nome\": \"TOMATE\",\n        \"Subgrupo\": \"10113\"\n    }\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1845,
    "completion_tokens": 180,
    "total_tokens": 2025,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:23:50.103 -03:00 [INF] JSON bruto recebido: [
    {
        "Codigo": 1,
        "Nome": "MAÇA",
        "Subgrupo": "10111"
    },
    {
        "Codigo": 2,
        "Nome": "CENOURA",
        "Subgrupo": "10113"
    },
    {
        "Codigo": 3,
        "Nome": "PERNIL SUINO",
        "Subgrupo": "10122"
    },
    {
        "Codigo": 4,
        "Nome": "ENLATADO",
        "Subgrupo": "242424"
    },
    {
        "Codigo": 5,
        "Nome": "alcool 46%",
        "Subgrupo": "104131"
    },
    {
        "Codigo": 1,
        "Nome": "TOMATE",
        "Subgrupo": "10113"
    }
]
2025-01-21 21:23:50.107 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-21 21:23:50.107 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:23:50.108 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1776.9668ms
2025-01-21 21:23:50.109 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:23:50.110 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1781.4817 ms
2025-01-21 21:23:50.112 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1784.7734ms
2025-01-21 21:26:18.589 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - application/json 4687
2025-01-21 21:26:18.592 -03:00 [INF] Executing endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-21 21:26:18.594 -03:00 [INF] Route matched with {action = "AtualizarDepartamentalizacao", controller = "Produto"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AtualizarDepartamentalizacao(Classe) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:26:18.597 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:26:18.598 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
            ,
            {
              "Codigo": "101133",
              "Nome": "Legumes",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104131",
              "Nome": "alcool",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "104132",
              "Nome": "alcool em gel",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:26:18.640 -03:00 [INF] Arquivo departamentalizacao.json atualizado com sucesso.
2025-01-21 21:26:18.642 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-01-21 21:26:18.643 -03:00 [INF] Executed action ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI) in 46.3629ms
2025-01-21 21:26:18.644 -03:00 [INF] Executed endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-21 21:26:18.645 -03:00 [INF] HTTP POST /produto/atualizar-departamentalizacao responded 200 in 53.1899 ms
2025-01-21 21:26:18.646 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - 200 0 null 56.9761ms
2025-01-21 21:26:23.757 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 327
2025-01-21 21:26:23.759 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:26:23.760 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-21 21:26:23.762 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-21 21:26:23.763 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "1011333",
              "Nome": "Legumes",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-21 21:26:23.798 -03:00 [INF] Processando lista de produtos.
2025-01-21 21:26:23.799 -03:00 [INF] Processando 6 produtos.
2025-01-21 21:26:23.800 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-21 21:26:23.802 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8334 caracteres.
2025-01-21 21:26:23.804 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:26:23.805 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-21 21:26:27.482 -03:00 [INF] Received HTTP response headers after 3675.6428ms - 200
2025-01-21 21:26:27.483 -03:00 [INF] End processing HTTP request after 3679.4682ms - 200
2025-01-21 21:26:27.489 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AsIrXoioqiutOhAmXkKznMTahnprt",
  "object": "chat.completion",
  "created": 1737505583,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\n        \"Codigo\": 1,\n        \"Nome\": \"MAÇA\",\n        \"Subgrupo\": \"10111\"\n    },\n    {\n        \"Codigo\": 2,\n        \"Nome\": \"CENOURA\",\n        \"Subgrupo\": \"10113\"\n    },\n    {\n        \"Codigo\": 3,\n        \"Nome\": \"PERNIL SUINO\",\n        \"Subgrupo\": \"10122\"\n    },\n    {\n        \"Codigo\": 4,\n        \"Nome\": \"ENLATADO\",\n        \"Subgrupo\": \"242424\"\n    },\n    {\n        \"Codigo\": 5,\n        \"Nome\": \"alcool 46%\",\n        \"Subgrupo\": \"10233\"\n    },\n    {\n        \"Codigo\": 1,\n        \"Nome\": \"TOMATE\",\n        \"Subgrupo\": \"10113\"\n    }\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1780,
    "completion_tokens": 180,
    "total_tokens": 1960,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-21 21:26:27.492 -03:00 [INF] JSON bruto recebido: [
    {
        "Codigo": 1,
        "Nome": "MAÇA",
        "Subgrupo": "10111"
    },
    {
        "Codigo": 2,
        "Nome": "CENOURA",
        "Subgrupo": "10113"
    },
    {
        "Codigo": 3,
        "Nome": "PERNIL SUINO",
        "Subgrupo": "10122"
    },
    {
        "Codigo": 4,
        "Nome": "ENLATADO",
        "Subgrupo": "242424"
    },
    {
        "Codigo": 5,
        "Nome": "alcool 46%",
        "Subgrupo": "10233"
    },
    {
        "Codigo": 1,
        "Nome": "TOMATE",
        "Subgrupo": "10113"
    }
]
2025-01-21 21:26:27.496 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-21 21:26:27.496 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 21:26:27.498 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 3735.2719ms
2025-01-21 21:26:27.499 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-21 21:26:27.499 -03:00 [INF] HTTP POST /produto/processar responded 200 in 3740.4091 ms
2025-01-21 21:26:27.501 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 3744.3838ms
