2025-01-19 15:09:17.747 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 15:09:17.774 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 15:09:17.775 -03:00 [INF] Hosting environment: Development
2025-01-19 15:09:17.776 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 15:09:44.256 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 172
2025-01-19 15:09:44.273 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 15:09:44.276 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 15:09:44.300 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 15:09:44.312 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 15:09:44.390 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-19 15:09:44.406 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 101.5298ms
2025-01-19 15:09:44.414 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 15:09:44.416 -03:00 [INF] HTTP POST /produto/processar responded 400 in 144.0226 ms
2025-01-19 15:09:44.419 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 400 null application/problem+json; charset=utf-8 163.9778ms
2025-01-19 15:10:31.267 -03:00 [INF] Application is shutting down...
2025-01-19 15:10:35.713 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 15:10:35.741 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 15:10:35.741 -03:00 [INF] Hosting environment: Development
2025-01-19 15:10:35.742 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 15:10:37.366 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 15:10:37.383 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 15:10:37.386 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 15:10:37.406 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 15:10:37.415 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 15:10:37.484 -03:00 [INF] Buscando subgrupo para o produto: ALFACE CRESPO
2025-01-19 15:10:37.485 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 15:10:37.486 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: ALFACE CRESPO
2025-01-19 15:10:37.502 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:10:37.505 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:10:38.412 -03:00 [INF] Received HTTP response headers after 904.5274ms - 404
2025-01-19 15:10:38.420 -03:00 [INF] End processing HTTP request after 920.5299ms - 404
2025-01-19 15:10:38.423 -03:00 [ERR] Erro na API OpenAI: NotFound - {
    "error": {
        "message": "The model `text-davinci-003` has been deprecated, learn more here: https://platform.openai.com/docs/deprecations",
        "type": "invalid_request_error",
        "param": null,
        "code": "model_not_found"
    }
}

2025-01-19 15:10:38.426 -03:00 [WRN] Não foi possível encontrar o subgrupo para ALFACE CRESPO, retornando 'Não encontrado'
2025-01-19 15:10:38.427 -03:00 [INF] Buscando subgrupo para o produto: CENOURA
2025-01-19 15:10:38.428 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 15:10:38.429 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: CENOURA
2025-01-19 15:10:38.431 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:10:38.431 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:10:38.892 -03:00 [INF] Received HTTP response headers after 459.569ms - 404
2025-01-19 15:10:38.895 -03:00 [INF] End processing HTTP request after 464.4711ms - 404
2025-01-19 15:10:38.897 -03:00 [ERR] Erro na API OpenAI: NotFound - {
    "error": {
        "message": "The model `text-davinci-003` has been deprecated, learn more here: https://platform.openai.com/docs/deprecations",
        "type": "invalid_request_error",
        "param": null,
        "code": "model_not_found"
    }
}

2025-01-19 15:10:38.899 -03:00 [WRN] Não foi possível encontrar o subgrupo para CENOURA, retornando 'Não encontrado'
2025-01-19 15:10:38.900 -03:00 [INF] Buscando subgrupo para o produto: PERNIL SUINO
2025-01-19 15:10:38.901 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 15:10:38.901 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: PERNIL SUINO
2025-01-19 15:10:38.902 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:10:38.903 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:10:39.135 -03:00 [INF] Received HTTP response headers after 230.3874ms - 404
2025-01-19 15:10:39.136 -03:00 [INF] End processing HTTP request after 233.6068ms - 404
2025-01-19 15:10:39.137 -03:00 [ERR] Erro na API OpenAI: NotFound - {
    "error": {
        "message": "The model `text-davinci-003` has been deprecated, learn more here: https://platform.openai.com/docs/deprecations",
        "type": "invalid_request_error",
        "param": null,
        "code": "model_not_found"
    }
}

2025-01-19 15:10:39.139 -03:00 [WRN] Não foi possível encontrar o subgrupo para PERNIL SUINO, retornando 'Não encontrado'
2025-01-19 15:10:39.142 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 15:10:39.150 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1740.8801ms
2025-01-19 15:10:39.152 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 15:10:39.154 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1771.3813 ms
2025-01-19 15:10:39.157 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1791.8022ms
2025-01-19 15:10:59.969 -03:00 [INF] Application is shutting down...
2025-01-19 15:12:12.155 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 15:12:12.183 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 15:12:12.183 -03:00 [INF] Hosting environment: Development
2025-01-19 15:12:12.184 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 15:12:16.086 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 15:12:16.104 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 15:12:16.106 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 15:12:16.128 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 15:12:16.138 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 15:12:16.212 -03:00 [INF] Buscando subgrupo para o produto: ALFACE CRESPO
2025-01-19 15:12:16.213 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 15:12:16.214 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: ALFACE CRESPO
2025-01-19 15:12:16.232 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:12:16.235 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:12:17.430 -03:00 [INF] Received HTTP response headers after 1192.3929ms - 429
2025-01-19 15:12:17.438 -03:00 [INF] End processing HTTP request after 1208.5078ms - 429
2025-01-19 15:12:17.441 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 15:12:17.443 -03:00 [WRN] Não foi possível encontrar o subgrupo para ALFACE CRESPO, retornando 'Não encontrado'
2025-01-19 15:12:17.444 -03:00 [INF] Buscando subgrupo para o produto: CENOURA
2025-01-19 15:12:17.444 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 15:12:17.445 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: CENOURA
2025-01-19 15:12:17.447 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:12:17.449 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:12:18.083 -03:00 [INF] Received HTTP response headers after 633.1169ms - 429
2025-01-19 15:12:18.084 -03:00 [INF] End processing HTTP request after 638.0105ms - 429
2025-01-19 15:12:18.085 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 15:12:18.087 -03:00 [WRN] Não foi possível encontrar o subgrupo para CENOURA, retornando 'Não encontrado'
2025-01-19 15:12:18.088 -03:00 [INF] Buscando subgrupo para o produto: PERNIL SUINO
2025-01-19 15:12:18.089 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 15:12:18.090 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: PERNIL SUINO
2025-01-19 15:12:18.091 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:12:18.092 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 15:12:18.697 -03:00 [INF] Received HTTP response headers after 604.2308ms - 429
2025-01-19 15:12:18.698 -03:00 [INF] End processing HTTP request after 607.4076ms - 429
2025-01-19 15:12:18.699 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 15:12:18.701 -03:00 [WRN] Não foi possível encontrar o subgrupo para PERNIL SUINO, retornando 'Não encontrado'
2025-01-19 15:12:18.705 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 15:12:18.712 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2579.9794ms
2025-01-19 15:12:18.713 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 15:12:18.716 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2612.6003 ms
2025-01-19 15:12:18.719 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2634.13ms
2025-01-19 17:01:18.942 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 17:01:18.948 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 17:01:18.952 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 17:01:18.955 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 17:01:18.965 -03:00 [INF] Buscando subgrupo para o produto: ALFACE CRESPO
2025-01-19 17:01:18.966 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 17:01:18.967 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: ALFACE CRESPO
2025-01-19 17:01:18.972 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 17:01:18.973 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 17:01:20.001 -03:00 [INF] Received HTTP response headers after 1026.3999ms - 429
2025-01-19 17:01:20.002 -03:00 [INF] End processing HTTP request after 1029.8202ms - 429
2025-01-19 17:01:20.006 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 17:01:20.009 -03:00 [WRN] Não foi possível encontrar o subgrupo para ALFACE CRESPO, retornando 'Não encontrado'
2025-01-19 17:01:20.011 -03:00 [INF] Buscando subgrupo para o produto: CENOURA
2025-01-19 17:01:20.013 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 17:01:20.014 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: CENOURA
2025-01-19 17:01:20.016 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 17:01:20.017 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 17:01:20.204 -03:00 [INF] Received HTTP response headers after 186.0624ms - 429
2025-01-19 17:01:20.205 -03:00 [INF] End processing HTTP request after 189.4288ms - 429
2025-01-19 17:01:20.206 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 17:01:20.208 -03:00 [WRN] Não foi possível encontrar o subgrupo para CENOURA, retornando 'Não encontrado'
2025-01-19 17:01:20.209 -03:00 [INF] Buscando subgrupo para o produto: PERNIL SUINO
2025-01-19 17:01:20.210 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 17:01:20.211 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: PERNIL SUINO
2025-01-19 17:01:20.212 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 17:01:20.213 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 17:01:20.999 -03:00 [INF] Received HTTP response headers after 785.4582ms - 429
2025-01-19 17:01:21.000 -03:00 [INF] End processing HTTP request after 788.5631ms - 429
2025-01-19 17:01:21.002 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 17:01:21.004 -03:00 [WRN] Não foi possível encontrar o subgrupo para PERNIL SUINO, retornando 'Não encontrado'
2025-01-19 17:01:21.005 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 17:01:21.006 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2051.7291ms
2025-01-19 17:01:21.007 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 17:01:21.008 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2060.6047 ms
2025-01-19 17:01:21.010 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2067.7458ms
2025-01-19 21:10:41.537 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:10:41.541 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:10:41.542 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:10:41.545 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:10:41.548 -03:00 [INF] Buscando subgrupo para o produto: ALFACE CRESPO
2025-01-19 21:10:41.548 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:10:41.549 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: ALFACE CRESPO
2025-01-19 21:10:41.550 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:10:41.551 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:10:42.788 -03:00 [INF] Received HTTP response headers after 1235.7312ms - 429
2025-01-19 21:10:42.789 -03:00 [INF] End processing HTTP request after 1238.7722ms - 429
2025-01-19 21:10:42.791 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 21:10:42.792 -03:00 [WRN] Não foi possível encontrar o subgrupo para ALFACE CRESPO, retornando 'Não encontrado'
2025-01-19 21:10:42.793 -03:00 [INF] Buscando subgrupo para o produto: CENOURA
2025-01-19 21:10:42.794 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:10:42.795 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: CENOURA
2025-01-19 21:10:42.796 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:10:42.797 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:10:42.968 -03:00 [INF] Received HTTP response headers after 170.2143ms - 429
2025-01-19 21:10:42.969 -03:00 [INF] End processing HTTP request after 173.1643ms - 429
2025-01-19 21:10:42.973 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 21:10:42.975 -03:00 [WRN] Não foi possível encontrar o subgrupo para CENOURA, retornando 'Não encontrado'
2025-01-19 21:10:42.975 -03:00 [INF] Buscando subgrupo para o produto: PERNIL SUINO
2025-01-19 21:10:42.976 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:10:42.977 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: PERNIL SUINO
2025-01-19 21:10:42.978 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:10:42.979 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:10:43.985 -03:00 [INF] Received HTTP response headers after 1005.4655ms - 429
2025-01-19 21:10:43.986 -03:00 [INF] End processing HTTP request after 1008.4175ms - 429
2025-01-19 21:10:43.988 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 21:10:43.991 -03:00 [WRN] Não foi possível encontrar o subgrupo para PERNIL SUINO, retornando 'Não encontrado'
2025-01-19 21:10:43.993 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:10:43.995 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2450.8574ms
2025-01-19 21:10:43.996 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:10:43.997 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2456.6395 ms
2025-01-19 21:10:43.999 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2462.3109ms
2025-01-19 21:13:36.325 -03:00 [INF] Application is shutting down...
2025-01-19 21:13:41.385 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:13:41.412 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:13:41.413 -03:00 [INF] Hosting environment: Development
2025-01-19 21:13:41.413 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:13:42.566 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:13:42.583 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:13:42.586 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:13:42.608 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:13:42.618 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:13:42.695 -03:00 [INF] Buscando subgrupo para o produto: ALFACE CRESPO
2025-01-19 21:13:42.696 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:13:42.697 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: ALFACE CRESPO
2025-01-19 21:13:42.714 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:13:42.717 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:13:43.647 -03:00 [INF] Received HTTP response headers after 927.1688ms - 429
2025-01-19 21:13:43.655 -03:00 [INF] End processing HTTP request after 943.0821ms - 429
2025-01-19 21:13:43.658 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 21:13:43.660 -03:00 [WRN] Não foi possível encontrar o subgrupo para ALFACE CRESPO, retornando 'Não encontrado'
2025-01-19 21:13:43.661 -03:00 [INF] Buscando subgrupo para o produto: CENOURA
2025-01-19 21:13:43.662 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:13:43.664 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: CENOURA
2025-01-19 21:13:43.665 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:13:43.666 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:13:45.149 -03:00 [INF] Received HTTP response headers after 1481.6542ms - 429
2025-01-19 21:13:45.150 -03:00 [INF] End processing HTTP request after 1485.1702ms - 429
2025-01-19 21:13:45.151 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 21:13:45.153 -03:00 [WRN] Não foi possível encontrar o subgrupo para CENOURA, retornando 'Não encontrado'
2025-01-19 21:13:45.154 -03:00 [INF] Buscando subgrupo para o produto: PERNIL SUINO
2025-01-19 21:13:45.155 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:13:45.156 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: PERNIL SUINO
2025-01-19 21:13:45.157 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:13:45.158 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:13:46.583 -03:00 [INF] Received HTTP response headers after 1424.1999ms - 429
2025-01-19 21:13:46.584 -03:00 [INF] End processing HTTP request after 1427.2545ms - 429
2025-01-19 21:13:46.585 -03:00 [ERR] Erro na API OpenAI: TooManyRequests - {
    "error": {
        "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",
        "type": "insufficient_quota",
        "param": null,
        "code": "insufficient_quota"
    }
}

2025-01-19 21:13:46.587 -03:00 [WRN] Não foi possível encontrar o subgrupo para PERNIL SUINO, retornando 'Não encontrado'
2025-01-19 21:13:46.591 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:13:46.598 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 3986.3604ms
2025-01-19 21:13:46.600 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:13:46.603 -03:00 [INF] HTTP POST /produto/processar responded 200 in 4020.7311 ms
2025-01-19 21:13:46.606 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 4040.9956ms
2025-01-19 21:25:47.085 -03:00 [INF] Application is shutting down...
2025-01-19 21:25:49.396 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:25:49.421 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:25:49.422 -03:00 [INF] Hosting environment: Development
2025-01-19 21:25:49.423 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:26:13.639 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:26:13.656 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:26:13.658 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:26:13.678 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:26:13.690 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:26:13.762 -03:00 [INF] Buscando subgrupo para o produto: ALFACE CRESPO
2025-01-19 21:26:13.763 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:26:13.763 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: ALFACE CRESPO
2025-01-19 21:26:13.781 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:26:13.784 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:26:14.866 -03:00 [INF] Received HTTP response headers after 1079.0446ms - 401
2025-01-19 21:26:14.874 -03:00 [INF] End processing HTTP request after 1095.3281ms - 401
2025-01-19 21:26:14.877 -03:00 [ERR] Erro na API OpenAI: Unauthorized - {
    "error": {
        "message": "Incorrect API key provided: sk-proj-********************************************************************************************************************************************************IIgA. You can find your API key at https://platform.openai.com/account/api-keys.",
        "type": "invalid_request_error",
        "param": null,
        "code": "invalid_api_key"
    }
}

2025-01-19 21:26:14.880 -03:00 [WRN] Não foi possível encontrar o subgrupo para ALFACE CRESPO, retornando 'Não encontrado'
2025-01-19 21:26:14.881 -03:00 [INF] Buscando subgrupo para o produto: CENOURA
2025-01-19 21:26:14.882 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:26:14.883 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: CENOURA
2025-01-19 21:26:14.884 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:26:14.885 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:26:16.341 -03:00 [INF] Received HTTP response headers after 1455.4992ms - 401
2025-01-19 21:26:16.343 -03:00 [INF] End processing HTTP request after 1459.0302ms - 401
2025-01-19 21:26:16.344 -03:00 [ERR] Erro na API OpenAI: Unauthorized - {
    "error": {
        "message": "Incorrect API key provided: sk-proj-********************************************************************************************************************************************************IIgA. You can find your API key at https://platform.openai.com/account/api-keys.",
        "type": "invalid_request_error",
        "param": null,
        "code": "invalid_api_key"
    }
}

2025-01-19 21:26:16.346 -03:00 [WRN] Não foi possível encontrar o subgrupo para CENOURA, retornando 'Não encontrado'
2025-01-19 21:26:16.347 -03:00 [INF] Buscando subgrupo para o produto: PERNIL SUINO
2025-01-19 21:26:16.348 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:26:16.348 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: PERNIL SUINO
2025-01-19 21:26:16.349 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:26:16.350 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:26:16.806 -03:00 [INF] Received HTTP response headers after 454.8206ms - 401
2025-01-19 21:26:16.807 -03:00 [INF] End processing HTTP request after 457.9498ms - 401
2025-01-19 21:26:16.809 -03:00 [ERR] Erro na API OpenAI: Unauthorized - {
    "error": {
        "message": "Incorrect API key provided: sk-proj-********************************************************************************************************************************************************IIgA. You can find your API key at https://platform.openai.com/account/api-keys.",
        "type": "invalid_request_error",
        "param": null,
        "code": "invalid_api_key"
    }
}

2025-01-19 21:26:16.810 -03:00 [WRN] Não foi possível encontrar o subgrupo para PERNIL SUINO, retornando 'Não encontrado'
2025-01-19 21:26:16.814 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:26:16.822 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 3139.5489ms
2025-01-19 21:26:16.823 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:26:16.825 -03:00 [INF] HTTP POST /produto/processar responded 200 in 3169.9908 ms
2025-01-19 21:26:16.828 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 3189.8831ms
2025-01-19 21:27:00.341 -03:00 [INF] Application is shutting down...
2025-01-19 21:27:04.878 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:27:04.904 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:27:04.904 -03:00 [INF] Hosting environment: Development
2025-01-19 21:27:04.905 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:27:22.831 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:27:22.847 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:27:22.850 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:27:22.869 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:27:22.878 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:27:22.949 -03:00 [INF] Buscando subgrupo para o produto: ALFACE CRESPO
2025-01-19 21:27:22.950 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:27:22.951 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: ALFACE CRESPO
2025-01-19 21:27:22.968 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:27:22.971 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:27:24.335 -03:00 [INF] Received HTTP response headers after 1362.1733ms - 400
2025-01-19 21:27:24.344 -03:00 [INF] End processing HTTP request after 1378.1314ms - 400
2025-01-19 21:27:24.346 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:27:24.348 -03:00 [WRN] Não foi possível encontrar o subgrupo para ALFACE CRESPO, retornando 'Não encontrado'
2025-01-19 21:27:24.349 -03:00 [INF] Buscando subgrupo para o produto: CENOURA
2025-01-19 21:27:24.350 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:27:24.350 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: CENOURA
2025-01-19 21:27:24.352 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:27:24.353 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:27:24.811 -03:00 [INF] Received HTTP response headers after 457.7433ms - 400
2025-01-19 21:27:24.813 -03:00 [INF] End processing HTTP request after 461.1371ms - 400
2025-01-19 21:27:24.814 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:27:24.815 -03:00 [WRN] Não foi possível encontrar o subgrupo para CENOURA, retornando 'Não encontrado'
2025-01-19 21:27:24.816 -03:00 [INF] Buscando subgrupo para o produto: PERNIL SUINO
2025-01-19 21:27:24.817 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:27:24.818 -03:00 [INF] Enviando requisição ao ChatGPT para classificar o produto: PERNIL SUINO
2025-01-19 21:27:24.819 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:27:24.820 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:27:25.674 -03:00 [INF] Received HTTP response headers after 851.9979ms - 400
2025-01-19 21:27:25.675 -03:00 [INF] End processing HTTP request after 856.2459ms - 400
2025-01-19 21:27:25.676 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:27:25.678 -03:00 [WRN] Não foi possível encontrar o subgrupo para PERNIL SUINO, retornando 'Não encontrado'
2025-01-19 21:27:25.681 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:27:25.689 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2816.2158ms
2025-01-19 21:27:25.691 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:27:25.693 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2846.3727 ms
2025-01-19 21:27:25.696 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2866.6908ms
2025-01-19 21:28:24.823 -03:00 [INF] Application is shutting down...
2025-01-19 21:28:27.687 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:28:27.713 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:28:27.713 -03:00 [INF] Hosting environment: Development
2025-01-19 21:28:27.714 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:28:32.179 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:28:32.200 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:28:32.203 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:28:32.224 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:28:32.235 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:28:32.309 -03:00 [INF] Buscando subgrupo para o produto: ALFACE CRESPO
2025-01-19 21:28:32.309 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:28:32.328 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:28:32.331 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:28:33.375 -03:00 [INF] Received HTTP response headers after 1040.9211ms - 400
2025-01-19 21:28:33.383 -03:00 [INF] End processing HTTP request after 1057.4803ms - 400
2025-01-19 21:28:33.386 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:28:33.387 -03:00 [INF] Buscando subgrupo para o produto: CENOURA
2025-01-19 21:28:33.388 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:28:33.389 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:28:33.391 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:28:35.331 -03:00 [INF] Received HTTP response headers after 1938.8889ms - 400
2025-01-19 21:28:35.332 -03:00 [INF] End processing HTTP request after 1943.2764ms - 400
2025-01-19 21:28:35.333 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:28:35.335 -03:00 [INF] Buscando subgrupo para o produto: PERNIL SUINO
2025-01-19 21:28:35.337 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:28:35.337 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:28:35.338 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:28:36.200 -03:00 [INF] Received HTTP response headers after 860.6201ms - 400
2025-01-19 21:28:36.201 -03:00 [INF] End processing HTTP request after 863.8163ms - 400
2025-01-19 21:28:36.202 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:28:36.207 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:28:36.214 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 3985.8869ms
2025-01-19 21:28:36.215 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:28:36.217 -03:00 [INF] HTTP POST /produto/processar responded 200 in 4018.3733 ms
2025-01-19 21:28:36.220 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 4042.245ms
2025-01-19 21:30:15.870 -03:00 [INF] Application is shutting down...
2025-01-19 21:30:18.723 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:30:18.750 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:30:18.751 -03:00 [INF] Hosting environment: Development
2025-01-19 21:30:18.752 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:30:21.226 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:30:21.244 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:30:21.246 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:30:21.265 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:30:21.275 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:30:21.346 -03:00 [INF] Buscando subgrupo para o produto: ALFACE CRESPO
2025-01-19 21:30:21.347 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:30:21.361 -03:00 [INF] Enviando requisição ao ChatGPT com payload: {"model":"gpt-3.5-turbo","messages":[{"role":"system","content":"Você é um assistente especializado em categorização de produtos com base na estrutura mercadológica fornecida."},{"role":"user","content":"Aqui está a estrutura mercadológica:\n{\"Codigo\":\"100\",\"Nome\":\"Mercado Central\",\"Departamentos\":[{\"Codigo\":\"101\",\"Nome\":\"Alimentos\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1011\",\"Nome\":\"Frutas e Verduras\",\"CodigoVinculo\":\"101\",\"Subgrupos\":[{\"Codigo\":\"10111\",\"Nome\":\"Frutas Nacionais\",\"CodigoVinculo\":\"1011\"},{\"Codigo\":\"10112\",\"Nome\":\"Frutas Importadas\",\"CodigoVinculo\":\"1011\"},{\"Codigo\":\"10113\",\"Nome\":\"Verduras\",\"CodigoVinculo\":\"1011\"}]},{\"Codigo\":\"1012\",\"Nome\":\"Carnes e Aves\",\"CodigoVinculo\":\"101\",\"Subgrupos\":[{\"Codigo\":\"10121\",\"Nome\":\"Carnes Bovinas\",\"CodigoVinculo\":\"1012\"},{\"Codigo\":\"10122\",\"Nome\":\"Carnes Suínas\",\"CodigoVinculo\":\"1012\"},{\"Codigo\":\"10123\",\"Nome\":\"Aves\",\"CodigoVinculo\":\"1012\"}]},{\"Codigo\":\"1013\",\"Nome\":\"Congelados\",\"CodigoVinculo\":\"101\",\"Subgrupos\":[{\"Codigo\":\"10131\",\"Nome\":\"Legumes Congelados\",\"CodigoVinculo\":\"1013\"},{\"Codigo\":\"10132\",\"Nome\":\"Carnes Congeladas\",\"CodigoVinculo\":\"1013\"},{\"Codigo\":\"10133\",\"Nome\":\"Frutas Congeladas\",\"CodigoVinculo\":\"1013\"}]}]},{\"Codigo\":\"102\",\"Nome\":\"Bebidas\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1021\",\"Nome\":\"Refrigerantes\",\"CodigoVinculo\":\"102\",\"Subgrupos\":[{\"Codigo\":\"10211\",\"Nome\":\"Cola\",\"CodigoVinculo\":\"1021\"},{\"Codigo\":\"10212\",\"Nome\":\"Laranja\",\"CodigoVinculo\":\"1021\"},{\"Codigo\":\"10213\",\"Nome\":\"Guaraná\",\"CodigoVinculo\":\"1021\"}]},{\"Codigo\":\"1022\",\"Nome\":\"Águas\",\"CodigoVinculo\":\"102\",\"Subgrupos\":[{\"Codigo\":\"10221\",\"Nome\":\"Água Mineral\",\"CodigoVinculo\":\"1022\"},{\"Codigo\":\"10222\",\"Nome\":\"Água com Gás\",\"CodigoVinculo\":\"1022\"}]},{\"Codigo\":\"1023\",\"Nome\":\"Bebidas Alcoólicas\",\"CodigoVinculo\":\"102\",\"Subgrupos\":[{\"Codigo\":\"10231\",\"Nome\":\"Cervejas\",\"CodigoVinculo\":\"1023\"},{\"Codigo\":\"10232\",\"Nome\":\"Vinhos\",\"CodigoVinculo\":\"1023\"},{\"Codigo\":\"10233\",\"Nome\":\"Destilados\",\"CodigoVinculo\":\"1023\"}]}]},{\"Codigo\":\"103\",\"Nome\":\"Higiene e Beleza\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1031\",\"Nome\":\"Higiene Pessoal\",\"CodigoVinculo\":\"103\",\"Subgrupos\":[{\"Codigo\":\"10311\",\"Nome\":\"Shampoos\",\"CodigoVinculo\":\"1031\"},{\"Codigo\":\"10312\",\"Nome\":\"Sabonetes\",\"CodigoVinculo\":\"1031\"},{\"Codigo\":\"10313\",\"Nome\":\"Desodorantes\",\"CodigoVinculo\":\"1031\"}]},{\"Codigo\":\"1032\",\"Nome\":\"Cuidados com a Pele\",\"CodigoVinculo\":\"103\",\"Subgrupos\":[{\"Codigo\":\"10321\",\"Nome\":\"Hidratantes\",\"CodigoVinculo\":\"1032\"},{\"Codigo\":\"10322\",\"Nome\":\"Protetor Solar\",\"CodigoVinculo\":\"1032\"},{\"Codigo\":\"10323\",\"Nome\":\"Cremes Anti-idade\",\"CodigoVinculo\":\"1032\"}]}]},{\"Codigo\":\"104\",\"Nome\":\"Limpeza\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1041\",\"Nome\":\"Limpeza Geral\",\"CodigoVinculo\":\"104\",\"Subgrupos\":[{\"Codigo\":\"10411\",\"Nome\":\"Detergentes\",\"CodigoVinculo\":\"1041\"},{\"Codigo\":\"10412\",\"Nome\":\"Desinfetantes\",\"CodigoVinculo\":\"1041\"},{\"Codigo\":\"10413\",\"Nome\":\"Sabão em Pó\",\"CodigoVinculo\":\"1041\"}]},{\"Codigo\":\"1042\",\"Nome\":\"Limpeza de Roupas\",\"CodigoVinculo\":\"104\",\"Subgrupos\":[{\"Codigo\":\"10421\",\"Nome\":\"Amaciantes\",\"CodigoVinculo\":\"1042\"},{\"Codigo\":\"10422\",\"Nome\":\"Sabão Líquido\",\"CodigoVinculo\":\"1042\"}]}]}]}"},{"role":"user","content":"Qual é o subgrupo correspondente ao produto: ALFACE CRESPO?"}],"max_tokens":100}
2025-01-19 21:30:21.386 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:30:21.389 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:30:22.371 -03:00 [INF] Received HTTP response headers after 978.7622ms - 400
2025-01-19 21:30:22.379 -03:00 [INF] End processing HTTP request after 996.4279ms - 400
2025-01-19 21:30:22.382 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:30:22.384 -03:00 [INF] Buscando subgrupo para o produto: CENOURA
2025-01-19 21:30:22.384 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:30:22.386 -03:00 [INF] Enviando requisição ao ChatGPT com payload: {"model":"gpt-3.5-turbo","messages":[{"role":"system","content":"Você é um assistente especializado em categorização de produtos com base na estrutura mercadológica fornecida."},{"role":"user","content":"Aqui está a estrutura mercadológica:\n{\"Codigo\":\"100\",\"Nome\":\"Mercado Central\",\"Departamentos\":[{\"Codigo\":\"101\",\"Nome\":\"Alimentos\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1011\",\"Nome\":\"Frutas e Verduras\",\"CodigoVinculo\":\"101\",\"Subgrupos\":[{\"Codigo\":\"10111\",\"Nome\":\"Frutas Nacionais\",\"CodigoVinculo\":\"1011\"},{\"Codigo\":\"10112\",\"Nome\":\"Frutas Importadas\",\"CodigoVinculo\":\"1011\"},{\"Codigo\":\"10113\",\"Nome\":\"Verduras\",\"CodigoVinculo\":\"1011\"}]},{\"Codigo\":\"1012\",\"Nome\":\"Carnes e Aves\",\"CodigoVinculo\":\"101\",\"Subgrupos\":[{\"Codigo\":\"10121\",\"Nome\":\"Carnes Bovinas\",\"CodigoVinculo\":\"1012\"},{\"Codigo\":\"10122\",\"Nome\":\"Carnes Suínas\",\"CodigoVinculo\":\"1012\"},{\"Codigo\":\"10123\",\"Nome\":\"Aves\",\"CodigoVinculo\":\"1012\"}]},{\"Codigo\":\"1013\",\"Nome\":\"Congelados\",\"CodigoVinculo\":\"101\",\"Subgrupos\":[{\"Codigo\":\"10131\",\"Nome\":\"Legumes Congelados\",\"CodigoVinculo\":\"1013\"},{\"Codigo\":\"10132\",\"Nome\":\"Carnes Congeladas\",\"CodigoVinculo\":\"1013\"},{\"Codigo\":\"10133\",\"Nome\":\"Frutas Congeladas\",\"CodigoVinculo\":\"1013\"}]}]},{\"Codigo\":\"102\",\"Nome\":\"Bebidas\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1021\",\"Nome\":\"Refrigerantes\",\"CodigoVinculo\":\"102\",\"Subgrupos\":[{\"Codigo\":\"10211\",\"Nome\":\"Cola\",\"CodigoVinculo\":\"1021\"},{\"Codigo\":\"10212\",\"Nome\":\"Laranja\",\"CodigoVinculo\":\"1021\"},{\"Codigo\":\"10213\",\"Nome\":\"Guaraná\",\"CodigoVinculo\":\"1021\"}]},{\"Codigo\":\"1022\",\"Nome\":\"Águas\",\"CodigoVinculo\":\"102\",\"Subgrupos\":[{\"Codigo\":\"10221\",\"Nome\":\"Água Mineral\",\"CodigoVinculo\":\"1022\"},{\"Codigo\":\"10222\",\"Nome\":\"Água com Gás\",\"CodigoVinculo\":\"1022\"}]},{\"Codigo\":\"1023\",\"Nome\":\"Bebidas Alcoólicas\",\"CodigoVinculo\":\"102\",\"Subgrupos\":[{\"Codigo\":\"10231\",\"Nome\":\"Cervejas\",\"CodigoVinculo\":\"1023\"},{\"Codigo\":\"10232\",\"Nome\":\"Vinhos\",\"CodigoVinculo\":\"1023\"},{\"Codigo\":\"10233\",\"Nome\":\"Destilados\",\"CodigoVinculo\":\"1023\"}]}]},{\"Codigo\":\"103\",\"Nome\":\"Higiene e Beleza\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1031\",\"Nome\":\"Higiene Pessoal\",\"CodigoVinculo\":\"103\",\"Subgrupos\":[{\"Codigo\":\"10311\",\"Nome\":\"Shampoos\",\"CodigoVinculo\":\"1031\"},{\"Codigo\":\"10312\",\"Nome\":\"Sabonetes\",\"CodigoVinculo\":\"1031\"},{\"Codigo\":\"10313\",\"Nome\":\"Desodorantes\",\"CodigoVinculo\":\"1031\"}]},{\"Codigo\":\"1032\",\"Nome\":\"Cuidados com a Pele\",\"CodigoVinculo\":\"103\",\"Subgrupos\":[{\"Codigo\":\"10321\",\"Nome\":\"Hidratantes\",\"CodigoVinculo\":\"1032\"},{\"Codigo\":\"10322\",\"Nome\":\"Protetor Solar\",\"CodigoVinculo\":\"1032\"},{\"Codigo\":\"10323\",\"Nome\":\"Cremes Anti-idade\",\"CodigoVinculo\":\"1032\"}]}]},{\"Codigo\":\"104\",\"Nome\":\"Limpeza\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1041\",\"Nome\":\"Limpeza Geral\",\"CodigoVinculo\":\"104\",\"Subgrupos\":[{\"Codigo\":\"10411\",\"Nome\":\"Detergentes\",\"CodigoVinculo\":\"1041\"},{\"Codigo\":\"10412\",\"Nome\":\"Desinfetantes\",\"CodigoVinculo\":\"1041\"},{\"Codigo\":\"10413\",\"Nome\":\"Sabão em Pó\",\"CodigoVinculo\":\"1041\"}]},{\"Codigo\":\"1042\",\"Nome\":\"Limpeza de Roupas\",\"CodigoVinculo\":\"104\",\"Subgrupos\":[{\"Codigo\":\"10421\",\"Nome\":\"Amaciantes\",\"CodigoVinculo\":\"1042\"},{\"Codigo\":\"10422\",\"Nome\":\"Sabão Líquido\",\"CodigoVinculo\":\"1042\"}]}]}]}"},{"role":"user","content":"Qual é o subgrupo correspondente ao produto: CENOURA?"}],"max_tokens":100}
2025-01-19 21:30:22.400 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:30:22.402 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:30:22.613 -03:00 [INF] Received HTTP response headers after 209.5179ms - 400
2025-01-19 21:30:22.614 -03:00 [INF] End processing HTTP request after 213.9476ms - 400
2025-01-19 21:30:22.615 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:30:22.617 -03:00 [INF] Buscando subgrupo para o produto: PERNIL SUINO
2025-01-19 21:30:22.618 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:30:22.619 -03:00 [INF] Enviando requisição ao ChatGPT com payload: {"model":"gpt-3.5-turbo","messages":[{"role":"system","content":"Você é um assistente especializado em categorização de produtos com base na estrutura mercadológica fornecida."},{"role":"user","content":"Aqui está a estrutura mercadológica:\n{\"Codigo\":\"100\",\"Nome\":\"Mercado Central\",\"Departamentos\":[{\"Codigo\":\"101\",\"Nome\":\"Alimentos\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1011\",\"Nome\":\"Frutas e Verduras\",\"CodigoVinculo\":\"101\",\"Subgrupos\":[{\"Codigo\":\"10111\",\"Nome\":\"Frutas Nacionais\",\"CodigoVinculo\":\"1011\"},{\"Codigo\":\"10112\",\"Nome\":\"Frutas Importadas\",\"CodigoVinculo\":\"1011\"},{\"Codigo\":\"10113\",\"Nome\":\"Verduras\",\"CodigoVinculo\":\"1011\"}]},{\"Codigo\":\"1012\",\"Nome\":\"Carnes e Aves\",\"CodigoVinculo\":\"101\",\"Subgrupos\":[{\"Codigo\":\"10121\",\"Nome\":\"Carnes Bovinas\",\"CodigoVinculo\":\"1012\"},{\"Codigo\":\"10122\",\"Nome\":\"Carnes Suínas\",\"CodigoVinculo\":\"1012\"},{\"Codigo\":\"10123\",\"Nome\":\"Aves\",\"CodigoVinculo\":\"1012\"}]},{\"Codigo\":\"1013\",\"Nome\":\"Congelados\",\"CodigoVinculo\":\"101\",\"Subgrupos\":[{\"Codigo\":\"10131\",\"Nome\":\"Legumes Congelados\",\"CodigoVinculo\":\"1013\"},{\"Codigo\":\"10132\",\"Nome\":\"Carnes Congeladas\",\"CodigoVinculo\":\"1013\"},{\"Codigo\":\"10133\",\"Nome\":\"Frutas Congeladas\",\"CodigoVinculo\":\"1013\"}]}]},{\"Codigo\":\"102\",\"Nome\":\"Bebidas\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1021\",\"Nome\":\"Refrigerantes\",\"CodigoVinculo\":\"102\",\"Subgrupos\":[{\"Codigo\":\"10211\",\"Nome\":\"Cola\",\"CodigoVinculo\":\"1021\"},{\"Codigo\":\"10212\",\"Nome\":\"Laranja\",\"CodigoVinculo\":\"1021\"},{\"Codigo\":\"10213\",\"Nome\":\"Guaraná\",\"CodigoVinculo\":\"1021\"}]},{\"Codigo\":\"1022\",\"Nome\":\"Águas\",\"CodigoVinculo\":\"102\",\"Subgrupos\":[{\"Codigo\":\"10221\",\"Nome\":\"Água Mineral\",\"CodigoVinculo\":\"1022\"},{\"Codigo\":\"10222\",\"Nome\":\"Água com Gás\",\"CodigoVinculo\":\"1022\"}]},{\"Codigo\":\"1023\",\"Nome\":\"Bebidas Alcoólicas\",\"CodigoVinculo\":\"102\",\"Subgrupos\":[{\"Codigo\":\"10231\",\"Nome\":\"Cervejas\",\"CodigoVinculo\":\"1023\"},{\"Codigo\":\"10232\",\"Nome\":\"Vinhos\",\"CodigoVinculo\":\"1023\"},{\"Codigo\":\"10233\",\"Nome\":\"Destilados\",\"CodigoVinculo\":\"1023\"}]}]},{\"Codigo\":\"103\",\"Nome\":\"Higiene e Beleza\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1031\",\"Nome\":\"Higiene Pessoal\",\"CodigoVinculo\":\"103\",\"Subgrupos\":[{\"Codigo\":\"10311\",\"Nome\":\"Shampoos\",\"CodigoVinculo\":\"1031\"},{\"Codigo\":\"10312\",\"Nome\":\"Sabonetes\",\"CodigoVinculo\":\"1031\"},{\"Codigo\":\"10313\",\"Nome\":\"Desodorantes\",\"CodigoVinculo\":\"1031\"}]},{\"Codigo\":\"1032\",\"Nome\":\"Cuidados com a Pele\",\"CodigoVinculo\":\"103\",\"Subgrupos\":[{\"Codigo\":\"10321\",\"Nome\":\"Hidratantes\",\"CodigoVinculo\":\"1032\"},{\"Codigo\":\"10322\",\"Nome\":\"Protetor Solar\",\"CodigoVinculo\":\"1032\"},{\"Codigo\":\"10323\",\"Nome\":\"Cremes Anti-idade\",\"CodigoVinculo\":\"1032\"}]}]},{\"Codigo\":\"104\",\"Nome\":\"Limpeza\",\"CodigoVinculo\":\"100\",\"Grupos\":[{\"Codigo\":\"1041\",\"Nome\":\"Limpeza Geral\",\"CodigoVinculo\":\"104\",\"Subgrupos\":[{\"Codigo\":\"10411\",\"Nome\":\"Detergentes\",\"CodigoVinculo\":\"1041\"},{\"Codigo\":\"10412\",\"Nome\":\"Desinfetantes\",\"CodigoVinculo\":\"1041\"},{\"Codigo\":\"10413\",\"Nome\":\"Sabão em Pó\",\"CodigoVinculo\":\"1041\"}]},{\"Codigo\":\"1042\",\"Nome\":\"Limpeza de Roupas\",\"CodigoVinculo\":\"104\",\"Subgrupos\":[{\"Codigo\":\"10421\",\"Nome\":\"Amaciantes\",\"CodigoVinculo\":\"1042\"},{\"Codigo\":\"10422\",\"Nome\":\"Sabão Líquido\",\"CodigoVinculo\":\"1042\"}]}]}]}"},{"role":"user","content":"Qual é o subgrupo correspondente ao produto: PERNIL SUINO?"}],"max_tokens":100}
2025-01-19 21:30:22.632 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:30:22.633 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:30:23.293 -03:00 [INF] Received HTTP response headers after 658.0488ms - 400
2025-01-19 21:30:23.295 -03:00 [INF] End processing HTTP request after 662.4938ms - 400
2025-01-19 21:30:23.296 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:30:23.300 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:30:23.308 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2038.105ms
2025-01-19 21:30:23.309 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:30:23.311 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2068.1314 ms
2025-01-19 21:30:23.314 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2089.0116ms
2025-01-19 21:32:32.127 -03:00 [INF] Application is shutting down...
2025-01-19 21:36:26.490 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:36:26.516 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:36:26.517 -03:00 [INF] Hosting environment: Development
2025-01-19 21:36:26.518 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:36:31.596 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:36:31.612 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:36:31.615 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:36:31.634 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:36:31.666 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 27.6029ms
2025-01-19 21:36:31.676 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:36:31.678 -03:00 [ERR] HTTP POST /produto/processar responded 500 in 65.9599 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at ProdutoController.ProcessarProdutos(List`1 produtos) in C:\Users\dioni\CategorizationAPI\Controllers\ProdutoController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-01-19 21:36:31.714 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ProdutoController.ProcessarProdutos(List`1 produtos) in C:\Users\dioni\CategorizationAPI\Controllers\ProdutoController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-19 21:36:31.729 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 500 null text/plain; charset=utf-8 134.7287ms
2025-01-19 21:36:43.774 -03:00 [INF] Application is shutting down...
2025-01-19 21:36:48.162 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:36:48.189 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:36:48.189 -03:00 [INF] Hosting environment: Development
2025-01-19 21:36:48.190 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:36:49.362 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:36:49.380 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:36:49.383 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:36:49.403 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:36:49.436 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 29.8536ms
2025-01-19 21:36:49.446 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:36:49.447 -03:00 [ERR] HTTP POST /produto/processar responded 500 in 68.1054 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at ProdutoController.ProcessarProdutos(List`1 produtos) in C:\Users\dioni\CategorizationAPI\Controllers\ProdutoController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-01-19 21:36:49.468 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ProdutoController.ProcessarProdutos(List`1 produtos) in C:\Users\dioni\CategorizationAPI\Controllers\ProdutoController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-19 21:36:49.484 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 500 null text/plain; charset=utf-8 123.2335ms
2025-01-19 21:37:04.095 -03:00 [INF] Application is shutting down...
2025-01-19 21:37:12.974 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:37:13.000 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:37:13.001 -03:00 [INF] Hosting environment: Development
2025-01-19 21:37:13.001 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:37:15.981 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:37:15.998 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:37:16.001 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:37:16.022 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:37:16.053 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 25.6751ms
2025-01-19 21:37:16.061 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:37:16.063 -03:00 [ERR] HTTP POST /produto/processar responded 500 in 65.7144 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at ProdutoController.ProcessarProdutos(List`1 produtos) in C:\Users\dioni\CategorizationAPI\Controllers\ProdutoController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-01-19 21:37:16.091 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ProdutoController.ProcessarProdutos(List`1 produtos) in C:\Users\dioni\CategorizationAPI\Controllers\ProdutoController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-19 21:37:16.107 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 500 null text/plain; charset=utf-8 126.681ms
2025-01-19 21:38:29.887 -03:00 [INF] Application is shutting down...
2025-01-19 21:38:37.835 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:38:37.860 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:38:37.861 -03:00 [INF] Hosting environment: Development
2025-01-19 21:38:37.862 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:38:40.481 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:38:40.498 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:38:40.500 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:38:40.519 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:38:40.549 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 26.1678ms
2025-01-19 21:38:40.559 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:38:40.561 -03:00 [ERR] HTTP POST /produto/processar responded 500 in 64.0836 ms
System.NullReferenceException: Object reference not set to an instance of an object.
   at ProdutoController.ProcessarProdutos(List`1 produtos) in C:\Users\dioni\CategorizationAPI\Controllers\ProdutoController.cs:line 25
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-01-19 21:38:40.603 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ProdutoController.ProcessarProdutos(List`1 produtos) in C:\Users\dioni\CategorizationAPI\Controllers\ProdutoController.cs:line 25
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-19 21:38:40.625 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 500 null text/plain; charset=utf-8 144.9854ms
2025-01-19 21:38:49.287 -03:00 [INF] Application is shutting down...
2025-01-19 21:38:53.078 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:38:53.105 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:38:53.106 -03:00 [INF] Hosting environment: Development
2025-01-19 21:38:53.106 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:40:24.991 -03:00 [INF] Application is shutting down...
2025-01-19 21:41:57.367 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:41:57.394 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:41:57.395 -03:00 [INF] Hosting environment: Development
2025-01-19 21:41:57.396 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:42:15.427 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:42:15.445 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:42:15.447 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:42:15.467 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:42:15.477 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:42:15.478 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:42:15.565 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:42:15.567 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:42:15.568 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:42:15.582 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3990 caracteres.
2025-01-19 21:42:15.588 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:42:15.591 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:42:16.472 -03:00 [INF] Received HTTP response headers after 878.6889ms - 401
2025-01-19 21:42:16.483 -03:00 [INF] End processing HTTP request after 898.5698ms - 401
2025-01-19 21:42:16.486 -03:00 [ERR] Erro na API OpenAI: Unauthorized - {
    "error": {
        "message": "You didn't provide an API key. You need to provide your API key in an Authorization header using Bearer auth (i.e. Authorization: Bearer YOUR_KEY), or as the password field (with blank username) if you're accessing the API from your browser and are prompted for a username and password. You can obtain an API key from https://platform.openai.com/account/api-keys.",
        "type": "invalid_request_error",
        "param": null,
        "code": null
    }
}

2025-01-19 21:42:16.491 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:42:16.499 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1026.7985ms
2025-01-19 21:42:16.500 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:42:16.502 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1058.1476 ms
2025-01-19 21:42:16.505 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1079.5057ms
2025-01-19 21:43:32.865 -03:00 [INF] Application is shutting down...
2025-01-19 21:43:35.795 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:43:35.821 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:43:35.822 -03:00 [INF] Hosting environment: Development
2025-01-19 21:43:35.823 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:43:40.214 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:43:40.231 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:43:40.233 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:43:40.253 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:43:40.263 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:43:40.264 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:43:40.346 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:43:40.348 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:43:40.348 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:43:40.364 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3990 caracteres.
2025-01-19 21:43:40.369 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:43:40.372 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:43:41.195 -03:00 [INF] Received HTTP response headers after 819.6332ms - 401
2025-01-19 21:43:41.203 -03:00 [INF] End processing HTTP request after 835.8577ms - 401
2025-01-19 21:43:41.205 -03:00 [ERR] Erro na API OpenAI: Unauthorized - {
    "error": {
        "message": "You didn't provide an API key. You need to provide your API key in an Authorization header using Bearer auth (i.e. Authorization: Bearer YOUR_KEY), or as the password field (with blank username) if you're accessing the API from your browser and are prompted for a username and password. You can obtain an API key from https://platform.openai.com/account/api-keys.",
        "type": "invalid_request_error",
        "param": null,
        "code": null
    }
}

2025-01-19 21:43:41.211 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:43:41.217 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 959.6417ms
2025-01-19 21:43:41.219 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:43:41.221 -03:00 [INF] HTTP POST /produto/processar responded 200 in 990.6001 ms
2025-01-19 21:43:41.225 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1011.6324ms
2025-01-19 21:46:06.702 -03:00 [INF] Application is shutting down...
2025-01-19 21:46:09.519 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:46:09.546 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:46:09.547 -03:00 [INF] Hosting environment: Development
2025-01-19 21:46:09.549 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:46:11.775 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:46:11.792 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:46:11.794 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:46:11.813 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:46:11.822 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:46:11.823 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:46:11.903 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:46:11.906 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:46:11.906 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:46:11.921 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3990 caracteres.
2025-01-19 21:46:11.926 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:46:11.929 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:46:12.853 -03:00 [INF] Received HTTP response headers after 921.5476ms - 400
2025-01-19 21:46:12.861 -03:00 [INF] End processing HTTP request after 937.551ms - 400
2025-01-19 21:46:12.864 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:46:12.868 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:46:12.875 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1058.1ms
2025-01-19 21:46:12.876 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:46:12.879 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1088.5343 ms
2025-01-19 21:46:12.882 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1108.512ms
2025-01-19 21:47:04.351 -03:00 [INF] Application is shutting down...
2025-01-19 21:47:07.167 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:47:07.193 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:47:07.194 -03:00 [INF] Hosting environment: Development
2025-01-19 21:47:07.195 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:47:10.151 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:47:10.169 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:47:10.171 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:47:10.191 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:47:10.201 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:47:10.201 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:47:10.296 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:47:10.298 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:47:10.299 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:47:10.315 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3990 caracteres.
2025-01-19 21:47:10.320 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:47:10.323 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:47:11.240 -03:00 [INF] Received HTTP response headers after 914.5799ms - 400
2025-01-19 21:47:11.248 -03:00 [INF] End processing HTTP request after 930.6467ms - 400
2025-01-19 21:47:11.251 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:47:11.255 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:47:11.262 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1066.9439ms
2025-01-19 21:47:11.264 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:47:11.267 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1098.7708 ms
2025-01-19 21:47:11.270 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1119.852ms
2025-01-19 21:49:08.454 -03:00 [INF] Application is shutting down...
2025-01-19 21:49:11.373 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:49:11.400 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:49:11.401 -03:00 [INF] Hosting environment: Development
2025-01-19 21:49:11.402 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:49:13.969 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:49:13.986 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:49:13.989 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:49:14.009 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:49:14.018 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:49:14.019 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:49:14.104 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:49:14.106 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:49:14.107 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:49:14.123 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3990 caracteres.
2025-01-19 21:49:14.128 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:49:14.130 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:49:15.046 -03:00 [INF] Received HTTP response headers after 912.8242ms - 400
2025-01-19 21:49:15.053 -03:00 [INF] End processing HTTP request after 928.3726ms - 400
2025-01-19 21:49:15.056 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:49:15.060 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:49:15.067 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1054.1058ms
2025-01-19 21:49:15.068 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:49:15.070 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1084.8120 ms
2025-01-19 21:49:15.075 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1106.7849ms
2025-01-19 21:50:28.713 -03:00 [INF] Application is shutting down...
2025-01-19 21:50:35.546 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:50:35.571 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:50:35.572 -03:00 [INF] Hosting environment: Development
2025-01-19 21:50:35.573 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:50:39.331 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:50:39.350 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:50:39.352 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:50:39.373 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:50:39.383 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:50:39.384 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:50:39.471 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:50:39.473 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:50:39.474 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:50:39.489 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3990 caracteres.
2025-01-19 21:50:39.494 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:50:39.496 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:50:40.601 -03:00 [INF] Received HTTP response headers after 1102.1832ms - 400
2025-01-19 21:50:40.609 -03:00 [INF] End processing HTTP request after 1118.2302ms - 400
2025-01-19 21:50:40.612 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:50:40.616 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:50:40.624 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1246.2474ms
2025-01-19 21:50:40.625 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:50:40.627 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1277.9845 ms
2025-01-19 21:50:40.630 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1299.9776ms
2025-01-19 21:52:59.903 -03:00 [INF] Application is shutting down...
2025-01-19 21:53:02.306 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:53:02.331 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:53:02.332 -03:00 [INF] Hosting environment: Development
2025-01-19 21:53:02.333 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:53:04.999 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:53:05.016 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:53:05.018 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:53:05.038 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:53:05.047 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:53:05.047 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:53:05.133 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:53:05.135 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:53:05.136 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:53:05.150 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3990 caracteres.
2025-01-19 21:53:05.155 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:53:05.158 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/completions
2025-01-19 21:53:06.001 -03:00 [INF] Received HTTP response headers after 840.0544ms - 400
2025-01-19 21:53:06.009 -03:00 [INF] End processing HTTP request after 856.0903ms - 400
2025-01-19 21:53:06.011 -03:00 [ERR] Erro na API OpenAI: BadRequest - {
  "error": {
    "message": "Missing required parameter: 'prompt'.",
    "type": "invalid_request_error",
    "param": "prompt",
    "code": "missing_required_parameter"
  }
}
2025-01-19 21:53:06.015 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:53:06.023 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 981.2609ms
2025-01-19 21:53:06.024 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:53:06.026 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1011.0416 ms
2025-01-19 21:53:06.029 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1031.1441ms
2025-01-19 21:54:50.261 -03:00 [INF] Application is shutting down...
2025-01-19 21:54:56.732 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:54:56.760 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:54:56.761 -03:00 [INF] Hosting environment: Development
2025-01-19 21:54:56.762 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:55:02.262 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:55:02.279 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:55:02.284 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:55:02.309 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:55:02.320 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:55:02.321 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:55:02.415 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:55:02.418 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:55:02.419 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:55:02.434 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3990 caracteres.
2025-01-19 21:55:02.439 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 21:55:02.442 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 21:55:04.067 -03:00 [INF] Received HTTP response headers after 1623.3014ms - 200
2025-01-19 21:55:04.076 -03:00 [INF] End processing HTTP request after 1639.3374ms - 200
2025-01-19 21:55:04.078 -03:00 [INF] Resposta da API OpenAI recebida com sucesso.
2025-01-19 21:55:04.136 -03:00 [ERR] Erro ao conectar com a API OpenAI: 'Newtonsoft.Json.Linq.JValue' does not contain a definition for 'Trim'
2025-01-19 21:55:04.140 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:55:04.147 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1834.4797ms
2025-01-19 21:55:04.149 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:55:04.151 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1872.5445 ms
2025-01-19 21:55:04.154 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1892.9579ms
2025-01-19 21:56:23.297 -03:00 [INF] Application is shutting down...
2025-01-19 21:56:26.164 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:56:26.192 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:56:26.194 -03:00 [INF] Hosting environment: Development
2025-01-19 21:56:26.194 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:56:27.478 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:56:27.496 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:56:27.499 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:56:27.520 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:56:27.529 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:56:27.531 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:56:27.617 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:56:27.619 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:56:27.620 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:56:27.635 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3990 caracteres.
2025-01-19 21:56:27.640 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 21:56:27.643 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 21:56:29.266 -03:00 [INF] Received HTTP response headers after 1621.2548ms - 200
2025-01-19 21:56:29.275 -03:00 [INF] End processing HTTP request after 1637.657ms - 200
2025-01-19 21:56:29.277 -03:00 [INF] Resposta da API OpenAI recebida com sucesso.
2025-01-19 21:56:29.325 -03:00 [INF] Resposta processada: Aqui estão os produtos categorizados com base na estrutura fornecida:

1. ALFACE CRESPO
   Subgrupo: Frutas Nacionais

2. CENOURA
   Subgrupo: Verduras

3. PERNIL SUÍNO
   Subgrupo: Carnes Suínas

Esses são os subgrupos correspondentes aos produtos fornecidos dentro da estrutura de categorização de produtos do Mercado Central.
2025-01-19 21:56:29.328 -03:00 [ERR] Erro ao conectar com a API OpenAI: Unexpected character encountered while parsing value: A. Path '', line 0, position 0.
2025-01-19 21:56:29.331 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:56:29.338 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1814.469ms
2025-01-19 21:56:29.339 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:56:29.343 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1847.9971 ms
2025-01-19 21:56:29.346 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1869.2722ms
2025-01-19 21:58:16.249 -03:00 [INF] Application is shutting down...
2025-01-19 21:58:19.976 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:58:20.002 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:58:20.003 -03:00 [INF] Hosting environment: Development
2025-01-19 21:58:20.003 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 21:58:25.037 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 21:58:25.055 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 21:58:25.057 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:58:25.076 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 21:58:25.087 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 21:58:25.088 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 21:58:25.178 -03:00 [INF] Processando lista de produtos.
2025-01-19 21:58:25.181 -03:00 [INF] Processando 3 produtos.
2025-01-19 21:58:25.182 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 21:58:25.197 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 4207 caracteres.
2025-01-19 21:58:25.202 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 21:58:25.205 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 21:58:26.933 -03:00 [INF] Received HTTP response headers after 1725.9182ms - 200
2025-01-19 21:58:26.941 -03:00 [INF] End processing HTTP request after 1742.0486ms - 200
2025-01-19 21:58:26.944 -03:00 [INF] Resposta da API OpenAI recebida com sucesso.
2025-01-19 21:58:26.991 -03:00 [INF] Resposta processada: {
  "produtos": [
    {
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "Frutas Nacionais"
    },
    {
      "Nome": "CENOURA",
      "Subgrupo": "Verduras"
    },
    {
      "Nome": "PERNIL SUINO",
      "Subgrupo": "Carnes Suínas"
    }
  ]
}
2025-01-19 21:58:26.996 -03:00 [ERR] Erro ao conectar com a API OpenAI: Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[Produto]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.
To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.
Path 'produtos', line 2, position 13.
2025-01-19 21:58:27.000 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 21:58:27.007 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1925.6401ms
2025-01-19 21:58:27.009 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 21:58:27.011 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1956.8277 ms
2025-01-19 21:58:27.016 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1980.4163ms
2025-01-19 21:59:48.838 -03:00 [INF] Application is shutting down...
2025-01-19 21:59:51.456 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 21:59:51.483 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 21:59:51.484 -03:00 [INF] Hosting environment: Development
2025-01-19 21:59:51.485 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:00:15.058 -03:00 [INF] Application is shutting down...
2025-01-19 22:00:18.256 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:00:18.282 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:00:18.283 -03:00 [INF] Hosting environment: Development
2025-01-19 22:00:18.284 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:00:20.621 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:00:20.637 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:00:20.640 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:00:20.659 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:00:20.669 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:00:20.670 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 22:00:20.759 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:00:20.761 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:00:20.762 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:00:20.777 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 4193 caracteres.
2025-01-19 22:00:20.782 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:00:20.785 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:00:22.369 -03:00 [INF] Received HTTP response headers after 1581.8532ms - 200
2025-01-19 22:00:22.377 -03:00 [INF] End processing HTTP request after 1598.0077ms - 200
2025-01-19 22:00:22.381 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AraRISkIKGfWk6ul2u7zaUfhDQVrp",
  "object": "chat.completion",
  "created": 1737334820,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"produtos\": [\n    {\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"Frutas Nacionais\"\n    },\n    {\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"Verduras\"\n    },\n    {\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"Carnes Suínas\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1108,
    "completion_tokens": 89,
    "total_tokens": 1197,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:00:22.435 -03:00 [INF] Resposta processada corretamente: {
  "produtos": [
    {
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "Frutas Nacionais"
    },
    {
      "Nome": "CENOURA",
      "Subgrupo": "Verduras"
    },
    {
      "Nome": "PERNIL SUINO",
      "Subgrupo": "Carnes Suínas"
    }
  ]
}
2025-01-19 22:00:22.443 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:00:22.450 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1786.1229ms
2025-01-19 22:00:22.451 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:00:22.453 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1816.5071 ms
2025-01-19 22:00:22.456 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1836.1595ms
2025-01-19 22:04:42.051 -03:00 [INF] Application is shutting down...
2025-01-19 22:05:43.624 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:05:43.650 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:05:43.651 -03:00 [INF] Hosting environment: Development
2025-01-19 22:05:43.653 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:05:47.274 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:05:47.291 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:05:47.293 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:05:47.313 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:05:47.322 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:05:47.323 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 22:05:47.414 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:05:47.417 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:05:47.417 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:05:47.432 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 3943 caracteres.
2025-01-19 22:05:47.438 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:05:47.440 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:06:03.802 -03:00 [INF] Received HTTP response headers after 16358.7841ms - 200
2025-01-19 22:06:03.810 -03:00 [INF] End processing HTTP request after 16374.8155ms - 200
2025-01-19 22:06:03.812 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AraWZmZk8Uj1CvEHnTkTPi1ZIM8Ke",
  "object": "chat.completion",
  "created": 1737335147,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "```json\n{\n  \"Codigo\": \"100\",\n  \"Nome\": \"Mercado Central\",\n  \"Departamentos\": [\n    {\n      \"Codigo\": \"101\",\n      \"Nome\": \"Alimentos\",\n      \"CodigoVinculo\": \"100\",\n      \"Grupos\": [\n        {\n          \"Codigo\": \"1011\",\n          \"Nome\": \"Frutas e Verduras\",\n          \"CodigoVinculo\": \"101\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10111\",\n              \"Nome\": \"Frutas Nacionais\",\n              \"CodigoVinculo\": \"1011\",\n              \"Subgrupo\": \"10111\"\n            },\n            {\n              \"Codigo\": \"10112\",\n              \"Nome\": \"Frutas Importadas\",\n              \"CodigoVinculo\": \"1011\",\n              \"Subgrupo\": \"10112\"\n            },\n            {\n              \"Codigo\": \"10113\",\n              \"Nome\": \"Verduras\",\n              \"CodigoVinculo\": \"1011\",\n              \"Subgrupo\": \"10113\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1012\",\n          \"Nome\": \"Carnes e Aves\",\n          \"CodigoVinculo\": \"101\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10121\",\n              \"Nome\": \"Carnes Bovinas\",\n              \"CodigoVinculo\": \"1012\",\n              \"Subgrupo\": \"10121\"\n            },\n            {\n              \"Codigo\": \"10122\",\n              \"Nome\": \"Carnes Suínas\",\n              \"CodigoVinculo\": \"1012\",\n              \"Subgrupo\": \"10122\"\n            },\n            {\n              \"Codigo\": \"10123\",\n              \"Nome\": \"Aves\",\n              \"CodigoVinculo\": \"1012\",\n              \"Subgrupo\": \"10123\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1013\",\n          \"Nome\": \"Congelados\",\n          \"CodigoVinculo\": \"101\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10131\",\n              \"Nome\": \"Legumes Congelados\",\n              \"CodigoVinculo\": \"1013\",\n              \"Subgrupo\": \"10131\"\n            },\n            {\n              \"Codigo\": \"10132\",\n              \"Nome\": \"Carnes Congeladas\",\n              \"CodigoVinculo\": \"1013\",\n              \"Subgrupo\": \"10132\"\n            },\n            {\n              \"Codigo\": \"10133\",\n              \"Nome\": \"Frutas Congeladas\",\n              \"CodigoVinculo\": \"1013\",\n              \"Subgrupo\": \"10133\"\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Codigo\": \"102\",\n      \"Nome\": \"Bebidas\",\n      \"CodigoVinculo\": \"100\",\n      \"Grupos\": [\n        {\n          \"Codigo\": \"1021\",\n          \"Nome\": \"Refrigerantes\",\n          \"CodigoVinculo\": \"102\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10211\",\n              \"Nome\": \"Cola\",\n              \"CodigoVinculo\": \"1021\",\n              \"Subgrupo\": \"10211\"\n            },\n            {\n              \"Codigo\": \"10212\",\n              \"Nome\": \"Laranja\",\n              \"CodigoVinculo\": \"1021\",\n              \"Subgrupo\": \"10212\"\n            },\n            {\n              \"Codigo\": \"10213\",\n              \"Nome\": \"Guaraná\",\n              \"CodigoVinculo\": \"1021\",\n              \"Subgrupo\": \"10213\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1022\",\n          \"Nome\": \"Águas\",\n          \"CodigoVinculo\": \"102\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10221\",\n              \"Nome\": \"Água Mineral\",\n              \"CodigoVinculo\": \"1022\",\n              \"Subgrupo\": \"10221\"\n            },\n            {\n              \"Codigo\": \"10222\",\n              \"Nome\": \"Água com Gás\",\n              \"CodigoVinculo\": \"1022\",\n              \"Subgrupo\": \"10222\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1023\",\n          \"Nome\": \"Bebidas Alcoólicas\",\n          \"CodigoVinculo\": \"102\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10231\",\n              \"Nome\": \"Cervejas\",\n              \"CodigoVinculo\": \"1023\",\n              \"Subgrupo\": \"10231\"\n            },\n            {\n              \"Codigo\": \"10232\",\n              \"Nome\": \"Vinhos\",\n              \"CodigoVinculo\": \"1023\",\n              \"Subgrupo\": \"10232\"\n            },\n            {\n              \"Codigo\": \"10233\",\n              \"Nome\": \"Destilados\",\n              \"CodigoVinculo\": \"1023\",\n              \"Subgrupo\": \"10233\"\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Codigo\": \"103\",\n      \"Nome\": \"Higiene e Beleza\",\n      \"CodigoVinculo\": \"100\",\n      \"Grupos\": [\n        {\n          \"Codigo\": \"1031\",\n          \"Nome\": \"Higiene Pessoal\",\n          \"CodigoVinculo\": \"103\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10311\",\n              \"Nome\": \"Shampoos\",\n              \"CodigoVinculo\": \"1031\",\n              \"Subgrupo\": \"10311\"\n            },\n            {\n              \"Codigo\": \"10312\",\n              \"Nome\": \"Sabonetes\",\n              \"CodigoVinculo\": \"1031\",\n              \"Subgrupo\": \"10312\"\n            },\n            {\n              \"Codigo\": \"10313\",\n              \"Nome\": \"Desodorantes\",\n              \"CodigoVinculo\": \"1031\",\n              \"Subgrupo\": \"10313\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1032\",\n          \"Nome\": \"Cuidados com a Pele\",\n          \"CodigoVinculo\": \"103\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10321\",\n              \"Nome\": \"Hidratantes\",\n              \"CodigoVinculo\": \"1032\",\n              \"Subgrupo\": \"10321\"\n            },\n            {\n              \"Codigo\": \"10322\",\n              \"Nome\": \"Protetor Solar\",\n              \"CodigoVinculo\": \"1032\",\n              \"Subgrupo\": \"10322\"\n            },\n            {\n              \"Codigo\": \"10323\",\n              \"Nome\": \"Cremes Anti-idade\",\n              \"CodigoVinculo\": \"1032\",\n              \"Subgrupo\": \"10323\"\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Codigo\": \"104\",\n      \"Nome\": \"Limpeza\",\n      \"CodigoVinculo\": \"100\",\n      \"Grupos\": [\n        {\n          \"Codigo\": \"1041\",\n          \"Nome\": \"Limpeza Geral\",\n          \"CodigoVinculo\": \"104\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10411\",\n              \"Nome\": \"Detergentes\",\n              \"CodigoVinculo\": \"1041\",\n              \"Subgrupo\": \"10411\"\n            },\n            {\n              \"Codigo\": \"10412\",\n              \"Nome\": \"Desinfetantes\",\n              \"CodigoVinculo\": \"1041\",\n              \"Subgrupo\": \"10412\"\n            },\n            {\n              \"Codigo\": \"10413\",\n              \"Nome\": \"Sabão em Pó\",\n              \"CodigoVinculo\": \"1041\",\n              \"Subgrupo\": \"10413\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1042\",\n          \"Nome\": \"Limpeza de Roupas\",\n          \"CodigoVinculo\": \"104\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10421\",\n              \"Nome\": \"Amaciantes\",\n              \"CodigoVinculo\": \"1042\",\n              \"Subgrupo\": \"10421\"\n            },\n            {\n              \"Codigo\": \"10422\",\n              \"Nome\": \"Sabão Líquido\",\n              \"CodigoVinculo\": \"1042\",\n              \"Subgrupo\": \"10422\"\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}\n```",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1032,
    "completion_tokens": 1786,
    "total_tokens": 2818,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:06:03.892 -03:00 [INF] Resposta processada corretamente: ```json
{
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011",
              "Subgrupo": "10111"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011",
              "Subgrupo": "10112"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011",
              "Subgrupo": "10113"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012",
              "Subgrupo": "10121"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012",
              "Subgrupo": "10122"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012",
              "Subgrupo": "10123"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013",
              "Subgrupo": "10131"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013",
              "Subgrupo": "10132"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013",
              "Subgrupo": "10133"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021",
              "Subgrupo": "10211"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021",
              "Subgrupo": "10212"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021",
              "Subgrupo": "10213"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022",
              "Subgrupo": "10221"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022",
              "Subgrupo": "10222"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023",
              "Subgrupo": "10231"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023",
              "Subgrupo": "10232"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023",
              "Subgrupo": "10233"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031",
              "Subgrupo": "10311"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031",
              "Subgrupo": "10312"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031",
              "Subgrupo": "10313"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032",
              "Subgrupo": "10321"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032",
              "Subgrupo": "10322"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032",
              "Subgrupo": "10323"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041",
              "Subgrupo": "10411"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041",
              "Subgrupo": "10412"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041",
              "Subgrupo": "10413"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042",
              "Subgrupo": "10421"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042",
              "Subgrupo": "10422"
            }
          ]
        }
      ]
    }
  ]
}
```
2025-01-19 22:06:03.924 -03:00 [ERR] Erro ao processar a resposta da API OpenAI: Unexpected character encountered while parsing value: `. Path '', line 0, position 0.
2025-01-19 22:06:03.928 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:06:03.935 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 16618.2801ms
2025-01-19 22:06:03.937 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:06:03.939 -03:00 [INF] HTTP POST /produto/processar responded 200 in 16648.9262 ms
2025-01-19 22:06:03.943 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 16669.8315ms
2025-01-19 22:11:18.611 -03:00 [INF] Application is shutting down...
2025-01-19 22:11:21.616 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:11:21.643 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:11:21.643 -03:00 [INF] Hosting environment: Development
2025-01-19 22:11:21.644 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:11:30.006 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:11:30.024 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:11:30.026 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:11:30.045 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:11:30.054 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:11:30.055 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 22:11:30.136 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:11:30.138 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:11:30.139 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:11:30.153 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 4086 caracteres.
2025-01-19 22:11:30.158 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:11:30.161 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:11:31.822 -03:00 [INF] Received HTTP response headers after 1658.7654ms - 200
2025-01-19 22:11:31.830 -03:00 [INF] End processing HTTP request after 1674.6306ms - 200
2025-01-19 22:11:31.833 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arac64ojOYoP21dJWf7i0muh75J6a",
  "object": "chat.completion",
  "created": 1737335490,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "```json\n[\n    {\n        \"Codigo\": 1,\n        \"Nome\": \"ALFACE CRESPO\",\n        \"Subgrupo\": \"Frutas Nacionais\"\n    },\n    {\n        \"Codigo\": 2,\n        \"Nome\": \"CENOURA\",\n        \"Subgrupo\": \"Frutas Nacionais\"\n    },\n    {\n        \"Codigo\": 3,\n        \"Nome\": \"PERNIL SUINO\",\n        \"Subgrupo\": \"Carnes Suínas\"\n    }\n]\n```",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1071,
    "completion_tokens": 108,
    "total_tokens": 1179,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:11:31.887 -03:00 [INF] Resposta processada corretamente: ```json
[
    {
        "Codigo": 1,
        "Nome": "ALFACE CRESPO",
        "Subgrupo": "Frutas Nacionais"
    },
    {
        "Codigo": 2,
        "Nome": "CENOURA",
        "Subgrupo": "Frutas Nacionais"
    },
    {
        "Codigo": 3,
        "Nome": "PERNIL SUINO",
        "Subgrupo": "Carnes Suínas"
    }
]
```
2025-01-19 22:11:31.893 -03:00 [ERR] Erro ao processar a resposta da API OpenAI: Unexpected character encountered while parsing value: `. Path '', line 0, position 0.
2025-01-19 22:11:31.896 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:11:31.905 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1855.5315ms
2025-01-19 22:11:31.906 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:11:31.908 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1885.0176 ms
2025-01-19 22:11:31.911 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1905.9613ms
2025-01-19 22:13:55.850 -03:00 [INF] Application is shutting down...
2025-01-19 22:14:03.946 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:14:03.972 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:14:03.972 -03:00 [INF] Hosting environment: Development
2025-01-19 22:14:03.973 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:14:05.989 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - application/json 4523
2025-01-19 22:14:06.007 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:14:06.009 -03:00 [INF] Executing endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 22:14:06.026 -03:00 [INF] Route matched with {action = "AtualizarDepartamentalizacao", controller = "Produto"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AtualizarDepartamentalizacao(Classe) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:14:06.035 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:14:06.036 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {"Codigo":"100","Nome":"Mercado Central","Departamentos":[{"Codigo":"101","Nome":"Alimentos","CodigoVinculo":"100","Grupos":[{"Codigo":"1011","Nome":"Frutas e Verduras","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10111","Nome":"Frutas Nacionais","CodigoVinculo":"1011"},{"Codigo":"10112","Nome":"Frutas Importadas","CodigoVinculo":"1011"},{"Codigo":"10113","Nome":"Verduras","CodigoVinculo":"1011"}]},{"Codigo":"1012","Nome":"Carnes e Aves","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10121","Nome":"Carnes Bovinas","CodigoVinculo":"1012"},{"Codigo":"10122","Nome":"Carnes Suínas","CodigoVinculo":"1012"},{"Codigo":"10123","Nome":"Aves","CodigoVinculo":"1012"}]},{"Codigo":"1013","Nome":"Congelados","CodigoVinculo":"101","Subgrupos":[{"Codigo":"10131","Nome":"Legumes Congelados","CodigoVinculo":"1013"},{"Codigo":"10132","Nome":"Carnes Congeladas","CodigoVinculo":"1013"},{"Codigo":"10133","Nome":"Frutas Congeladas","CodigoVinculo":"1013"}]}]},{"Codigo":"102","Nome":"Bebidas","CodigoVinculo":"100","Grupos":[{"Codigo":"1021","Nome":"Refrigerantes","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10211","Nome":"Cola","CodigoVinculo":"1021"},{"Codigo":"10212","Nome":"Laranja","CodigoVinculo":"1021"},{"Codigo":"10213","Nome":"Guaraná","CodigoVinculo":"1021"}]},{"Codigo":"1022","Nome":"Águas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10221","Nome":"Água Mineral","CodigoVinculo":"1022"},{"Codigo":"10222","Nome":"Água com Gás","CodigoVinculo":"1022"}]},{"Codigo":"1023","Nome":"Bebidas Alcoólicas","CodigoVinculo":"102","Subgrupos":[{"Codigo":"10231","Nome":"Cervejas","CodigoVinculo":"1023"},{"Codigo":"10232","Nome":"Vinhos","CodigoVinculo":"1023"},{"Codigo":"10233","Nome":"Destilados","CodigoVinculo":"1023"}]}]},{"Codigo":"103","Nome":"Higiene e Beleza","CodigoVinculo":"100","Grupos":[{"Codigo":"1031","Nome":"Higiene Pessoal","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10311","Nome":"Shampoos","CodigoVinculo":"1031"},{"Codigo":"10312","Nome":"Sabonetes","CodigoVinculo":"1031"},{"Codigo":"10313","Nome":"Desodorantes","CodigoVinculo":"1031"}]},{"Codigo":"1032","Nome":"Cuidados com a Pele","CodigoVinculo":"103","Subgrupos":[{"Codigo":"10321","Nome":"Hidratantes","CodigoVinculo":"1032"},{"Codigo":"10322","Nome":"Protetor Solar","CodigoVinculo":"1032"},{"Codigo":"10323","Nome":"Cremes Anti-idade","CodigoVinculo":"1032"}]}]},{"Codigo":"104","Nome":"Limpeza","CodigoVinculo":"100","Grupos":[{"Codigo":"1041","Nome":"Limpeza Geral","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10411","Nome":"Detergentes","CodigoVinculo":"1041"},{"Codigo":"10412","Nome":"Desinfetantes","CodigoVinculo":"1041"},{"Codigo":"10413","Nome":"Sabão em Pó","CodigoVinculo":"1041"}]},{"Codigo":"1042","Nome":"Limpeza de Roupas","CodigoVinculo":"104","Subgrupos":[{"Codigo":"10421","Nome":"Amaciantes","CodigoVinculo":"1042"},{"Codigo":"10422","Nome":"Sabão Líquido","CodigoVinculo":"1042"}]}]}]}
2025-01-19 22:14:06.135 -03:00 [INF] Arquivo departamentalizacao.json atualizado com sucesso.
2025-01-19 22:14:06.137 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-01-19 22:14:06.140 -03:00 [INF] Executed action ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI) in 109.5484ms
2025-01-19 22:14:06.149 -03:00 [INF] Executed endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 22:14:06.150 -03:00 [INF] HTTP POST /produto/atualizar-departamentalizacao responded 200 in 144.4928 ms
2025-01-19 22:14:06.153 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - 200 0 null 165.2253ms
2025-01-19 22:14:13.435 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:14:13.438 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:14:13.442 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:14:13.445 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:14:13.446 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:14:13.489 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:14:13.492 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:14:13.493 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:14:13.500 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7843 caracteres.
2025-01-19 22:14:13.505 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:14:13.508 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:14:15.786 -03:00 [INF] Received HTTP response headers after 2275.4393ms - 200
2025-01-19 22:14:15.788 -03:00 [INF] End processing HTTP request after 2285.8989ms - 200
2025-01-19 22:14:15.790 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AraejJO4eGlg1NunvqHHatGQaLVDR",
  "object": "chat.completion",
  "created": 1737335653,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Com base na estrutura mercadológica fornecida, vamos categorizar os produtos listados de acordo com o nome e encontrar o código do subgrupo correspondente:\n\n1. ALFACE CRESPO -> Frutas Nacionais (Subgrupo: 10111)\n2. CENOURA -> Verduras (Subgrupo: 10113)\n3. PERNIL SUINO -> Carnes Suínas (Subgrupo: 10122)\n\nAgora, preencheremos o campo 'Subgrupo' com os códigos encontrados:\n\n[{\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10111\"},\n{\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n{\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1665,
    "completion_tokens": 174,
    "total_tokens": 1839,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:14:15.840 -03:00 [INF] Resposta processada corretamente: Com base na estrutura mercadológica fornecida, vamos categorizar os produtos listados de acordo com o nome e encontrar o código do subgrupo correspondente:

1. ALFACE CRESPO -> Frutas Nacionais (Subgrupo: 10111)
2. CENOURA -> Verduras (Subgrupo: 10113)
3. PERNIL SUINO -> Carnes Suínas (Subgrupo: 10122)

Agora, preencheremos o campo 'Subgrupo' com os códigos encontrados:

[{"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10111"},
{"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
{"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"}]
2025-01-19 22:14:15.845 -03:00 [ERR] Erro ao processar a resposta da API OpenAI: Unexpected character encountered while parsing value: C. Path '', line 0, position 0.
2025-01-19 22:14:15.850 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:14:15.853 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2408.071ms
2025-01-19 22:14:15.855 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:14:15.857 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2419.3069 ms
2025-01-19 22:14:15.859 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2424.2102ms
2025-01-19 22:16:04.391 -03:00 [INF] Application is shutting down...
2025-01-19 22:16:07.486 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:16:07.512 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:16:07.513 -03:00 [INF] Hosting environment: Development
2025-01-19 22:16:07.514 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:16:09.529 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - application/json 4523
2025-01-19 22:16:09.548 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:16:09.550 -03:00 [INF] Executing endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 22:16:09.567 -03:00 [INF] Route matched with {action = "AtualizarDepartamentalizacao", controller = "Produto"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AtualizarDepartamentalizacao(Classe) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:16:09.576 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:16:09.577 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:16:09.694 -03:00 [INF] Arquivo departamentalizacao.json atualizado com sucesso.
2025-01-19 22:16:09.697 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-01-19 22:16:09.699 -03:00 [INF] Executed action ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI) in 128.4839ms
2025-01-19 22:16:09.708 -03:00 [INF] Executed endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 22:16:09.710 -03:00 [INF] HTTP POST /produto/atualizar-departamentalizacao responded 200 in 162.7762 ms
2025-01-19 22:16:09.712 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - 200 0 null 184.3721ms
2025-01-19 22:16:28.404 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:16:28.407 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:16:28.411 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:16:28.413 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:16:28.413 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:16:28.425 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:16:28.427 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:16:28.428 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:16:28.434 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7773 caracteres.
2025-01-19 22:16:28.439 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:16:28.442 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:16:30.068 -03:00 [INF] Received HTTP response headers after 1624.2955ms - 200
2025-01-19 22:16:30.070 -03:00 [INF] End processing HTTP request after 1633.3071ms - 200
2025-01-19 22:16:30.072 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AraguGsyRnQK2N0bXFdUWa5tncvwB",
  "object": "chat.completion",
  "created": 1737335788,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Aqui está a categorização dos produtos com base na estrutura fornecida:\n\n1. ALFACE CRESPO\n   - Subgrupo: Frutas Nacionais\n\n2. CENOURA\n   - Subgrupo: Verduras\n\n3. PERNIL SUINO\n   - Subgrupo: Carnes Suínas\n\nEssa é a classificação dos produtos de acordo com a estrutura mercadológica fornecida.",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1650,
    "completion_tokens": 93,
    "total_tokens": 1743,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:16:30.128 -03:00 [ERR] Falha ao localizar JSON válido na resposta.
2025-01-19 22:16:30.130 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:16:30.135 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1722.3803ms
2025-01-19 22:16:30.136 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:16:30.137 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1730.2397 ms
2025-01-19 22:16:30.139 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1734.9744ms
2025-01-19 22:16:38.036 -03:00 [INF] Application is shutting down...
2025-01-19 22:16:53.655 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:16:53.682 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:16:53.682 -03:00 [INF] Hosting environment: Development
2025-01-19 22:16:53.683 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:16:57.695 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:16:57.712 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:16:57.715 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:16:57.735 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:16:57.745 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:16:57.746 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:16:57.847 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:16:57.850 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:16:57.851 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:16:57.865 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7843 caracteres.
2025-01-19 22:16:57.870 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:16:57.873 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:16:59.555 -03:00 [INF] Received HTTP response headers after 1679.6745ms - 200
2025-01-19 22:16:59.564 -03:00 [INF] End processing HTTP request after 1696.2095ms - 200
2025-01-19 22:16:59.566 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArahNvZsu6DBvoG3ka54oM2Bxz2eX",
  "object": "chat.completion",
  "created": 1737335817,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Aqui está a categorização dos produtos com seus respectivos códigos de subgrupo de acordo com a estrutura mercadológica fornecida:\n\n1. ALFACE CRESPO - Subgrupo: 10113 (Verduras)\n2. CENOURA - Subgrupo: 10113 (Verduras)\n3. PERNIL SUINO - Subgrupo: 10122 (Carnes Suínas)\n\nPortanto, a categorização dos produtos em relação aos códigos de subgrupo é a seguinte:\n[{\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n{\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n{\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1665,
    "completion_tokens": 171,
    "total_tokens": 1836,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:16:59.629 -03:00 [INF] JSON extraído da resposta: [{"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10113"},
{"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
{"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"}]
2025-01-19 22:16:59.634 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:16:59.641 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1902.2647ms
2025-01-19 22:16:59.642 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:16:59.644 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1933.1395 ms
2025-01-19 22:16:59.648 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1953.8345ms
2025-01-19 22:22:03.161 -03:00 [INF] Application is shutting down...
2025-01-19 22:22:05.904 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:22:05.931 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:22:05.932 -03:00 [INF] Hosting environment: Development
2025-01-19 22:22:05.933 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:22:09.654 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:22:09.672 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:22:09.674 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:22:09.695 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:22:09.705 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:22:09.705 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:22:09.813 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:22:09.816 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:22:09.817 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:22:09.831 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7883 caracteres.
2025-01-19 22:22:09.836 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:22:09.839 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:22:11.310 -03:00 [INF] Received HTTP response headers after 1468.629ms - 200
2025-01-19 22:22:11.318 -03:00 [INF] End processing HTTP request after 1484.6766ms - 200
2025-01-19 22:22:11.320 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AramPSqpmd3m1hqIiP6gHCRPOhFnB",
  "object": "chat.completion",
  "created": 1737336129,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\": 1, \"Nome\": \"ALFACE CRESPO\", \"Subgrupo\": \"10113\"},\n    {\"Codigo\": 2, \"Nome\": \"CENOURA\", \"Subgrupo\": \"10113\"},\n    {\"Codigo\": 3, \"Nome\": \"PERNIL SUINO\", \"Subgrupo\": \"10122\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1675,
    "completion_tokens": 76,
    "total_tokens": 1751,
    "prompt_tokens_details": {
      "cached_tokens": 1536,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:22:11.383 -03:00 [ERR] Falha ao localizar JSON válido na resposta.
2025-01-19 22:22:11.386 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:22:11.394 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1694.5882ms
2025-01-19 22:22:11.396 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:22:11.398 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1727.1833 ms
2025-01-19 22:22:11.401 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1748.2852ms
2025-01-19 22:22:33.684 -03:00 [INF] Application is shutting down...
2025-01-19 22:22:36.166 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:22:36.192 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:22:36.193 -03:00 [INF] Hosting environment: Development
2025-01-19 22:22:36.194 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:22:37.718 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:22:37.735 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:22:37.738 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:22:37.757 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:22:37.766 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:22:37.767 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:22:37.868 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:22:37.870 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:22:37.871 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:22:37.885 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7843 caracteres.
2025-01-19 22:22:37.891 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:22:37.893 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:22:39.752 -03:00 [INF] Received HTTP response headers after 1856.0154ms - 200
2025-01-19 22:22:39.761 -03:00 [INF] End processing HTTP request after 1873.0134ms - 200
2025-01-19 22:22:39.763 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AramrpSGWh5C8b1ISR2WmqClUYIRS",
  "object": "chat.completion",
  "created": 1737336157,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Através da estrutura mercadológica fornecida, podemos categorizar os produtos da seguinte forma:\n\n1. ALFACE CRESPO - Subgrupo: 10113 (Verduras)\n2. CENOURA - Subgrupo: 10113 (Verduras)\n3. PERNIL SUÍNO - Subgrupo: 10122 (Carnes Suínas)\n\nAssim, o JSON com os produtos categorizados ficaria da seguinte forma:\n```\n[\n  {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n  {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n  {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n]\n```",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1665,
    "completion_tokens": 166,
    "total_tokens": 1831,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:22:39.826 -03:00 [ERR] Falha ao localizar JSON válido na resposta.
2025-01-19 22:22:39.829 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:22:39.836 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2074.3622ms
2025-01-19 22:22:39.838 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:22:39.840 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2105.2477 ms
2025-01-19 22:22:39.843 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2125.8735ms
2025-01-19 22:23:52.537 -03:00 [INF] Application is shutting down...
2025-01-19 22:23:55.043 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:23:55.073 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:23:55.074 -03:00 [INF] Hosting environment: Development
2025-01-19 22:23:55.075 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:23:57.632 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:23:57.650 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:23:57.653 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:23:57.673 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:23:57.683 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:23:57.684 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:23:57.805 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:23:57.808 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:23:57.809 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:23:57.823 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7946 caracteres.
2025-01-19 22:23:57.828 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:23:57.831 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:23:59.454 -03:00 [INF] Received HTTP response headers after 1620.3532ms - 200
2025-01-19 22:23:59.462 -03:00 [INF] End processing HTTP request after 1636.5713ms - 200
2025-01-19 22:23:59.465 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arao94nl28YlumSbmxFg60NiKIhLQ",
  "object": "chat.completion",
  "created": 1737336237,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1692,
    "completion_tokens": 102,
    "total_tokens": 1794,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:23:59.527 -03:00 [ERR] Falha ao localizar JSON válido na resposta.
2025-01-19 22:23:59.530 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:23:59.537 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1859.3316ms
2025-01-19 22:23:59.538 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:23:59.540 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1890.8367 ms
2025-01-19 22:23:59.543 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1912.8132ms
2025-01-19 22:25:54.917 -03:00 [INF] Application is shutting down...
2025-01-19 22:28:43.240 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:28:43.266 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:28:43.266 -03:00 [INF] Hosting environment: Development
2025-01-19 22:28:43.267 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:28:56.098 -03:00 [INF] Application is shutting down...
2025-01-19 22:28:59.398 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:28:59.424 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:28:59.425 -03:00 [INF] Hosting environment: Development
2025-01-19 22:28:59.426 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:29:06.824 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:29:06.841 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:29:06.844 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:29:06.863 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:29:06.872 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:29:06.873 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:29:06.993 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:29:06.995 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:29:06.996 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:29:07.011 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7759 caracteres.
2025-01-19 22:29:07.016 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:29:07.018 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:29:09.368 -03:00 [INF] Received HTTP response headers after 2346.9673ms - 200
2025-01-19 22:29:09.376 -03:00 [INF] End processing HTTP request after 2362.7671ms - 200
2025-01-19 22:29:09.379 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arat9hnAtCTtIgVWQIrpPfr6MGBTF",
  "object": "chat.completion",
  "created": 1737336547,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"produtos\": [\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"Verduras\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"Legumes\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"Carnes Suínas\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1648,
    "completion_tokens": 74,
    "total_tokens": 1722,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:29:09.432 -03:00 [INF] JSON bruto recebido: {
  "produtos": [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"Verduras"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"Legumes"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"Carnes Suínas"}
  ]
}
2025-01-19 22:29:09.439 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:29:09.446 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2579.3283ms
2025-01-19 22:29:09.447 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:29:09.449 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2608.8245 ms
2025-01-19 22:29:09.453 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2629.4772ms
2025-01-19 22:30:12.036 -03:00 [INF] Application is shutting down...
2025-01-19 22:30:31.302 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:30:31.328 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:30:31.330 -03:00 [INF] Hosting environment: Development
2025-01-19 22:30:31.330 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:30:34.163 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - application/json 4523
2025-01-19 22:30:34.182 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:30:34.184 -03:00 [INF] Executing endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 22:30:34.202 -03:00 [INF] Route matched with {action = "AtualizarDepartamentalizacao", controller = "Produto"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AtualizarDepartamentalizacao(Classe) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:30:34.211 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:30:34.212 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:30:34.340 -03:00 [INF] Arquivo departamentalizacao.json atualizado com sucesso.
2025-01-19 22:30:34.342 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-01-19 22:30:34.345 -03:00 [INF] Executed action ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI) in 138.6527ms
2025-01-19 22:30:34.354 -03:00 [INF] Executed endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 22:30:34.355 -03:00 [INF] HTTP POST /produto/atualizar-departamentalizacao responded 200 in 174.2660 ms
2025-01-19 22:30:34.358 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - 200 0 null 196.2205ms
2025-01-19 22:30:41.701 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:30:41.704 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:30:41.708 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:30:41.710 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:30:41.713 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:30:41.769 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:30:41.772 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:30:41.774 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:30:41.780 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7793 caracteres.
2025-01-19 22:30:41.785 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:30:41.788 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:30:43.271 -03:00 [INF] Received HTTP response headers after 1479.9257ms - 200
2025-01-19 22:30:43.272 -03:00 [INF] End processing HTTP request after 1489.9286ms - 200
2025-01-19 22:30:43.275 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-AraufRA5UBjiSW26jFUL90ZCkJuFC",
  "object": "chat.completion",
  "created": 1737336641,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n\t\"produtos\": [\n\t\t{\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n\t\t{\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n\t\t{\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n\t]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1658,
    "completion_tokens": 72,
    "total_tokens": 1730,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:30:43.325 -03:00 [INF] JSON bruto recebido: {
	"produtos": [
		{"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10113"},
		{"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
		{"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"}
	]
}
2025-01-19 22:30:43.332 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:30:43.336 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1626.2359ms
2025-01-19 22:30:43.338 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:30:43.339 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1634.8946 ms
2025-01-19 22:30:43.340 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1639.7075ms
2025-01-19 22:32:13.473 -03:00 [INF] Application is shutting down...
2025-01-19 22:32:16.030 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:32:16.057 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:32:16.058 -03:00 [INF] Hosting environment: Development
2025-01-19 22:32:16.059 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:32:17.525 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:32:17.542 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:32:17.544 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:32:17.565 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:32:17.576 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:32:17.578 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:32:17.700 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:32:17.703 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:32:17.704 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:32:17.718 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7793 caracteres.
2025-01-19 22:32:17.724 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:32:17.727 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:32:19.209 -03:00 [INF] Received HTTP response headers after 1479.4398ms - 200
2025-01-19 22:32:19.217 -03:00 [INF] End processing HTTP request after 1495.2046ms - 200
2025-01-19 22:32:19.219 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArawDe6u7lWd1cHQbUXPGd7oyBi1m",
  "object": "chat.completion",
  "created": 1737336737,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1658,
    "completion_tokens": 61,
    "total_tokens": 1719,
    "prompt_tokens_details": {
      "cached_tokens": 1536,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:32:19.277 -03:00 [ERR] Falha ao localizar JSON válido na resposta.
2025-01-19 22:32:19.281 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:32:19.289 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1718.2248ms
2025-01-19 22:32:19.290 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:32:19.292 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1751.0910 ms
2025-01-19 22:32:19.295 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1771.1658ms
2025-01-19 22:32:34.106 -03:00 [INF] Application is shutting down...
2025-01-19 22:32:53.810 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:32:53.839 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:32:53.840 -03:00 [INF] Hosting environment: Development
2025-01-19 22:32:53.841 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:32:54.814 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:32:54.830 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:32:54.833 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:32:54.852 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:32:54.861 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:32:54.862 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:32:54.963 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:32:54.966 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:32:54.967 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:32:54.982 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7793 caracteres.
2025-01-19 22:32:54.987 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:32:54.990 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:33:00.221 -03:00 [INF] Received HTTP response headers after 5228.925ms - 200
2025-01-19 22:33:00.230 -03:00 [INF] End processing HTTP request after 5245.6857ms - 200
2025-01-19 22:33:00.232 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArawszscN6FPjeGM3CVoTgAo56oa5",
  "object": "chat.completion",
  "created": 1737336778,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"produtos\": [\n    {\"Codigo\": 1, \"Nome\": \"ALFACE CRESPO\", \"Subgrupo\": \"10111\"},\n    {\"Codigo\": 2, \"Nome\": \"CENOURA\", \"Subgrupo\": \"10113\"},\n    {\"Codigo\": 3, \"Nome\": \"PERNIL SUINO\", \"Subgrupo\": \"10122\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1658,
    "completion_tokens": 84,
    "total_tokens": 1742,
    "prompt_tokens_details": {
      "cached_tokens": 1536,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:33:00.287 -03:00 [INF] JSON bruto recebido: {
  "produtos": [
    {"Codigo": 1, "Nome": "ALFACE CRESPO", "Subgrupo": "10111"},
    {"Codigo": 2, "Nome": "CENOURA", "Subgrupo": "10113"},
    {"Codigo": 3, "Nome": "PERNIL SUINO", "Subgrupo": "10122"}
  ]
}
2025-01-19 22:33:00.294 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:33:00.302 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 5445.6054ms
2025-01-19 22:33:00.304 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:33:00.306 -03:00 [INF] HTTP POST /produto/processar responded 200 in 5476.3027 ms
2025-01-19 22:33:00.309 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 5496.3773ms
2025-01-19 22:42:28.568 -03:00 [INF] Application is shutting down...
2025-01-19 22:42:31.274 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:42:31.302 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:42:31.303 -03:00 [INF] Hosting environment: Development
2025-01-19 22:42:31.304 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:42:33.183 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:42:33.201 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:42:33.203 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:42:33.224 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:42:33.233 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:42:33.234 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:42:33.346 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:42:33.348 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:42:33.349 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:42:33.364 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7793 caracteres.
2025-01-19 22:42:33.369 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:42:33.372 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:42:34.650 -03:00 [INF] Received HTTP response headers after 1276.3062ms - 200
2025-01-19 22:42:34.658 -03:00 [INF] End processing HTTP request after 1292.3356ms - 200
2025-01-19 22:42:34.661 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arb69FbTwgyJVV9zuXIYXHI8LR6o3",
  "object": "chat.completion",
  "created": 1737337353,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1658,
    "completion_tokens": 61,
    "total_tokens": 1719,
    "prompt_tokens_details": {
      "cached_tokens": 1536,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:42:34.710 -03:00 [ERR] Erro ao processar a resposta da API OpenAI: 'Newtonsoft.Json.Linq.JValue' does not contain a definition for 'Trim'
2025-01-19 22:42:34.714 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:42:34.721 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1493.3615ms
2025-01-19 22:42:34.722 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:42:34.724 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1524.3988 ms
2025-01-19 22:42:34.727 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1544.9624ms
2025-01-19 22:43:17.467 -03:00 [INF] Application is shutting down...
2025-01-19 22:43:20.765 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:43:20.793 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:43:20.794 -03:00 [INF] Hosting environment: Development
2025-01-19 22:43:20.795 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:43:22.146 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:43:22.163 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:43:22.165 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:43:22.187 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:43:22.197 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:43:22.197 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:43:22.315 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:43:22.318 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:43:22.319 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:43:22.334 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7793 caracteres.
2025-01-19 22:43:22.339 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:43:22.342 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:43:23.881 -03:00 [INF] Received HTTP response headers after 1536.7076ms - 200
2025-01-19 22:43:23.889 -03:00 [INF] End processing HTTP request after 1552.7113ms - 200
2025-01-19 22:43:23.892 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arb6waY6J5EmIk4YgmaaAC3f8swyg",
  "object": "chat.completion",
  "created": 1737337402,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n  {\n    \"Codigo\": 1,\n    \"Nome\": \"ALFACE CRESPO\",\n    \"Subgrupo\": \"10113\"\n  },\n  {\n    \"Codigo\": 2,\n    \"Nome\": \"CENOURA\",\n    \"Subgrupo\": \"10113\"\n  },\n  {\n    \"Codigo\": 3,\n    \"Nome\": \"PERNIL SUINO\",\n    \"Subgrupo\": \"10122\"\n  }\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1658,
    "completion_tokens": 94,
    "total_tokens": 1752,
    "prompt_tokens_details": {
      "cached_tokens": 1536,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:43:23.945 -03:00 [INF] JSON bruto recebido: [
  {
    "Codigo": 1,
    "Nome": "ALFACE CRESPO",
    "Subgrupo": "10113"
  },
  {
    "Codigo": 2,
    "Nome": "CENOURA",
    "Subgrupo": "10113"
  },
  {
    "Codigo": 3,
    "Nome": "PERNIL SUINO",
    "Subgrupo": "10122"
  }
]
2025-01-19 22:43:23.950 -03:00 [ERR] Falha ao localizar JSON válido na resposta.
2025-01-19 22:43:23.954 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:43:23.961 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1769.9166ms
2025-01-19 22:43:23.962 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:43:23.964 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1802.3015 ms
2025-01-19 22:43:23.967 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1822.5074ms
2025-01-19 22:44:47.430 -03:00 [INF] Application is shutting down...
2025-01-19 22:44:50.232 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:44:50.259 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:44:50.260 -03:00 [INF] Hosting environment: Development
2025-01-19 22:44:50.261 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:44:51.837 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:44:51.854 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:44:51.857 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:44:51.877 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:44:51.887 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:44:51.890 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:44:52.007 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:44:52.009 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:44:52.010 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:44:52.025 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7793 caracteres.
2025-01-19 22:44:52.030 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:44:52.033 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:44:53.265 -03:00 [INF] Received HTTP response headers after 1229.487ms - 200
2025-01-19 22:44:53.274 -03:00 [INF] End processing HTTP request after 1246.3953ms - 200
2025-01-19 22:44:53.276 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arb8Njc9zm7DbHxFEpc8xUeTz3qU3",
  "object": "chat.completion",
  "created": 1737337491,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1658,
    "completion_tokens": 61,
    "total_tokens": 1719,
    "prompt_tokens_details": {
      "cached_tokens": 1536,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:44:53.328 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"}
]
2025-01-19 22:44:53.332 -03:00 [INF] JSON processado com sucesso.
2025-01-19 22:44:53.335 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:44:53.342 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1460.3684ms
2025-01-19 22:44:53.343 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:44:53.345 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1492.2326 ms
2025-01-19 22:44:53.349 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1513.1373ms
2025-01-19 22:45:47.943 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - application/json 4607
2025-01-19 22:45:47.946 -03:00 [INF] Executing endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 22:45:47.948 -03:00 [INF] Route matched with {action = "AtualizarDepartamentalizacao", controller = "Produto"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AtualizarDepartamentalizacao(Classe) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:45:47.951 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:45:47.953 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:45:48.022 -03:00 [INF] Arquivo departamentalizacao.json atualizado com sucesso.
2025-01-19 22:45:48.024 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-01-19 22:45:48.025 -03:00 [INF] Executed action ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI) in 74.4639ms
2025-01-19 22:45:48.026 -03:00 [INF] Executed endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 22:45:48.027 -03:00 [INF] HTTP POST /produto/atualizar-departamentalizacao responded 200 in 81.5571 ms
2025-01-19 22:45:48.030 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - 200 0 null 87.6636ms
2025-01-19 22:46:15.335 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 222
2025-01-19 22:46:15.337 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:46:15.338 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:46:15.341 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:46:15.342 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:46:15.377 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:46:15.378 -03:00 [INF] Processando 4 produtos.
2025-01-19 22:46:15.379 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:46:15.380 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8009 caracteres.
2025-01-19 22:46:15.381 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:46:15.382 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:46:16.982 -03:00 [INF] Received HTTP response headers after 1599.0745ms - 200
2025-01-19 22:46:16.983 -03:00 [INF] End processing HTTP request after 1602.0343ms - 200
2025-01-19 22:46:16.984 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arb9jbdld97zzvWDMwRbEZzO24mvk",
  "object": "chat.completion",
  "created": 1737337575,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"IGO\",\"Subgrupo\":\"10213\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1704,
    "completion_tokens": 77,
    "total_tokens": 1781,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:46:16.989 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"IGO","Subgrupo":"10213"}
]
2025-01-19 22:46:16.992 -03:00 [INF] JSON processado com sucesso.
2025-01-19 22:46:16.993 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:46:16.996 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1654.7943ms
2025-01-19 22:46:16.997 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:46:16.998 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1660.1789 ms
2025-01-19 22:46:16.999 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1664.1343ms
2025-01-19 22:47:13.157 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 227
2025-01-19 22:47:13.159 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:47:13.160 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:47:13.163 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:47:13.164 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:47:13.211 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:47:13.211 -03:00 [INF] Processando 4 produtos.
2025-01-19 22:47:13.214 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:47:13.219 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8014 caracteres.
2025-01-19 22:47:13.220 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:47:13.221 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:47:14.585 -03:00 [INF] Received HTTP response headers after 1362.556ms - 200
2025-01-19 22:47:14.586 -03:00 [INF] End processing HTTP request after 1365.7726ms - 200
2025-01-19 22:47:14.587 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbAeb6NKpmRJxoNwfDrYKe2btS1V",
  "object": "chat.completion",
  "created": 1737337632,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"items\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"10211\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1706,
    "completion_tokens": 130,
    "total_tokens": 1836,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:47:14.592 -03:00 [INF] JSON bruto recebido: {
  "items": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "10211"
    }
  ]
}
2025-01-19 22:47:14.597 -03:00 [ERR] Erro ao desserializar JSON: Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[Produto]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.
To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.
Path 'items', line 2, position 10.
2025-01-19 22:47:14.598 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:47:14.601 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1438.5965ms
2025-01-19 22:47:14.602 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:47:14.603 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1444.3280 ms
2025-01-19 22:47:14.605 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1448.1497ms
2025-01-19 22:47:22.937 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 231
2025-01-19 22:47:22.939 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:47:22.940 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:47:22.943 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:47:22.944 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:47:22.984 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:47:22.985 -03:00 [INF] Processando 4 produtos.
2025-01-19 22:47:22.986 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:47:22.987 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8018 caracteres.
2025-01-19 22:47:22.988 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:47:22.989 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:47:24.384 -03:00 [INF] Received HTTP response headers after 1394.3645ms - 200
2025-01-19 22:47:24.385 -03:00 [INF] End processing HTTP request after 1397.4172ms - 200
2025-01-19 22:47:24.386 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbAohb2s0TXYIhBvtGFKTzycLkOb",
  "object": "chat.completion",
  "created": 1737337642,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"itens\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"IGO ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1707,
    "completion_tokens": 132,
    "total_tokens": 1839,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:47:24.391 -03:00 [INF] JSON bruto recebido: {
  "itens": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "IGO ENLATADO",
      "Subgrupo": "242424"
    }
  ]
}
2025-01-19 22:47:24.395 -03:00 [ERR] Erro ao desserializar JSON: Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[Produto]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.
To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.
Path 'itens', line 2, position 10.
2025-01-19 22:47:24.399 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:47:24.400 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1457.4903ms
2025-01-19 22:47:24.401 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:47:24.402 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1463.1365 ms
2025-01-19 22:47:24.404 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1467.0294ms
2025-01-19 22:47:43.508 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:47:43.510 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:47:43.511 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:47:43.513 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:47:43.513 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:47:43.550 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:47:43.550 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:47:43.551 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:47:43.553 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7959 caracteres.
2025-01-19 22:47:43.554 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:47:43.555 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:47:44.421 -03:00 [INF] Received HTTP response headers after 864.324ms - 200
2025-01-19 22:47:44.422 -03:00 [INF] End processing HTTP request after 867.452ms - 200
2025-01-19 22:47:44.425 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbB9P2shbuik2aE1abKDtCbU2TFr",
  "object": "chat.completion",
  "created": 1737337663,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"produtos\": [\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1692,
    "completion_tokens": 69,
    "total_tokens": 1761,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:47:44.431 -03:00 [INF] JSON bruto recebido: {
  "produtos": [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"}
  ]
}
2025-01-19 22:47:44.434 -03:00 [ERR] Erro ao desserializar JSON: Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[Produto]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.
To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.
Path 'produtos', line 2, position 13.
2025-01-19 22:47:44.436 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:47:44.437 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 925.0672ms
2025-01-19 22:47:44.439 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:47:44.440 -03:00 [INF] HTTP POST /produto/processar responded 200 in 930.0089 ms
2025-01-19 22:47:44.442 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 933.3653ms
2025-01-19 22:48:00.465 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:48:00.467 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:48:00.468 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:48:00.470 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:48:00.472 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:48:00.519 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:48:00.520 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:48:00.521 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:48:00.522 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7959 caracteres.
2025-01-19 22:48:00.523 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:48:00.525 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:48:01.574 -03:00 [INF] Received HTTP response headers after 1047.4975ms - 200
2025-01-19 22:48:01.575 -03:00 [INF] End processing HTTP request after 1052.6656ms - 200
2025-01-19 22:48:01.577 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbBPKdY59hQYJ9ABg09C1XYm0NrT",
  "object": "chat.completion",
  "created": 1737337679,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1692,
    "completion_tokens": 102,
    "total_tokens": 1794,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:48:01.581 -03:00 [INF] JSON bruto recebido: {
  "produtos": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    }
  ]
}
2025-01-19 22:48:01.584 -03:00 [ERR] Erro ao desserializar JSON: Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[Produto]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.
To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.
Path 'produtos', line 2, position 13.
2025-01-19 22:48:01.587 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:48:01.589 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1118.8475ms
2025-01-19 22:48:01.590 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:48:01.591 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1123.3880 ms
2025-01-19 22:48:01.592 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1126.7532ms
2025-01-19 22:48:35.391 -03:00 [INF] Application is shutting down...
2025-01-19 22:48:38.048 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:48:38.075 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:48:38.076 -03:00 [INF] Hosting environment: Development
2025-01-19 22:48:38.077 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:48:39.149 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 173
2025-01-19 22:48:39.165 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:48:39.167 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:48:39.187 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:48:39.196 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:48:39.205 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:48:39.332 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:48:39.335 -03:00 [INF] Processando 3 produtos.
2025-01-19 22:48:39.335 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:48:39.350 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 7959 caracteres.
2025-01-19 22:48:39.355 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:48:39.359 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:48:41.605 -03:00 [INF] Received HTTP response headers after 2243.4467ms - 200
2025-01-19 22:48:41.613 -03:00 [INF] End processing HTTP request after 2260.2091ms - 200
2025-01-19 22:48:41.620 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbC3j4R3PGexAkOub0DdjVPf5jKY",
  "object": "chat.completion",
  "created": 1737337719,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n  {\n    \"Codigo\": 1,\n    \"Nome\": \"ALFACE CRESPO\",\n    \"Subgrupo\": \"10111\"\n  },\n  {\n    \"Codigo\": 2,\n    \"Nome\": \"CENOURA\",\n    \"Subgrupo\": \"10113\"\n  },\n  {\n    \"Codigo\": 3,\n    \"Nome\": \"PERNIL SUINO\",\n    \"Subgrupo\": \"10122\"\n  }\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1692,
    "completion_tokens": 94,
    "total_tokens": 1786,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:48:41.672 -03:00 [INF] JSON bruto recebido: [
  {
    "Codigo": 1,
    "Nome": "ALFACE CRESPO",
    "Subgrupo": "10111"
  },
  {
    "Codigo": 2,
    "Nome": "CENOURA",
    "Subgrupo": "10113"
  },
  {
    "Codigo": 3,
    "Nome": "PERNIL SUINO",
    "Subgrupo": "10122"
  }
]
2025-01-19 22:48:41.677 -03:00 [INF] JSON processado com sucesso.
2025-01-19 22:48:41.680 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:48:41.687 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2496.2271ms
2025-01-19 22:48:41.689 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:48:41.691 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2526.5360 ms
2025-01-19 22:48:41.694 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2546.3553ms
2025-01-19 22:49:05.930 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 227
2025-01-19 22:49:05.933 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:49:05.934 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:49:05.937 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:49:05.938 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:49:05.987 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:49:05.988 -03:00 [INF] Processando 4 produtos.
2025-01-19 22:49:05.991 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:49:05.997 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8014 caracteres.
2025-01-19 22:49:05.998 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:49:05.999 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:49:07.543 -03:00 [INF] Received HTTP response headers after 1542.3976ms - 200
2025-01-19 22:49:07.544 -03:00 [INF] End processing HTTP request after 1545.6146ms - 200
2025-01-19 22:49:07.545 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbCTrF6aHP6XmaKLzDhdDCHv2OrH",
  "object": "chat.completion",
  "created": 1737337745,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1706,
    "completion_tokens": 131,
    "total_tokens": 1837,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:49:07.550 -03:00 [INF] JSON bruto recebido: {
  "Produtos": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    }
  ]
}
2025-01-19 22:49:07.555 -03:00 [ERR] Erro ao desserializar JSON: Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[Produto]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.
To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.
Path 'Produtos', line 2, position 13.
2025-01-19 22:49:07.559 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:49:07.561 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1624.4258ms
2025-01-19 22:49:07.562 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:49:07.563 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1629.8991 ms
2025-01-19 22:49:07.564 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1634.4546ms
2025-01-19 22:51:07.815 -03:00 [INF] Application is shutting down...
2025-01-19 22:51:18.978 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:51:19.005 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:51:19.006 -03:00 [INF] Hosting environment: Development
2025-01-19 22:51:19.007 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:51:21.121 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 227
2025-01-19 22:51:21.139 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:51:21.141 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:51:21.161 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:51:21.171 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:51:21.172 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:51:21.287 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:51:21.290 -03:00 [INF] Processando 4 produtos.
2025-01-19 22:51:21.291 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:51:21.306 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8104 caracteres.
2025-01-19 22:51:21.311 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:51:21.313 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:51:22.774 -03:00 [INF] Received HTTP response headers after 1457.9924ms - 200
2025-01-19 22:51:22.782 -03:00 [INF] End processing HTTP request after 1474.2061ms - 200
2025-01-19 22:51:22.784 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbEfKPGM8E9fTdGY2RDM3kA8dGJo",
  "object": "chat.completion",
  "created": 1737337881,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1730,
    "completion_tokens": 71,
    "total_tokens": 1801,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:51:22.836 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":""},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":""},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":""},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":""}
]
2025-01-19 22:51:22.841 -03:00 [INF] JSON processado com sucesso.
2025-01-19 22:51:22.844 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:51:22.851 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1685.1969ms
2025-01-19 22:51:22.852 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:51:22.854 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1716.6749 ms
2025-01-19 22:51:22.857 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1737.5197ms
2025-01-19 22:52:28.131 -03:00 [INF] Application is shutting down...
2025-01-19 22:52:30.934 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:52:30.961 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:52:30.962 -03:00 [INF] Hosting environment: Development
2025-01-19 22:52:30.963 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:52:31.967 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 227
2025-01-19 22:52:31.984 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:52:31.987 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:52:32.009 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:52:32.018 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:52:32.019 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:52:32.129 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:52:32.131 -03:00 [INF] Processando 4 produtos.
2025-01-19 22:52:32.132 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:52:32.147 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8071 caracteres.
2025-01-19 22:52:32.152 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:52:32.155 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:52:33.811 -03:00 [INF] Received HTTP response headers after 1653.1882ms - 200
2025-01-19 22:52:33.819 -03:00 [INF] End processing HTTP request after 1669.4813ms - 200
2025-01-19 22:52:33.821 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbFnXKU04e1SMzDoh3wdcSvK7Hi4",
  "object": "chat.completion",
  "created": 1737337951,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1720,
    "completion_tokens": 131,
    "total_tokens": 1851,
    "prompt_tokens_details": {
      "cached_tokens": 1536,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:52:33.875 -03:00 [INF] JSON bruto recebido: {
  "Produtos": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    }
  ]
}
2025-01-19 22:52:33.881 -03:00 [ERR] Erro ao desserializar JSON: Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[Produto]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.
To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List<T>) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.
Path 'Produtos', line 2, position 13.
2025-01-19 22:52:33.885 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:52:33.893 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1879.7291ms
2025-01-19 22:52:33.894 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:52:33.896 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1912.6613 ms
2025-01-19 22:52:33.899 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1933.1688ms
2025-01-19 22:56:33.461 -03:00 [INF] Application is shutting down...
2025-01-19 22:56:36.123 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 22:56:36.151 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 22:56:36.152 -03:00 [INF] Hosting environment: Development
2025-01-19 22:56:36.153 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 22:56:39.464 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 227
2025-01-19 22:56:39.481 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 22:56:39.484 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:56:39.504 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 22:56:39.513 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 22:56:39.514 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 22:56:39.601 -03:00 [INF] Processando lista de produtos.
2025-01-19 22:56:39.604 -03:00 [INF] Processando 4 produtos.
2025-01-19 22:56:39.604 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 22:56:39.620 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8071 caracteres.
2025-01-19 22:56:39.625 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:56:39.628 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 22:56:42.507 -03:00 [INF] Received HTTP response headers after 2876.9435ms - 200
2025-01-19 22:56:42.515 -03:00 [INF] End processing HTTP request after 2892.8418ms - 200
2025-01-19 22:56:42.517 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbJoDmG4VROKiTPUnApBootBL6XJ",
  "object": "chat.completion",
  "created": 1737338200,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n\t\"Produtos\": [{\n\t\t\t\"Codigo\": 1,\n\t\t\t\"Nome\": \"ALFACE CRESPO\",\n\t\t\t\"Subgrupo\": \"\"\n\t\t},\n\t\t{\n\t\t\t\"Codigo\": 2,\n\t\t\t\"Nome\": \"CENOURA\",\n\t\t\t\"Subgrupo\": \"\"\n\t\t},\n\t\t{\n\t\t\t\"Codigo\": 3,\n\t\t\t\"Nome\": \"PERNIL SUINO\",\n\t\t\t\"Subgrupo\": \"\"\n\t\t},\n\t\t{\n\t\t\t\"Codigo\": 4,\n\t\t\t\"Nome\": \"ENLATADO\",\n\t\t\t\"Subgrupo\": \"\"\n\t\t}\n\t]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1720,
    "completion_tokens": 136,
    "total_tokens": 1856,
    "prompt_tokens_details": {
      "cached_tokens": 1536,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 22:56:42.569 -03:00 [INF] JSON bruto recebido: {
	"Produtos": [{
			"Codigo": 1,
			"Nome": "ALFACE CRESPO",
			"Subgrupo": ""
		},
		{
			"Codigo": 2,
			"Nome": "CENOURA",
			"Subgrupo": ""
		},
		{
			"Codigo": 3,
			"Nome": "PERNIL SUINO",
			"Subgrupo": ""
		},
		{
			"Codigo": 4,
			"Nome": "ENLATADO",
			"Subgrupo": ""
		}
	]
}
2025-01-19 22:56:42.572 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-19 22:56:42.576 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Produtos'.
2025-01-19 22:56:42.579 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 22:56:42.587 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 3078.8702ms
2025-01-19 22:56:42.588 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 22:56:42.590 -03:00 [INF] HTTP POST /produto/processar responded 200 in 3110.1764 ms
2025-01-19 22:56:42.593 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 3130.2452ms
2025-01-19 23:00:23.225 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 227
2025-01-19 23:00:23.229 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:00:23.229 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 23:00:23.231 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 23:00:23.232 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 23:00:23.241 -03:00 [INF] Processando lista de produtos.
2025-01-19 23:00:23.241 -03:00 [INF] Processando 4 produtos.
2025-01-19 23:00:23.242 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 23:00:23.248 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8071 caracteres.
2025-01-19 23:00:23.249 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:00:23.249 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:00:25.100 -03:00 [INF] Received HTTP response headers after 1849.7259ms - 200
2025-01-19 23:00:25.101 -03:00 [INF] End processing HTTP request after 1852.4154ms - 200
2025-01-19 23:00:25.102 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbNOUBnaTQlwP3zDl10PEq15VEbW",
  "object": "chat.completion",
  "created": 1737338422,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"items\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1720,
    "completion_tokens": 130,
    "total_tokens": 1850,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 23:00:25.104 -03:00 [INF] JSON bruto recebido: {
  "items": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    }
  ]
}
2025-01-19 23:00:25.105 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-19 23:00:25.106 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'items'.
2025-01-19 23:00:25.106 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 23:00:25.108 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1876.9851ms
2025-01-19 23:00:25.109 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:00:25.109 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1880.8521 ms
2025-01-19 23:00:25.111 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1886.3421ms
2025-01-19 23:02:01.057 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-19 23:02:01.060 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:02:01.061 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 23:02:01.062 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 23:02:01.063 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 23:02:01.072 -03:00 [INF] Processando lista de produtos.
2025-01-19 23:02:01.072 -03:00 [INF] Processando 5 produtos.
2025-01-19 23:02:01.073 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 23:02:01.074 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8133 caracteres.
2025-01-19 23:02:01.074 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:02:01.075 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:02:02.276 -03:00 [INF] Received HTTP response headers after 1200.1029ms - 200
2025-01-19 23:02:02.277 -03:00 [INF] End processing HTTP request after 1202.875ms - 200
2025-01-19 23:02:02.278 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbOygG7IdyLAvgKV1Rul8QqSLAWw",
  "object": "chat.completion",
  "created": 1737338520,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"PAPEL HIGIENICO\",\"Subgrupo\":\"\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1739,
    "completion_tokens": 100,
    "total_tokens": 1839,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 23:02:02.280 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"PAPEL HIGIENICO","Subgrupo":""}
]
2025-01-19 23:02:02.282 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-19 23:02:02.282 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 23:02:02.283 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1221.5358ms
2025-01-19 23:02:02.284 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:02:02.285 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1225.3252 ms
2025-01-19 23:02:02.286 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1228.9403ms
2025-01-19 23:03:06.122 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - application/json 4607
2025-01-19 23:03:06.123 -03:00 [INF] Executing endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 23:03:06.126 -03:00 [INF] Route matched with {action = "AtualizarDepartamentalizacao", controller = "Produto"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AtualizarDepartamentalizacao(Classe) on controller ProdutoController (CategorizationAPI).
2025-01-19 23:03:06.127 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 23:03:06.134 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
            ,
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 23:03:06.152 -03:00 [INF] Arquivo departamentalizacao.json atualizado com sucesso.
2025-01-19 23:03:06.154 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-01-19 23:03:06.154 -03:00 [INF] Executed action ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI) in 27.1269ms
2025-01-19 23:03:06.155 -03:00 [INF] Executed endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-19 23:03:06.156 -03:00 [INF] HTTP POST /produto/atualizar-departamentalizacao responded 200 in 32.3201 ms
2025-01-19 23:03:06.157 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - 200 0 null 35.3426ms
2025-01-19 23:03:29.666 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-19 23:03:29.668 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:03:29.669 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 23:03:29.670 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 23:03:29.672 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 23:03:29.681 -03:00 [INF] Processando lista de produtos.
2025-01-19 23:03:29.681 -03:00 [INF] Processando 5 produtos.
2025-01-19 23:03:29.682 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 23:03:29.683 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8294 caracteres.
2025-01-19 23:03:29.683 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:03:29.684 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:03:32.741 -03:00 [INF] Received HTTP response headers after 3055.6369ms - 200
2025-01-19 23:03:32.742 -03:00 [INF] End processing HTTP request after 3058.2292ms - 200
2025-01-19 23:03:32.742 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArbQQlnwEQqEhtT5mS5I0bK4178s5",
  "object": "chat.completion",
  "created": 1737338610,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"PAPEL HIGIENICO\",\n      \"Subgrupo\": \"131313\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1771,
    "completion_tokens": 165,
    "total_tokens": 1936,
    "prompt_tokens_details": {
      "cached_tokens": 1152,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 23:03:32.744 -03:00 [INF] JSON bruto recebido: {
  "Produtos": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "PAPEL HIGIENICO",
      "Subgrupo": "131313"
    }
  ]
}
2025-01-19 23:03:32.746 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-19 23:03:32.746 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Produtos'.
2025-01-19 23:03:32.747 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 23:03:32.748 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 3077.8063ms
2025-01-19 23:03:32.749 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:03:32.750 -03:00 [INF] HTTP POST /produto/processar responded 200 in 3081.5343 ms
2025-01-19 23:03:32.751 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 3084.5968ms
2025-01-19 23:36:09.143 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-19 23:36:09.145 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:36:09.146 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 23:36:09.147 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 23:36:09.152 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 23:36:09.161 -03:00 [INF] Processando lista de produtos.
2025-01-19 23:36:09.161 -03:00 [INF] Processando 5 produtos.
2025-01-19 23:36:09.162 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 23:36:09.163 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8294 caracteres.
2025-01-19 23:36:09.163 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:36:09.164 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:36:11.109 -03:00 [INF] Received HTTP response headers after 1943.8562ms - 200
2025-01-19 23:36:11.110 -03:00 [INF] End processing HTTP request after 1946.6361ms - 200
2025-01-19 23:36:11.111 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arbw1HMxZ5I2CxT7tRtUwpCvs8Tjv",
  "object": "chat.completion",
  "created": 1737340569,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"},\n    {\"Codigo\":5,\"Nome\":\"PAPEL HIGIENICO\",\"Subgrupo\":\"131313\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1771,
    "completion_tokens": 102,
    "total_tokens": 1873,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 23:36:11.113 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"},
    {"Codigo":5,"Nome":"PAPEL HIGIENICO","Subgrupo":"131313"}
]
2025-01-19 23:36:11.114 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-19 23:36:11.115 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 23:36:11.116 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1968.7903ms
2025-01-19 23:36:11.117 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:36:11.118 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1972.4283 ms
2025-01-19 23:36:11.119 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1975.5801ms
2025-01-19 23:38:10.749 -03:00 [INF] Application is shutting down...
2025-01-19 23:38:15.719 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-19 23:38:15.745 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-19 23:38:15.746 -03:00 [INF] Hosting environment: Development
2025-01-19 23:38:15.746 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-19 23:38:17.274 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-19 23:38:17.292 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-19 23:38:17.294 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:38:17.314 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-19 23:38:17.323 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-19 23:38:17.323 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-19 23:38:17.406 -03:00 [INF] Processando lista de produtos.
2025-01-19 23:38:17.408 -03:00 [INF] Processando 5 produtos.
2025-01-19 23:38:17.409 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-19 23:38:17.424 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8326 caracteres.
2025-01-19 23:38:17.429 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:38:17.431 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-19 23:38:19.469 -03:00 [INF] Received HTTP response headers after 2035.0297ms - 200
2025-01-19 23:38:19.477 -03:00 [INF] End processing HTTP request after 2050.8552ms - 200
2025-01-19 23:38:19.479 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arby5A6RqxCpq55jdeOSnv67j9DOf",
  "object": "chat.completion",
  "created": 1737340697,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10123\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"PAPEL HIGIENICO\",\n      \"Subgrupo\": \"\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1783,
    "completion_tokens": 162,
    "total_tokens": 1945,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-19 23:38:19.528 -03:00 [INF] JSON bruto recebido: {
  "Produtos": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10123"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "PAPEL HIGIENICO",
      "Subgrupo": ""
    }
  ]
}
2025-01-19 23:38:19.531 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-19 23:38:19.535 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Produtos'.
2025-01-19 23:38:19.538 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-19 23:38:19.544 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2227.0657ms
2025-01-19 23:38:19.545 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-19 23:38:19.548 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2256.6684 ms
2025-01-19 23:38:19.552 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2279.1755ms
