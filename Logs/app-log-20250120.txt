2025-01-20 08:04:03.997 -03:00 [WRN] As of ""2025-01-20T11:04:03.5002439+00:00"", the heartbeat has been running for ""01:56:25.7248297"" which is longer than ""00:00:01"". This could be caused by thread pool starvation.
2025-01-20 08:45:01.229 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 08:45:01.233 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 08:45:01.234 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 08:45:01.236 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 08:45:01.246 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 08:45:01.258 -03:00 [INF] Processando lista de produtos.
2025-01-20 08:45:01.258 -03:00 [INF] Processando 5 produtos.
2025-01-20 08:45:01.259 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 08:45:01.265 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8326 caracteres.
2025-01-20 08:45:01.265 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 08:45:01.266 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 08:45:03.856 -03:00 [INF] Received HTTP response headers after 2588.5887ms - 200
2025-01-20 08:45:03.857 -03:00 [INF] End processing HTTP request after 2591.8702ms - 200
2025-01-20 08:45:03.858 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArkVBSvH4EfSi8ABIEZyYJVQSTUhe",
  "object": "chat.completion",
  "created": 1737373501,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Itens\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"PAPEL HIGIENICO\",\n      \"Subgrupo\": \"\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1783,
    "completion_tokens": 159,
    "total_tokens": 1942,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 08:45:03.861 -03:00 [INF] JSON bruto recebido: {
  "Itens": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": ""
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "PAPEL HIGIENICO",
      "Subgrupo": ""
    }
  ]
}
2025-01-20 08:45:03.863 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 08:45:03.863 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Itens'.
2025-01-20 08:45:03.864 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 08:45:03.866 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2630.3783ms
2025-01-20 08:45:03.867 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 08:45:03.868 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2635.2349 ms
2025-01-20 08:45:03.869 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2640.2715ms
2025-01-20 11:19:23.711 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 11:19:23.716 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:19:23.717 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 11:19:23.719 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 11:19:23.721 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 11:19:23.729 -03:00 [INF] Processando lista de produtos.
2025-01-20 11:19:23.730 -03:00 [INF] Processando 5 produtos.
2025-01-20 11:19:23.731 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 11:19:23.731 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8326 caracteres.
2025-01-20 11:19:23.732 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:19:23.733 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:19:26.161 -03:00 [INF] Received HTTP response headers after 2427.5171ms - 200
2025-01-20 11:19:26.163 -03:00 [INF] End processing HTTP request after 2430.5118ms - 200
2025-01-20 11:19:26.163 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArmuZag60FdbsOSJqAR3NWPEeDQKf",
  "object": "chat.completion",
  "created": 1737382763,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"produtos\": [\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"PAPEL HIGIENICO\",\"Subgrupo\":\"1031\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1783,
    "completion_tokens": 110,
    "total_tokens": 1893,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 11:19:26.166 -03:00 [INF] JSON bruto recebido: {
  "produtos": [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"PAPEL HIGIENICO","Subgrupo":"1031"}
  ]
}
2025-01-20 11:19:26.170 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 11:19:26.171 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'produtos'.
2025-01-20 11:19:26.172 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 11:19:26.175 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2456.0903ms
2025-01-20 11:19:26.176 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:19:26.176 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2460.6749 ms
2025-01-20 11:19:26.178 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2467.0198ms
2025-01-20 11:20:14.834 -03:00 [INF] Application is shutting down...
2025-01-20 11:20:20.140 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-20 11:20:20.169 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 11:20:20.170 -03:00 [INF] Hosting environment: Development
2025-01-20 11:20:20.170 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-20 11:20:20.992 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 11:20:21.009 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 11:20:21.012 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:20:21.035 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 11:20:21.044 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 11:20:21.044 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 11:20:21.124 -03:00 [INF] Processando lista de produtos.
2025-01-20 11:20:21.127 -03:00 [INF] Processando 5 produtos.
2025-01-20 11:20:21.127 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 11:20:21.142 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8359 caracteres.
2025-01-20 11:20:21.147 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:20:21.151 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:20:23.340 -03:00 [INF] Received HTTP response headers after 2186.5414ms - 200
2025-01-20 11:20:23.348 -03:00 [INF] End processing HTTP request after 2203.1972ms - 200
2025-01-20 11:20:23.350 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArmvUEZ0709VsJquBCfzLB8MMe481",
  "object": "chat.completion",
  "created": 1737382820,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"itens\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"PAPEL HIGIENICO\",\n      \"Subgrupo\": \"\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1794,
    "completion_tokens": 156,
    "total_tokens": 1950,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 11:20:23.400 -03:00 [INF] JSON bruto recebido: {
  "itens": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": ""
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": ""
    },
    {
      "Codigo": 5,
      "Nome": "PAPEL HIGIENICO",
      "Subgrupo": ""
    }
  ]
}
2025-01-20 11:20:23.404 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 11:20:23.407 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'itens'.
2025-01-20 11:20:23.410 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 11:20:23.417 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2379.1315ms
2025-01-20 11:20:23.418 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:20:23.420 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2412.1307 ms
2025-01-20 11:20:23.424 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2433.4622ms
2025-01-20 11:21:57.932 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 11:21:57.935 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:21:57.935 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 11:21:57.937 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 11:21:57.938 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 11:21:57.947 -03:00 [INF] Processando lista de produtos.
2025-01-20 11:21:57.948 -03:00 [INF] Processando 5 produtos.
2025-01-20 11:21:57.949 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 11:21:57.955 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8359 caracteres.
2025-01-20 11:21:57.955 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:21:57.957 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:21:59.809 -03:00 [INF] Received HTTP response headers after 1850.9492ms - 200
2025-01-20 11:21:59.810 -03:00 [INF] End processing HTTP request after 1855.1796ms - 200
2025-01-20 11:21:59.811 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Armx3OPYUMY5FfVBQZgiLLCtkL98Q",
  "object": "chat.completion",
  "created": 1737382917,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Codigo\": 1,\n  \"Nome\": \"ALFACE CRESPO\",\n  \"Subgrupo\": \"10113\"\n},\n{\n  \"Codigo\": 2,\n  \"Nome\": \"CENOURA\",\n  \"Subgrupo\": \"10113\"\n},\n{\n  \"Codigo\": 3,\n  \"Nome\": \"PERNIL SUINO\",\n  \"Subgrupo\": \"10122\"\n},\n{\n  \"Codigo\": 4,\n  \"Nome\": \"ENLATADO\",\n  \"Subgrupo\": \"242424\"\n},\n{\n  \"Codigo\": 5,\n  \"Nome\": \"PAPEL HIGIENICO\",\n  \"Subgrupo\": \"\"\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1794,
    "completion_tokens": 142,
    "total_tokens": 1936,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 11:21:59.813 -03:00 [INF] JSON bruto recebido: {
  "Codigo": 1,
  "Nome": "ALFACE CRESPO",
  "Subgrupo": "10113"
},
{
  "Codigo": 2,
  "Nome": "CENOURA",
  "Subgrupo": "10113"
},
{
  "Codigo": 3,
  "Nome": "PERNIL SUINO",
  "Subgrupo": "10122"
},
{
  "Codigo": 4,
  "Nome": "ENLATADO",
  "Subgrupo": "242424"
},
{
  "Codigo": 5,
  "Nome": "PAPEL HIGIENICO",
  "Subgrupo": ""
}
2025-01-20 11:21:59.815 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 11:21:59.817 -03:00 [ERR] Erro ao desserializar JSON: Error converting value 1 to type 'System.Collections.Generic.List`1[Produto]'. Path 'Codigo', line 2, position 13.
2025-01-20 11:21:59.818 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 11:21:59.819 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1882.0975ms
2025-01-20 11:21:59.820 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:21:59.821 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1886.3055 ms
2025-01-20 11:21:59.822 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1890.6529ms
2025-01-20 11:22:26.439 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 11:22:26.441 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:22:26.442 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 11:22:26.444 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 11:22:26.444 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 11:22:26.454 -03:00 [INF] Processando lista de produtos.
2025-01-20 11:22:26.455 -03:00 [INF] Processando 5 produtos.
2025-01-20 11:22:26.455 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 11:22:26.456 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8359 caracteres.
2025-01-20 11:22:26.457 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:22:26.458 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:22:40.282 -03:00 [INF] Received HTTP response headers after 13823.5249ms - 200
2025-01-20 11:22:40.283 -03:00 [INF] End processing HTTP request after 13826.3248ms - 200
2025-01-20 11:22:40.284 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArmxVCwea3xYdhM75Gtfk7bRABe8x",
  "object": "chat.completion",
  "created": 1737382945,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Codigo\": 100,\n  \"Nome\": \"Mercado Central\",\n  \"Departamentos\": [\n    {\n      \"Codigo\": 101,\n      \"Nome\": \"Alimentos\",\n      \"CodigoVinculo\": 100,\n      \"Grupos\": [\n        {\n          \"Codigo\": 1011,\n          \"Nome\": \"Frutas e Verduras\",\n          \"CodigoVinculo\": 101,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10111,\n              \"Nome\": \"Frutas Nacionais\",\n              \"CodigoVinculo\": 1011\n            },\n            {\n              \"Codigo\": 10112,\n              \"Nome\": \"Frutas Importadas\",\n              \"CodigoVinculo\": 1011\n            },\n            {\n              \"Codigo\": 10113,\n              \"Nome\": \"Verduras\",\n              \"CodigoVinculo\": 1011,\n              \"Subgrupo\": \"\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": 1012,\n          \"Nome\": \"Carnes e Aves\",\n          \"CodigoVinculo\": 101,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10121,\n              \"Nome\": \"Carnes Bovinas\",\n              \"CodigoVinculo\": 1012\n            },\n            {\n              \"Codigo\": 10122,\n              \"Nome\": \"Carnes Suínas\",\n              \"CodigoVinculo\": 1012\n            },\n            {\n              \"Codigo\": 10123,\n              \"Nome\": \"Aves\",\n              \"CodigoVinculo\": 1012\n            }\n          ]\n        },\n        {\n          \"Codigo\": 1013,\n          \"Nome\": \"Congelados\",\n          \"CodigoVinculo\": 101,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10131,\n              \"Nome\": \"Legumes Congelados\",\n              \"CodigoVinculo\": 1013\n            },\n            {\n              \"Codigo\": 10132,\n              \"Nome\": \"Carnes Congeladas\",\n              \"CodigoVinculo\": 1013\n            },\n            {\n              \"Codigo\": 10133,\n              \"Nome\": \"Frutas Congeladas\",\n              \"CodigoVinculo\": 1013\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Codigo\": 102,\n      \"Nome\": \"Bebidas\",\n      \"CodigoVinculo\": 100,\n      \"Grupos\": [\n        {\n          \"Codigo\": 1021,\n          \"Nome\": \"Refrigerantes\",\n          \"CodigoVinculo\": 102,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10211,\n              \"Nome\": \"Cola\",\n              \"CodigoVinculo\": 1021\n            },\n            {\n              \"Codigo\": 10212,\n              \"Nome\": \"Laranja\",\n              \"CodigoVinculo\": 1021\n            },\n            {\n              \"Codigo\": 10213,\n              \"Nome\": \"Guaraná\",\n              \"CodigoVinculo\": 1021\n            },\n            {\n              \"Codigo\": 242424,\n              \"Nome\": \"Igo Enlatado\",\n              \"CodigoVinculo\": 1021,\n              \"Subgrupo\": \"4\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": 1022,\n          \"Nome\": \"Águas\",\n          \"CodigoVinculo\": 102,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10221,\n              \"Nome\": \"Água Mineral\",\n              \"CodigoVinculo\": 1022\n            },\n            {\n              \"Codigo\": 10222,\n              \"Nome\": \"Água com Gás\",\n              \"CodigoVinculo\": 1022\n            }\n          ]\n        },\n        {\n          \"Codigo\": 1023,\n          \"Nome\": \"Bebidas Alcoólicas\",\n          \"CodigoVinculo\": 102,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10231,\n              \"Nome\": \"Cervejas\",\n              \"CodigoVinculo\": 1023\n            },\n            {\n              \"Codigo\": 10232,\n              \"Nome\": \"Vinhos\",\n              \"CodigoVinculo\": 1023\n            },\n            {\n              \"Codigo\": 10233,\n              \"Nome\": \"Destilados\",\n              \"CodigoVinculo\": 1023\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Codigo\": 103,\n      \"Nome\": \"Higiene e Beleza\",\n      \"CodigoVinculo\": 100,\n      \"Grupos\": [\n        {\n          \"Codigo\": 1031,\n          \"Nome\": \"Higiene Pessoal\",\n          \"CodigoVinculo\": 103,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10311,\n              \"Nome\": \"Shampoos\",\n              \"CodigoVinculo\": 1031\n            },\n            {\n              \"Codigo\": 10312,\n              \"Nome\": \"Sabonetes\",\n              \"CodigoVinculo\": 1031\n            },\n            {\n              \"Codigo\": 10313,\n              \"Nome\": \"Desodorantes\",\n              \"CodigoVinculo\": 1031\n            },\n            {\n              \"Codigo\": 131313,\n              \"Nome\": \"Higiene\",\n              \"CodigoVinculo\": 1031\n            }\n          ]\n        },\n        {\n          \"Codigo\": 1032,\n          \"Nome\": \"Cuidados com a Pele\",\n          \"CodigoVinculo\": 103,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10321,\n              \"Nome\": \"Hidratantes\",\n              \"CodigoVinculo\": 1032\n            },\n            {\n              \"Codigo\": 10322,\n              \"Nome\": \"Protetor Solar\",\n              \"CodigoVinculo\": 1032\n            },\n            {\n              \"Codigo\": 10323,\n              \"Nome\": \"Cremes Anti-idade\",\n              \"CodigoVinculo\": 1032\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Codigo\": 104,\n      \"Nome\": \"Limpeza\",\n      \"CodigoVinculo\": 100,\n      \"Grupos\": [\n        {\n          \"Codigo\": 1041,\n          \"Nome\": \"Limpeza Geral\",\n          \"CodigoVinculo\": 104,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10411,\n              \"Nome\": \"Detergentes\",\n              \"CodigoVinculo\": 1041\n            },\n            {\n              \"Codigo\": 10412,\n              \"Nome\": \"Desinfetantes\",\n              \"CodigoVinculo\": 1041\n            },\n            {\n              \"Codigo\": 10413,\n              \"Nome\": \"Sabão em Pó\",\n              \"CodigoVinculo\": 1041\n            }\n          ]\n        },\n        {\n          \"Codigo\": 1042,\n          \"Nome\": \"Limpeza de Roupas\",\n          \"CodigoVinculo\": 104,\n          \"Subgrupos\": [\n            {\n              \"Codigo\": 10421,\n              \"Nome\": \"Amaciantes\",\n              \"CodigoVinculo\": 1042\n            },\n            {\n              \"Codigo\": 10422,\n              \"Nome\": \"Sabão Líquido\",\n              \"CodigoVinculo\": 1042\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1794,
    "completion_tokens": 1610,
    "total_tokens": 3404,
    "prompt_tokens_details": {
      "cached_tokens": 1792,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 11:22:40.292 -03:00 [INF] JSON bruto recebido: {
  "Codigo": 100,
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": 101,
      "Nome": "Alimentos",
      "CodigoVinculo": 100,
      "Grupos": [
        {
          "Codigo": 1011,
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": 101,
          "Subgrupos": [
            {
              "Codigo": 10111,
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": 1011
            },
            {
              "Codigo": 10112,
              "Nome": "Frutas Importadas",
              "CodigoVinculo": 1011
            },
            {
              "Codigo": 10113,
              "Nome": "Verduras",
              "CodigoVinculo": 1011,
              "Subgrupo": ""
            }
          ]
        },
        {
          "Codigo": 1012,
          "Nome": "Carnes e Aves",
          "CodigoVinculo": 101,
          "Subgrupos": [
            {
              "Codigo": 10121,
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": 1012
            },
            {
              "Codigo": 10122,
              "Nome": "Carnes Suínas",
              "CodigoVinculo": 1012
            },
            {
              "Codigo": 10123,
              "Nome": "Aves",
              "CodigoVinculo": 1012
            }
          ]
        },
        {
          "Codigo": 1013,
          "Nome": "Congelados",
          "CodigoVinculo": 101,
          "Subgrupos": [
            {
              "Codigo": 10131,
              "Nome": "Legumes Congelados",
              "CodigoVinculo": 1013
            },
            {
              "Codigo": 10132,
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": 1013
            },
            {
              "Codigo": 10133,
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": 1013
            }
          ]
        }
      ]
    },
    {
      "Codigo": 102,
      "Nome": "Bebidas",
      "CodigoVinculo": 100,
      "Grupos": [
        {
          "Codigo": 1021,
          "Nome": "Refrigerantes",
          "CodigoVinculo": 102,
          "Subgrupos": [
            {
              "Codigo": 10211,
              "Nome": "Cola",
              "CodigoVinculo": 1021
            },
            {
              "Codigo": 10212,
              "Nome": "Laranja",
              "CodigoVinculo": 1021
            },
            {
              "Codigo": 10213,
              "Nome": "Guaraná",
              "CodigoVinculo": 1021
            },
            {
              "Codigo": 242424,
              "Nome": "Igo Enlatado",
              "CodigoVinculo": 1021,
              "Subgrupo": "4"
            }
          ]
        },
        {
          "Codigo": 1022,
          "Nome": "Águas",
          "CodigoVinculo": 102,
          "Subgrupos": [
            {
              "Codigo": 10221,
              "Nome": "Água Mineral",
              "CodigoVinculo": 1022
            },
            {
              "Codigo": 10222,
              "Nome": "Água com Gás",
              "CodigoVinculo": 1022
            }
          ]
        },
        {
          "Codigo": 1023,
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": 102,
          "Subgrupos": [
            {
              "Codigo": 10231,
              "Nome": "Cervejas",
              "CodigoVinculo": 1023
            },
            {
              "Codigo": 10232,
              "Nome": "Vinhos",
              "CodigoVinculo": 1023
            },
            {
              "Codigo": 10233,
              "Nome": "Destilados",
              "CodigoVinculo": 1023
            }
          ]
        }
      ]
    },
    {
      "Codigo": 103,
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": 100,
      "Grupos": [
        {
          "Codigo": 1031,
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": 103,
          "Subgrupos": [
            {
              "Codigo": 10311,
              "Nome": "Shampoos",
              "CodigoVinculo": 1031
            },
            {
              "Codigo": 10312,
              "Nome": "Sabonetes",
              "CodigoVinculo": 1031
            },
            {
              "Codigo": 10313,
              "Nome": "Desodorantes",
              "CodigoVinculo": 1031
            },
            {
              "Codigo": 131313,
              "Nome": "Higiene",
              "CodigoVinculo": 1031
            }
          ]
        },
        {
          "Codigo": 1032,
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": 103,
          "Subgrupos": [
            {
              "Codigo": 10321,
              "Nome": "Hidratantes",
              "CodigoVinculo": 1032
            },
            {
              "Codigo": 10322,
              "Nome": "Protetor Solar",
              "CodigoVinculo": 1032
            },
            {
              "Codigo": 10323,
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": 1032
            }
          ]
        }
      ]
    },
    {
      "Codigo": 104,
      "Nome": "Limpeza",
      "CodigoVinculo": 100,
      "Grupos": [
        {
          "Codigo": 1041,
          "Nome": "Limpeza Geral",
          "CodigoVinculo": 104,
          "Subgrupos": [
            {
              "Codigo": 10411,
              "Nome": "Detergentes",
              "CodigoVinculo": 1041
            },
            {
              "Codigo": 10412,
              "Nome": "Desinfetantes",
              "CodigoVinculo": 1041
            },
            {
              "Codigo": 10413,
              "Nome": "Sabão em Pó",
              "CodigoVinculo": 1041
            }
          ]
        },
        {
          "Codigo": 1042,
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": 104,
          "Subgrupos": [
            {
              "Codigo": 10421,
              "Nome": "Amaciantes",
              "CodigoVinculo": 1042
            },
            {
              "Codigo": 10422,
              "Nome": "Sabão Líquido",
              "CodigoVinculo": 1042
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 11:22:40.299 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 11:22:40.300 -03:00 [ERR] Erro ao desserializar JSON: Error converting value 100 to type 'System.Collections.Generic.List`1[Produto]'. Path 'Codigo', line 2, position 15.
2025-01-20 11:22:40.301 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 11:22:40.302 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 13859.0034ms
2025-01-20 11:22:40.303 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:22:40.304 -03:00 [INF] HTTP POST /produto/processar responded 200 in 13862.8519 ms
2025-01-20 11:22:40.305 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 13866.8294ms
2025-01-20 11:23:20.069 -03:00 [INF] Application is shutting down...
2025-01-20 11:23:22.692 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-20 11:23:22.720 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 11:23:22.721 -03:00 [INF] Hosting environment: Development
2025-01-20 11:23:22.721 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-20 11:23:23.285 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 11:23:23.304 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 11:23:23.307 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:23:23.328 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 11:23:23.339 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 11:23:23.339 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 11:23:23.434 -03:00 [INF] Processando lista de produtos.
2025-01-20 11:23:23.437 -03:00 [INF] Processando 5 produtos.
2025-01-20 11:23:23.438 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 11:23:23.456 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8326 caracteres.
2025-01-20 11:23:23.461 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:23:23.464 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 11:23:27.292 -03:00 [INF] Received HTTP response headers after 3825.4804ms - 200
2025-01-20 11:23:27.301 -03:00 [INF] End processing HTTP request after 3842.79ms - 200
2025-01-20 11:23:27.304 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArmyT0HOyRTtHW2U6rhTm6QvkZQSw",
  "object": "chat.completion",
  "created": 1737383005,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10213\"},\n    {\"Codigo\":5,\"Nome\":\"PAPEL HIGIENICO\",\"Subgrupo\":\"\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1783,
    "completion_tokens": 98,
    "total_tokens": 1881,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 11:23:27.354 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":""},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10213"},
    {"Codigo":5,"Nome":"PAPEL HIGIENICO","Subgrupo":""}
]
2025-01-20 11:23:27.357 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-20 11:23:27.360 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 11:23:27.367 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 4035.5774ms
2025-01-20 11:23:27.368 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 11:23:27.370 -03:00 [INF] HTTP POST /produto/processar responded 200 in 4067.1523 ms
2025-01-20 11:23:27.373 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 4089.109ms
2025-01-20 14:50:48.770 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 14:50:48.774 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 14:50:48.775 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 14:50:48.776 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 14:50:48.787 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 14:50:48.795 -03:00 [INF] Processando lista de produtos.
2025-01-20 14:50:48.797 -03:00 [INF] Processando 5 produtos.
2025-01-20 14:50:48.798 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 14:50:48.804 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8326 caracteres.
2025-01-20 14:50:48.805 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 14:50:48.806 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 14:50:51.599 -03:00 [INF] Received HTTP response headers after 2792.9912ms - 200
2025-01-20 14:50:51.601 -03:00 [INF] End processing HTTP request after 2795.7794ms - 200
2025-01-20 14:50:51.614 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArqDAE8NtCRxJAFaRmy77m1puZglJ",
  "object": "chat.completion",
  "created": 1737395448,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\n        \"Codigo\": 1,\n        \"Nome\": \"ALFACE CRESPO\",\n        \"Subgrupo\": \"10113\"\n    },\n    {\n        \"Codigo\": 2,\n        \"Nome\": \"CENOURA\",\n        \"Subgrupo\": \"10113\"\n    },\n    {\n        \"Codigo\": 3,\n        \"Nome\": \"PERNIL SUINO\",\n        \"Subgrupo\": \"\"\n    },\n    {\n        \"Codigo\": 4,\n        \"Nome\": \"ENLATADO\",\n        \"Subgrupo\": \"\"\n    },\n    {\n        \"Codigo\": 5,\n        \"Nome\": \"PAPEL HIGIENICO\",\n        \"Subgrupo\": \"\"\n    }\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1783,
    "completion_tokens": 148,
    "total_tokens": 1931,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 14:50:51.617 -03:00 [INF] JSON bruto recebido: [
    {
        "Codigo": 1,
        "Nome": "ALFACE CRESPO",
        "Subgrupo": "10113"
    },
    {
        "Codigo": 2,
        "Nome": "CENOURA",
        "Subgrupo": "10113"
    },
    {
        "Codigo": 3,
        "Nome": "PERNIL SUINO",
        "Subgrupo": ""
    },
    {
        "Codigo": 4,
        "Nome": "ENLATADO",
        "Subgrupo": ""
    },
    {
        "Codigo": 5,
        "Nome": "PAPEL HIGIENICO",
        "Subgrupo": ""
    }
]
2025-01-20 14:50:51.618 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-20 14:50:51.619 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 14:50:51.620 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2844.3036ms
2025-01-20 14:50:51.621 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 14:50:51.622 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2848.1101 ms
2025-01-20 14:50:51.623 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2853.7493ms
2025-01-20 14:51:34.893 -03:00 [INF] Application is shutting down...
2025-01-20 14:51:40.160 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-20 14:51:40.187 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 14:51:40.188 -03:00 [INF] Hosting environment: Development
2025-01-20 14:51:40.189 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-20 14:51:51.972 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 14:51:51.988 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 14:51:51.991 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 14:51:52.010 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 14:51:52.018 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 14:51:52.019 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 14:51:52.100 -03:00 [INF] Processando lista de produtos.
2025-01-20 14:51:52.103 -03:00 [INF] Processando 5 produtos.
2025-01-20 14:51:52.103 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 14:51:52.119 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8294 caracteres.
2025-01-20 14:51:52.124 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 14:51:52.127 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 14:51:53.616 -03:00 [INF] Received HTTP response headers after 1487.018ms - 200
2025-01-20 14:51:53.624 -03:00 [INF] End processing HTTP request after 1502.9557ms - 200
2025-01-20 14:51:53.627 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArqEBJ0Ent56NpYsP5dr5Eo94r6Q9",
  "object": "chat.completion",
  "created": 1737395511,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"},\n    {\"Codigo\":5,\"Nome\":\"PAPEL HIGIENICO\",\"Subgrupo\":\"131313\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1771,
    "completion_tokens": 102,
    "total_tokens": 1873,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 14:51:53.675 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"},
    {"Codigo":5,"Nome":"PAPEL HIGIENICO","Subgrupo":"131313"}
]
2025-01-20 14:51:53.678 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-20 14:51:53.681 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 14:51:53.688 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1674.8948ms
2025-01-20 14:51:53.689 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 14:51:53.691 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1703.4732 ms
2025-01-20 14:51:53.694 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1723.1634ms
2025-01-20 14:53:04.705 -03:00 [INF] Application is shutting down...
2025-01-20 14:53:17.248 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-20 14:53:17.275 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 14:53:17.276 -03:00 [INF] Hosting environment: Development
2025-01-20 14:53:17.276 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-20 22:41:49.463 -03:00 [INF] Application is shutting down...
2025-01-20 22:41:57.139 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-20 22:41:57.167 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 22:41:57.168 -03:00 [INF] Hosting environment: Development
2025-01-20 22:41:57.170 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-20 22:42:40.274 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 285
2025-01-20 22:42:40.293 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 22:42:40.295 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:42:40.316 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:42:40.329 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:42:40.337 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:42:40.445 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:42:40.449 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:42:40.450 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:42:40.465 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8291 caracteres.
2025-01-20 22:42:40.470 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:42:40.473 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:42:42.711 -03:00 [INF] Received HTTP response headers after 2235.7878ms - 200
2025-01-20 22:42:42.720 -03:00 [INF] End processing HTTP request after 2252.6781ms - 200
2025-01-20 22:42:42.722 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxZomHMfZpYDd0Q2fIK8yzJqrnKF",
  "object": "chat.completion",
  "created": 1737423760,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"},\n    {\"Codigo\":5,\"Nome\":\"CERVEJA SKOL\",\"Subgrupo\":\"10231\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1768,
    "completion_tokens": 99,
    "total_tokens": 1867,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:42:42.787 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"},
    {"Codigo":5,"Nome":"CERVEJA SKOL","Subgrupo":"10231"}
]
2025-01-20 22:42:42.793 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-20 22:42:42.796 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:42:42.804 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2482.9008ms
2025-01-20 22:42:42.807 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:42:42.810 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2517.7683 ms
2025-01-20 22:42:42.813 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2539.429ms
2025-01-20 22:43:21.349 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 277
2025-01-20 22:43:21.352 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:43:21.353 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:43:21.355 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:43:21.356 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:43:21.408 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:43:21.409 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:43:21.410 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:43:21.416 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8283 caracteres.
2025-01-20 22:43:21.417 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:43:21.423 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:43:23.185 -03:00 [INF] Received HTTP response headers after 1761.123ms - 200
2025-01-20 22:43:23.186 -03:00 [INF] End processing HTTP request after 1768.9377ms - 200
2025-01-20 22:43:23.188 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxaS5aBmWVkiuznS0enNFJM8GMn3",
  "object": "chat.completion",
  "created": 1737423800,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"subgrupoPreenchido\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"SKOL\",\n      \"Subgrupo\": \"10231\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1765,
    "completion_tokens": 163,
    "total_tokens": 1928,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:43:23.193 -03:00 [INF] JSON bruto recebido: {
  "subgrupoPreenchido": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "SKOL",
      "Subgrupo": "10231"
    }
  ]
}
2025-01-20 22:43:23.200 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:43:23.204 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'subgrupoPreenchido'.
2025-01-20 22:43:23.206 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:43:23.209 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1854.2896ms
2025-01-20 22:43:23.210 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:43:23.211 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1859.1631 ms
2025-01-20 22:43:23.213 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1863.8596ms
2025-01-20 22:43:31.360 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 279
2025-01-20 22:43:31.363 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:43:31.364 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:43:31.368 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:43:31.369 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:43:31.417 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:43:31.418 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:43:31.420 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:43:31.421 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8285 caracteres.
2025-01-20 22:43:31.422 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:43:31.423 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:43:32.684 -03:00 [INF] Received HTTP response headers after 1259.6094ms - 200
2025-01-20 22:43:32.685 -03:00 [INF] End processing HTTP request after 1263.3009ms - 200
2025-01-20 22:43:32.686 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxacBvmgUmp3C3tCAEyWDg6ZhCJy",
  "object": "chat.completion",
  "created": 1737423810,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Codigo\": 1,\n  \"Nome\": \"ALFACE CRESPO\",\n  \"Subgrupo\": \"10111\"\n},\n{\n  \"Codigo\": 2,\n  \"Nome\": \"CENOURA\",\n  \"Subgrupo\": \"10113\"\n},\n{\n  \"Codigo\": 3,\n  \"Nome\": \"PERNIL SUINO\",\n  \"Subgrupo\": \"10122\"\n},\n{\n  \"Codigo\": 4,\n  \"Nome\": \"ENLATADO\",\n  \"Subgrupo\": \"242424\"\n},\n{\n  \"Codigo\": 5,\n  \"Nome\": \"BRAHMA\",\n  \"Subgrupo\": \"10231\"\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1767,
    "completion_tokens": 141,
    "total_tokens": 1908,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:43:32.693 -03:00 [INF] JSON bruto recebido: {
  "Codigo": 1,
  "Nome": "ALFACE CRESPO",
  "Subgrupo": "10111"
},
{
  "Codigo": 2,
  "Nome": "CENOURA",
  "Subgrupo": "10113"
},
{
  "Codigo": 3,
  "Nome": "PERNIL SUINO",
  "Subgrupo": "10122"
},
{
  "Codigo": 4,
  "Nome": "ENLATADO",
  "Subgrupo": "242424"
},
{
  "Codigo": 5,
  "Nome": "BRAHMA",
  "Subgrupo": "10231"
}
2025-01-20 22:43:32.698 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:43:32.702 -03:00 [ERR] Erro ao desserializar JSON: Error converting value 1 to type 'System.Collections.Generic.List`1[Produto]'. Path 'Codigo', line 2, position 13.
2025-01-20 22:43:32.703 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:43:32.705 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1337.8629ms
2025-01-20 22:43:32.707 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:43:32.709 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1345.4258 ms
2025-01-20 22:43:32.710 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1350.1453ms
2025-01-20 22:43:48.724 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 279
2025-01-20 22:44:18.516 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:44:18.516 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:44:18.518 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:44:18.518 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:44:18.551 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:44:18.551 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:44:18.553 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:44:18.554 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8285 caracteres.
2025-01-20 22:44:18.554 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:44:18.555 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:44:18.704 -03:00 [INF] Application is shutting down...
2025-01-20 22:44:19.853 -03:00 [INF] Received HTTP response headers after 1297.2333ms - 200
2025-01-20 22:44:19.854 -03:00 [INF] End processing HTTP request after 1300.2194ms - 200
2025-01-20 22:44:19.856 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxbNPkJbwgID4KztYH5gJ0sqjwYY",
  "object": "chat.completion",
  "created": 1737423857,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Produtos\": [\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10111\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"},\n    {\"Codigo\":5,\"Nome\":\"BRAHMA\",\"Subgrupo\":\"10231\"}\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1767,
    "completion_tokens": 106,
    "total_tokens": 1873,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:44:19.861 -03:00 [INF] JSON bruto recebido: {
  "Produtos": [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10111"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"},
    {"Codigo":5,"Nome":"BRAHMA","Subgrupo":"10231"}
  ]
}
2025-01-20 22:44:19.864 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:44:19.865 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Produtos'.
2025-01-20 22:44:19.866 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:44:19.868 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1350.5029ms
2025-01-20 22:44:19.870 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:44:19.871 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1355.1141 ms
2025-01-20 22:44:19.872 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 31148.2705ms
2025-01-20 22:44:22.823 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-20 22:44:22.850 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 22:44:22.851 -03:00 [INF] Hosting environment: Development
2025-01-20 22:44:22.852 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-20 22:44:26.034 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 279
2025-01-20 22:44:26.052 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 22:44:26.055 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:44:26.074 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:44:26.085 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:44:26.086 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:44:26.203 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:44:26.206 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:44:26.206 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:44:26.221 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8285 caracteres.
2025-01-20 22:44:26.227 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:44:26.230 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:44:28.024 -03:00 [INF] Received HTTP response headers after 1792.3985ms - 200
2025-01-20 22:44:28.033 -03:00 [INF] End processing HTTP request after 1808.4589ms - 200
2025-01-20 22:44:28.035 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxbVzL7wWWgNe4QwKrlKseX3HiuB",
  "object": "chat.completion",
  "created": 1737423865,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"BRAHMA\",\n      \"Subgrupo\": \"10231\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1767,
    "completion_tokens": 161,
    "total_tokens": 1928,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:44:28.091 -03:00 [INF] JSON bruto recebido: {
  "produtos": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "BRAHMA",
      "Subgrupo": "10231"
    }
  ]
}
2025-01-20 22:44:28.098 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:44:28.102 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'produtos'.
2025-01-20 22:44:28.106 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:44:28.113 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2033.4662ms
2025-01-20 22:44:28.114 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:44:28.118 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2066.3357 ms
2025-01-20 22:44:28.122 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2089.1229ms
2025-01-20 22:45:07.058 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 22:45:07.061 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:45:07.062 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:45:07.066 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:45:07.067 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:45:07.126 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:45:07.126 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:45:07.129 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:45:07.134 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8292 caracteres.
2025-01-20 22:45:07.135 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:45:07.136 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:45:20.175 -03:00 [INF] Received HTTP response headers after 13037.6135ms - 200
2025-01-20 22:45:20.176 -03:00 [INF] End processing HTTP request after 13041.3261ms - 200
2025-01-20 22:45:20.179 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxcAcyBs8VYXCCDdUYL3B6nqXffa",
  "object": "chat.completion",
  "created": 1737423906,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Codigo\": \"100\",\n  \"Nome\": \"Mercado Central\",\n  \"Departamentos\": [\n    {\n      \"Codigo\": \"101\",\n      \"Nome\": \"Alimentos\",\n      \"CodigoVinculo\": \"100\",\n      \"Grupos\": [\n        {\n          \"Codigo\": \"1011\",\n          \"Nome\": \"Frutas e Verduras\",\n          \"CodigoVinculo\": \"101\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10111\",\n              \"Nome\": \"Frutas Nacionais\",\n              \"CodigoVinculo\": \"1011\"\n            },\n            {\n              \"Codigo\": \"10112\",\n              \"Nome\": \"Frutas Importadas\",\n              \"CodigoVinculo\": \"1011\"\n            },\n            {\n              \"Codigo\": \"10113\",\n              \"Nome\": \"Verduras\",\n              \"CodigoVinculo\": \"1011\"\n            },\n            {\n              \"Codigo\": 1,\n              \"Nome\": \"ALFACE CRESPO\",\n              \"Subgrupo\": \"10113\"\n            },\n            {\n              \"Codigo\": 2,\n              \"Nome\": \"CENOURA\",\n              \"Subgrupo\": \"10113\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1012\",\n          \"Nome\": \"Carnes e Aves\",\n          \"CodigoVinculo\": \"101\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10121\",\n              \"Nome\": \"Carnes Bovinas\",\n              \"CodigoVinculo\": \"1012\"\n            },\n            {\n              \"Codigo\": \"10122\",\n              \"Nome\": \"Carnes Suínas\",\n              \"CodigoVinculo\": \"1012\"\n            },\n            {\n              \"Codigo\": \"10123\",\n              \"Nome\": \"Aves\",\n              \"CodigoVinculo\": \"1012\"\n            },\n            {\n              \"Codigo\": 3,\n              \"Nome\": \"PERNIL SUINO\",\n              \"Subgrupo\": \"10122\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1013\",\n          \"Nome\": \"Congelados\",\n          \"CodigoVinculo\": \"101\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10131\",\n              \"Nome\": \"Legumes Congelados\",\n              \"CodigoVinculo\": \"1013\"\n            },\n            {\n              \"Codigo\": \"10132\",\n              \"Nome\": \"Carnes Congeladas\",\n              \"CodigoVinculo\": \"1013\"\n            },\n            {\n              \"Codigo\": \"10133\",\n              \"Nome\": \"Frutas Congeladas\",\n              \"CodigoVinculo\": \"1013\"\n            },\n            {\n              \"Codigo\": 4,\n              \"Nome\": \"ENLATADO\",\n              \"Subgrupo\": \"10132\"\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Codigo\": \"102\",\n      \"Nome\": \"Bebidas\",\n      \"CodigoVinculo\": \"100\",\n      \"Grupos\": [\n        {\n          \"Codigo\": \"1021\",\n          \"Nome\": \"Refrigerantes\",\n          \"CodigoVinculo\": \"102\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10211\",\n              \"Nome\": \"Cola\",\n              \"CodigoVinculo\": \"1021\"\n            },\n            {\n              \"Codigo\": \"10212\",\n              \"Nome\": \"Laranja\",\n              \"CodigoVinculo\": \"1021\"\n            },\n            {\n              \"Codigo\": \"10213\",\n              \"Nome\": \"Guaraná\",\n              \"CodigoVinculo\": \"1021\"\n            },\n            {\n              \"Codigo\": 5,\n              \"Nome\": \"OMO MULTIAÇÃO\",\n              \"Subgrupo\": \"10213\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1022\",\n          \"Nome\": \"Águas\",\n          \"CodigoVinculo\": \"102\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10221\",\n              \"Nome\": \"Água Mineral\",\n              \"CodigoVinculo\": \"1022\"\n            },\n            {\n              \"Codigo\": \"10222\",\n              \"Nome\": \"Água com Gás\",\n              \"CodigoVinculo\": \"1022\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1023\",\n          \"Nome\": \"Bebidas Alcoólicas\",\n          \"CodigoVinculo\": \"102\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10231\",\n              \"Nome\": \"Cervejas\",\n              \"CodigoVinculo\": \"1023\"\n            },\n            {\n              \"Codigo\": \"10232\",\n              \"Nome\": \"Vinhos\",\n              \"CodigoVinculo\": \"1023\"\n            },\n            {\n              \"Codigo\": \"10233\",\n              \"Nome\": \"Destilados\",\n              \"CodigoVinculo\": \"1023\"\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Codigo\": \"103\",\n      \"Nome\": \"Higiene e Beleza\",\n      \"CodigoVinculo\": \"100\",\n      \"Grupos\": [\n        {\n          \"Codigo\": \"1031\",\n          \"Nome\": \"Higiene Pessoal\",\n          \"CodigoVinculo\": \"103\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10311\",\n              \"Nome\": \"Shampoos\",\n              \"CodigoVinculo\": \"1031\"\n            },\n            {\n              \"Codigo\": \"10312\",\n              \"Nome\": \"Sabonetes\",\n              \"CodigoVinculo\": \"1031\"\n            },\n            {\n              \"Codigo\": \"10313\",\n              \"Nome\": \"Desodorantes\",\n              \"CodigoVinculo\": \"1031\"\n            },\n            {\n              \"Codigo\": 131313,\n              \"Nome\": \"Higiene\",\n              \"Subgrupo\": \"10313\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1032\",\n          \"Nome\": \"Cuidados com a Pele\",\n          \"CodigoVinculo\": \"103\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10321\",\n              \"Nome\": \"Hidratantes\",\n              \"CodigoVinculo\": \"1032\"\n            },\n            {\n              \"Codigo\": \"10322\",\n              \"Nome\": \"Protetor Solar\",\n              \"CodigoVinculo\": \"1032\"\n            },\n            {\n              \"Codigo\": \"10323\",\n              \"Nome\": \"Cremes Anti-idade\",\n              \"CodigoVinculo\": \"1032\"\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Codigo\": \"104\",\n      \"Nome\": \"Limpeza\",\n      \"CodigoVinculo\": \"100\",\n      \"Grupos\": [\n        {\n          \"Codigo\": \"1041\",\n          \"Nome\": \"Limpeza Geral\",\n          \"CodigoVinculo\": \"104\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10411\",\n              \"Nome\": \"Detergentes\",\n              \"CodigoVinculo\": \"1041\"\n            },\n            {\n              \"Codigo\": \"10412\",\n              \"Nome\": \"Desinfetantes\",\n              \"CodigoVinculo\": \"1041\"\n            },\n            {\n              \"Codigo\": \"10413\",\n              \"Nome\": \"Sabão em Pó\",\n              \"CodigoVinculo\": \"1041\"\n            }\n          ]\n        },\n        {\n          \"Codigo\": \"1042\",\n          \"Nome\": \"Limpeza de Roupas\",\n          \"CodigoVinculo\": \"104\",\n          \"Subgrupos\": [\n            {\n              \"Codigo\": \"10421\",\n              \"Nome\": \"Amaciantes\",\n              \"CodigoVinculo\": \"1042\"\n            },\n            {\n              \"Codigo\": \"10422\",\n              \"Nome\": \"Sabão Líquido\",\n              \"CodigoVinculo\": \"1042\"\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1768,
    "completion_tokens": 1711,
    "total_tokens": 3479,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:45:20.208 -03:00 [INF] JSON bruto recebido: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": 1,
              "Nome": "ALFACE CRESPO",
              "Subgrupo": "10113"
            },
            {
              "Codigo": 2,
              "Nome": "CENOURA",
              "Subgrupo": "10113"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": 3,
              "Nome": "PERNIL SUINO",
              "Subgrupo": "10122"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": 4,
              "Nome": "ENLATADO",
              "Subgrupo": "10132"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": 5,
              "Nome": "OMO MULTIAÇÃO",
              "Subgrupo": "10213"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": 131313,
              "Nome": "Higiene",
              "Subgrupo": "10313"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:45:20.245 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:45:20.246 -03:00 [ERR] Erro ao desserializar JSON: Error converting value "100" to type 'System.Collections.Generic.List`1[Produto]'. Path 'Codigo', line 2, position 17.
2025-01-20 22:45:20.248 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:45:20.251 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 13185.7487ms
2025-01-20 22:45:20.258 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:45:20.259 -03:00 [INF] HTTP POST /produto/processar responded 200 in 13198.1048 ms
2025-01-20 22:45:20.261 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 13203.3725ms
2025-01-20 22:45:37.422 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 22:45:37.425 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:45:37.425 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:45:37.427 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:45:37.427 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:45:37.444 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:45:37.444 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:45:37.447 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:45:37.449 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8292 caracteres.
2025-01-20 22:45:37.450 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:45:37.451 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:45:40.259 -03:00 [INF] Received HTTP response headers after 2806.7399ms - 200
2025-01-20 22:45:40.260 -03:00 [INF] End processing HTTP request after 2810.6322ms - 200
2025-01-20 22:45:40.265 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxcfGCHfTJ0PJRp7oR07vo5sidCC",
  "object": "chat.completion",
  "created": 1737423937,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"produtos\": [\n    { \"Codigo\": 1, \"Nome\": \"ALFACE CRESPO\", \"Subgrupo\": \"10111\" },\n    { \"Codigo\": 2, \"Nome\": \"CENOURA\", \"Subgrupo\": \"10113\" },\n    { \"Codigo\": 3, \"Nome\": \"PERNIL SUINO\", \"Subgrupo\": \"10122\" },\n    { \"Codigo\": 4, \"Nome\": \"ENLATADO\", \"Subgrupo\": \"242424\" },\n    { \"Codigo\": 5, \"Nome\": \"OMO MULTIAÇÃO\", \"Subgrupo\": \"10413\" }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1768,
    "completion_tokens": 142,
    "total_tokens": 1910,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:45:40.272 -03:00 [INF] JSON bruto recebido: {
  "produtos": [
    { "Codigo": 1, "Nome": "ALFACE CRESPO", "Subgrupo": "10111" },
    { "Codigo": 2, "Nome": "CENOURA", "Subgrupo": "10113" },
    { "Codigo": 3, "Nome": "PERNIL SUINO", "Subgrupo": "10122" },
    { "Codigo": 4, "Nome": "ENLATADO", "Subgrupo": "242424" },
    { "Codigo": 5, "Nome": "OMO MULTIAÇÃO", "Subgrupo": "10413" }
  ]
}
2025-01-20 22:45:40.275 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:45:40.276 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'produtos'.
2025-01-20 22:45:40.277 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:45:40.279 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2852.1004ms
2025-01-20 22:45:40.280 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:45:40.281 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2856.5570 ms
2025-01-20 22:45:40.283 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2860.3368ms
2025-01-20 22:49:08.290 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 22:49:34.816 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:49:34.817 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:49:34.820 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:49:34.821 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:49:34.852 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:49:34.852 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:49:34.854 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:49:34.855 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8292 caracteres.
2025-01-20 22:49:34.856 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:49:34.857 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:49:36.684 -03:00 [INF] Application is shutting down...
2025-01-20 22:49:37.107 -03:00 [INF] Received HTTP response headers after 2248.5603ms - 200
2025-01-20 22:49:37.108 -03:00 [INF] End processing HTTP request after 2251.8822ms - 200
2025-01-20 22:49:37.109 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxgUkVkp5ew4OhkoO2fJsaRtxjJh",
  "object": "chat.completion",
  "created": 1737424174,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Frutas Nacionais\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10111\"\n    }\n  ],\n  \"Frutas Importadas\": [\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"10112\"\n    }\n  ],\n  \"Carnes Suínas\": [\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    }\n  ],\n  \"Refrigerantes\": [\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"OMO MULTIAÇÃO\",\n      \"Subgrupo\": \"10211\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1768,
    "completion_tokens": 197,
    "total_tokens": 1965,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:49:37.115 -03:00 [INF] JSON bruto recebido: {
  "Frutas Nacionais": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10111"
    }
  ],
  "Frutas Importadas": [
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "10112"
    }
  ],
  "Carnes Suínas": [
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    }
  ],
  "Refrigerantes": [
    {
      "Codigo": 5,
      "Nome": "OMO MULTIAÇÃO",
      "Subgrupo": "10211"
    }
  ]
}
2025-01-20 22:49:37.121 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:49:37.122 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Frutas Nacionais'.
2025-01-20 22:49:37.123 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:49:37.126 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2306.4528ms
2025-01-20 22:49:37.127 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:49:37.128 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2312.1457 ms
2025-01-20 22:49:37.130 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 28839.6162ms
2025-01-20 22:49:41.506 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-20 22:49:41.532 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 22:49:41.533 -03:00 [INF] Hosting environment: Development
2025-01-20 22:49:41.534 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-20 22:49:47.820 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 22:49:47.837 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 22:49:47.840 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:49:47.859 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:49:47.868 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:49:47.869 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:49:47.980 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:49:47.983 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:49:47.984 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:49:47.998 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8292 caracteres.
2025-01-20 22:49:48.004 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:49:48.007 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:49:49.478 -03:00 [INF] Received HTTP response headers after 1468.9504ms - 200
2025-01-20 22:49:49.488 -03:00 [INF] End processing HTTP request after 1486.9602ms - 200
2025-01-20 22:49:49.490 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxghZ64hpkN5SkNFGDe7RvsMeEjx",
  "object": "chat.completion",
  "created": 1737424187,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"242424\"},\n    {\"Codigo\":5,\"Nome\":\"OMO MULTIAÇÃO\",\"Subgrupo\":\"10413\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1768,
    "completion_tokens": 99,
    "total_tokens": 1867,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:49:49.543 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"242424"},
    {"Codigo":5,"Nome":"OMO MULTIAÇÃO","Subgrupo":"10413"}
]
2025-01-20 22:49:49.547 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-20 22:49:49.550 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:49:49.558 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1695.0226ms
2025-01-20 22:49:49.559 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:49:49.561 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1725.3152 ms
2025-01-20 22:49:49.564 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1745.5717ms
2025-01-20 22:50:03.767 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 22:50:15.529 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:50:15.530 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:50:15.532 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:50:15.533 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:50:15.566 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:50:15.567 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:50:15.568 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:50:15.573 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8292 caracteres.
2025-01-20 22:50:15.574 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:50:15.575 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:50:17.705 -03:00 [INF] Received HTTP response headers after 2128.7589ms - 200
2025-01-20 22:50:17.706 -03:00 [INF] End processing HTTP request after 2132.0058ms - 200
2025-01-20 22:50:17.711 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arxh8cN4uJVHe13jml6XLvUVY2eZm",
  "object": "chat.completion",
  "created": 1737424214,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Frutas Nacionais\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10111\"\n    }\n  ],\n  \"Frutas Importadas\": [\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"10112\"\n    }\n  ],\n  \"Carnes Suínas\": [\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    }\n  ],\n  \"Refrigerantes\": [\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"OMO MULTIAÇÃO\",\n      \"Subgrupo\": \"10211\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1768,
    "completion_tokens": 197,
    "total_tokens": 1965,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:50:17.718 -03:00 [INF] JSON bruto recebido: {
  "Frutas Nacionais": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10111"
    }
  ],
  "Frutas Importadas": [
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "10112"
    }
  ],
  "Carnes Suínas": [
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    }
  ],
  "Refrigerantes": [
    {
      "Codigo": 5,
      "Nome": "OMO MULTIAÇÃO",
      "Subgrupo": "10211"
    }
  ]
}
2025-01-20 22:50:17.725 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:50:17.729 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Frutas Nacionais'.
2025-01-20 22:50:17.731 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:50:17.732 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2200.2331ms
2025-01-20 22:50:17.734 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:50:17.735 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2205.8782 ms
2025-01-20 22:50:17.736 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 13969.386ms
2025-01-20 22:50:48.798 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 22:50:48.800 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:50:48.801 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:50:48.804 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:50:48.805 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:50:48.845 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:50:48.846 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:50:48.847 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:50:48.848 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8292 caracteres.
2025-01-20 22:50:48.848 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:50:48.849 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:50:50.340 -03:00 [INF] Received HTTP response headers after 1489.9517ms - 200
2025-01-20 22:50:50.341 -03:00 [INF] End processing HTTP request after 1493.1289ms - 200
2025-01-20 22:50:50.344 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxhgniXkrRRNziVXbEpjgXsGeHfe",
  "object": "chat.completion",
  "created": 1737424248,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\": 1, \"Nome\": \"ALFACE CRESPO\", \"Subgrupo\": \"10113\"},\n    {\"Codigo\": 2, \"Nome\": \"CENOURA\", \"Subgrupo\": \"10113\"},\n    {\"Codigo\": 3, \"Nome\": \"PERNIL SUINO\", \"Subgrupo\": \"10122\"},\n    {\"Codigo\": 4, \"Nome\": \"ENLATADO\", \"Subgrupo\": \"10213\"},\n    {\"Codigo\": 5, \"Nome\": \"OMO MULTIAÇÃO\", \"Subgrupo\": \"10413\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1768,
    "completion_tokens": 124,
    "total_tokens": 1892,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:50:50.349 -03:00 [INF] JSON bruto recebido: [
    {"Codigo": 1, "Nome": "ALFACE CRESPO", "Subgrupo": "10113"},
    {"Codigo": 2, "Nome": "CENOURA", "Subgrupo": "10113"},
    {"Codigo": 3, "Nome": "PERNIL SUINO", "Subgrupo": "10122"},
    {"Codigo": 4, "Nome": "ENLATADO", "Subgrupo": "10213"},
    {"Codigo": 5, "Nome": "OMO MULTIAÇÃO", "Subgrupo": "10413"}
]
2025-01-20 22:50:50.352 -03:00 [INF] JSON processado com sucesso no formato de lista.
2025-01-20 22:50:50.353 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:50:50.355 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1550.7156ms
2025-01-20 22:50:50.356 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:50:50.357 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1556.9452 ms
2025-01-20 22:50:50.359 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1560.8449ms
2025-01-20 22:50:57.043 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 288
2025-01-20 22:50:57.045 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:50:57.046 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:50:57.049 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:50:57.050 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:50:57.095 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:50:57.095 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:50:57.096 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:50:57.097 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8292 caracteres.
2025-01-20 22:50:57.098 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:50:57.100 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:50:58.611 -03:00 [INF] Received HTTP response headers after 1510.2427ms - 200
2025-01-20 22:50:58.612 -03:00 [INF] End processing HTTP request after 1514.8947ms - 200
2025-01-20 22:50:58.614 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arxho0cPPRn2B7vOVl5i4iurUoBEx",
  "object": "chat.completion",
  "created": 1737424256,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"Produtos\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10111\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"OMO MULTIAÇÃO\",\n      \"Subgrupo\": \"10413\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1768,
    "completion_tokens": 162,
    "total_tokens": 1930,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:50:58.619 -03:00 [INF] JSON bruto recebido: {
  "Produtos": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10111"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "OMO MULTIAÇÃO",
      "Subgrupo": "10413"
    }
  ]
}
2025-01-20 22:50:58.626 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:50:58.627 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'Produtos'.
2025-01-20 22:50:58.628 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:50:58.629 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 1580.3032ms
2025-01-20 22:50:58.631 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:50:58.632 -03:00 [INF] HTTP POST /produto/processar responded 200 in 1586.1075 ms
2025-01-20 22:50:58.633 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 1589.9872ms
2025-01-20 22:51:54.531 -03:00 [INF] Application is shutting down...
2025-01-20 22:51:57.159 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-20 22:51:57.187 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 22:51:57.188 -03:00 [INF] Hosting environment: Development
2025-01-20 22:51:57.189 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-20 22:53:45.796 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - application/json 4607
2025-01-20 22:53:45.813 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 22:53:45.816 -03:00 [INF] Executing endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-20 22:53:45.833 -03:00 [INF] Route matched with {action = "AtualizarDepartamentalizacao", controller = "Produto"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AtualizarDepartamentalizacao(Classe) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:53:45.841 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:53:45.842 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "131313",
              "Nome": "Higiene",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:53:45.984 -03:00 [INF] Arquivo departamentalizacao.json atualizado com sucesso.
2025-01-20 22:53:45.986 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-01-20 22:53:45.989 -03:00 [INF] Executed action ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI) in 152.7318ms
2025-01-20 22:53:45.998 -03:00 [INF] Executed endpoint 'ProdutoController.AtualizarDepartamentalizacao (CategorizationAPI)'
2025-01-20 22:53:46.000 -03:00 [INF] HTTP POST /produto/atualizar-departamentalizacao responded 200 in 187.9735 ms
2025-01-20 22:53:46.003 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/atualizar-departamentalizacao - 200 0 null 207.9068ms
2025-01-20 22:55:16.313 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 287
2025-01-20 22:55:16.316 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:55:16.321 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 22:55:16.326 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 22:55:16.327 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 22:55:16.393 -03:00 [INF] Processando lista de produtos.
2025-01-20 22:55:16.396 -03:00 [INF] Processando 5 produtos.
2025-01-20 22:55:16.396 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 22:55:16.403 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8132 caracteres.
2025-01-20 22:55:16.408 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:55:16.411 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 22:55:18.522 -03:00 [INF] Received HTTP response headers after 2108.6464ms - 200
2025-01-20 22:55:18.524 -03:00 [INF] End processing HTTP request after 2118.3071ms - 200
2025-01-20 22:55:18.526 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-Arxm0JVBn8KK4aognTYZUw15AtP2l",
  "object": "chat.completion",
  "created": 1737424516,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"SubgrupoPreenchido\": [\n    {\n      \"Codigo\": 1,\n      \"Nome\": \"ALFACE CRESPO\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 2,\n      \"Nome\": \"CENOURA\",\n      \"Subgrupo\": \"10113\"\n    },\n    {\n      \"Codigo\": 3,\n      \"Nome\": \"PERNIL SUINO\",\n      \"Subgrupo\": \"10122\"\n    },\n    {\n      \"Codigo\": 4,\n      \"Nome\": \"ENLATADO\",\n      \"Subgrupo\": \"242424\"\n    },\n    {\n      \"Codigo\": 5,\n      \"Nome\": \"COXA DE FRANGO\",\n      \"Subgrupo\": \"10123\"\n    }\n  ]\n}",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1736,
    "completion_tokens": 166,
    "total_tokens": 1902,
    "prompt_tokens_details": {
      "cached_tokens": 1152,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 22:55:18.575 -03:00 [INF] JSON bruto recebido: {
  "SubgrupoPreenchido": [
    {
      "Codigo": 1,
      "Nome": "ALFACE CRESPO",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 2,
      "Nome": "CENOURA",
      "Subgrupo": "10113"
    },
    {
      "Codigo": 3,
      "Nome": "PERNIL SUINO",
      "Subgrupo": "10122"
    },
    {
      "Codigo": 4,
      "Nome": "ENLATADO",
      "Subgrupo": "242424"
    },
    {
      "Codigo": 5,
      "Nome": "COXA DE FRANGO",
      "Subgrupo": "10123"
    }
  ]
}
2025-01-20 22:55:18.582 -03:00 [WRN] O JSON não estava no formato esperado de lista, tentando analisar como objeto com chave.
2025-01-20 22:55:18.586 -03:00 [INF] JSON processado com sucesso no formato encapsulado com chave 'SubgrupoPreenchido'.
2025-01-20 22:55:18.590 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:55:18.595 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 2268.7921ms
2025-01-20 22:55:18.597 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 22:55:18.598 -03:00 [INF] HTTP POST /produto/processar responded 200 in 2281.6129 ms
2025-01-20 22:55:18.600 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 200 null application/json; charset=utf-8 2287.5247ms
2025-01-20 23:06:43.425 -03:00 [INF] Application is shutting down...
2025-01-20 23:06:47.955 -03:00 [INF] Now listening on: http://localhost:5268
2025-01-20 23:06:47.984 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 23:06:47.985 -03:00 [INF] Hosting environment: Development
2025-01-20 23:06:47.986 -03:00 [INF] Content root path: C:\Users\dioni\CategorizationAPI
2025-01-20 23:06:49.941 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5268/produto/processar - application/json 287
2025-01-20 23:06:49.959 -03:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 23:06:49.962 -03:00 [INF] Executing endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 23:06:49.983 -03:00 [INF] Route matched with {action = "ProcessarProdutos", controller = "Produto"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ProcessarProdutos(System.Collections.Generic.List`1[Produto]) on controller ProdutoController (CategorizationAPI).
2025-01-20 23:06:49.993 -03:00 [INF] Carregando arquivo departamentalizacao.json...
2025-01-20 23:06:49.994 -03:00 [INF] Arquivo JSON carregado com sucesso. Conteúdo: {
  "Codigo": "100",
  "Nome": "Mercado Central",
  "Departamentos": [
    {
      "Codigo": "101",
      "Nome": "Alimentos",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1011",
          "Nome": "Frutas e Verduras",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10111",
              "Nome": "Frutas Nacionais",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10112",
              "Nome": "Frutas Importadas",
              "CodigoVinculo": "1011"
            },
            {
              "Codigo": "10113",
              "Nome": "Verduras",
              "CodigoVinculo": "1011"
            }
          ]
        },
        {
          "Codigo": "1012",
          "Nome": "Carnes e Aves",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10121",
              "Nome": "Carnes Bovinas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10122",
              "Nome": "Carnes Suínas",
              "CodigoVinculo": "1012"
            },
            {
              "Codigo": "10123",
              "Nome": "Aves",
              "CodigoVinculo": "1012"
            }
          ]
        },
        {
          "Codigo": "1013",
          "Nome": "Congelados",
          "CodigoVinculo": "101",
          "Subgrupos": [
            {
              "Codigo": "10131",
              "Nome": "Legumes Congelados",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10132",
              "Nome": "Carnes Congeladas",
              "CodigoVinculo": "1013"
            },
            {
              "Codigo": "10133",
              "Nome": "Frutas Congeladas",
              "CodigoVinculo": "1013"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "102",
      "Nome": "Bebidas",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1021",
          "Nome": "Refrigerantes",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10211",
              "Nome": "Cola",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10212",
              "Nome": "Laranja",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "10213",
              "Nome": "Guaraná",
              "CodigoVinculo": "1021"
            },
            {
              "Codigo": "242424",
              "Nome": "Igo Enlatado",
              "CodigoVinculo": "1021"
            }
          ]
        },
        {
          "Codigo": "1022",
          "Nome": "Águas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10221",
              "Nome": "Água Mineral",
              "CodigoVinculo": "1022"
            },
            {
              "Codigo": "10222",
              "Nome": "Água com Gás",
              "CodigoVinculo": "1022"
            }
          ]
        },
        {
          "Codigo": "1023",
          "Nome": "Bebidas Alcoólicas",
          "CodigoVinculo": "102",
          "Subgrupos": [
            {
              "Codigo": "10231",
              "Nome": "Cervejas",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10232",
              "Nome": "Vinhos",
              "CodigoVinculo": "1023"
            },
            {
              "Codigo": "10233",
              "Nome": "Destilados",
              "CodigoVinculo": "1023"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "103",
      "Nome": "Higiene e Beleza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1031",
          "Nome": "Higiene Pessoal",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10311",
              "Nome": "Shampoos",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10312",
              "Nome": "Sabonetes",
              "CodigoVinculo": "1031"
            },
            {
              "Codigo": "10313",
              "Nome": "Desodorantes",
              "CodigoVinculo": "1031"
            }
          ]
        },
        {
          "Codigo": "1032",
          "Nome": "Cuidados com a Pele",
          "CodigoVinculo": "103",
          "Subgrupos": [
            {
              "Codigo": "10321",
              "Nome": "Hidratantes",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10322",
              "Nome": "Protetor Solar",
              "CodigoVinculo": "1032"
            },
            {
              "Codigo": "10323",
              "Nome": "Cremes Anti-idade",
              "CodigoVinculo": "1032"
            }
          ]
        }
      ]
    },
    {
      "Codigo": "104",
      "Nome": "Limpeza",
      "CodigoVinculo": "100",
      "Grupos": [
        {
          "Codigo": "1041",
          "Nome": "Limpeza Geral",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10411",
              "Nome": "Detergentes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10412",
              "Nome": "Desinfetantes",
              "CodigoVinculo": "1041"
            },
            {
              "Codigo": "10413",
              "Nome": "Sabão em Pó",
              "CodigoVinculo": "1041"
            }
          ]
        },
        {
          "Codigo": "1042",
          "Nome": "Limpeza de Roupas",
          "CodigoVinculo": "104",
          "Subgrupos": [
            {
              "Codigo": "10421",
              "Nome": "Amaciantes",
              "CodigoVinculo": "1042"
            },
            {
              "Codigo": "10422",
              "Nome": "Sabão Líquido",
              "CodigoVinculo": "1042"
            }
          ]
        }
      ]
    }
  ]
}
2025-01-20 23:06:50.118 -03:00 [INF] Processando lista de produtos.
2025-01-20 23:06:50.121 -03:00 [INF] Processando 5 produtos.
2025-01-20 23:06:50.122 -03:00 [INF] Arquivo departamentalizacao.json carregado com sucesso.
2025-01-20 23:06:50.137 -03:00 [INF] Enviando requisição ao ChatGPT com payload de 8132 caracteres.
2025-01-20 23:06:50.142 -03:00 [INF] Start processing HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 23:06:50.145 -03:00 [INF] Sending HTTP request POST https://api.openai.com/v1/chat/completions
2025-01-20 23:06:50.167 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[System.Collections.Generic.List`1[[Produto, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[DepartamentalizacaoService+<ProcessarListaDeProdutos>d__7, CategorizationAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:06:50.172 -03:00 [INF] Executed action ProdutoController.ProcessarProdutos (CategorizationAPI) in 184.5188ms
2025-01-20 23:06:50.182 -03:00 [INF] Executed endpoint 'ProdutoController.ProcessarProdutos (CategorizationAPI)'
2025-01-20 23:06:50.184 -03:00 [ERR] HTTP POST /produto/processar responded 500 in 225.4020 ms
System.InvalidOperationException: The type 'System.Threading.ExecutionContext&' of property 'Context' on type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.Collections.Generic.List`1[Produto],DepartamentalizacaoService+<ProcessarListaDeProdutos>d__7]' is invalid for serialization or deserialization because it is a pointer type, is a ref struct, or contains generic parameters that have not been replaced by specific types.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_CannotSerializeInvalidType(Type typeToConvert, Type declaringType, MemberInfo memberInfo)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-01-20 23:06:50.213 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The type 'System.Threading.ExecutionContext&' of property 'Context' on type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.Collections.Generic.List`1[Produto],DepartamentalizacaoService+<ProcessarListaDeProdutos>d__7]' is invalid for serialization or deserialization because it is a pointer type, is a ref struct, or contains generic parameters that have not been replaced by specific types.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_CannotSerializeInvalidType(Type typeToConvert, Type declaringType, MemberInfo memberInfo)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-20 23:06:50.237 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5268/produto/processar - 500 null text/plain; charset=utf-8 296.978ms
2025-01-20 23:06:52.411 -03:00 [INF] Received HTTP response headers after 2263.2285ms - 200
2025-01-20 23:06:52.412 -03:00 [INF] End processing HTTP request after 2272.7898ms - 200
2025-01-20 23:06:52.415 -03:00 [INF] Resposta da API OpenAI recebida com sucesso: {
  "id": "chatcmpl-ArxxCKRSoOPXHMzhiV9zcuFl5xVaB",
  "object": "chat.completion",
  "created": 1737425210,
  "model": "gpt-3.5-turbo-0125",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "[\n    {\"Codigo\":1,\"Nome\":\"ALFACE CRESPO\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":2,\"Nome\":\"CENOURA\",\"Subgrupo\":\"10113\"},\n    {\"Codigo\":3,\"Nome\":\"PERNIL SUINO\",\"Subgrupo\":\"10122\"},\n    {\"Codigo\":4,\"Nome\":\"ENLATADO\",\"Subgrupo\":\"10211\"},\n    {\"Codigo\":5,\"Nome\":\"COXA DE FRANGO\",\"Subgrupo\":\"10123\"}\n]",
        "refusal": null
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1736,
    "completion_tokens": 99,
    "total_tokens": 1835,
    "prompt_tokens_details": {
      "cached_tokens": 1664,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": null
}

2025-01-20 23:06:52.468 -03:00 [INF] JSON bruto recebido: [
    {"Codigo":1,"Nome":"ALFACE CRESPO","Subgrupo":"10113"},
    {"Codigo":2,"Nome":"CENOURA","Subgrupo":"10113"},
    {"Codigo":3,"Nome":"PERNIL SUINO","Subgrupo":"10122"},
    {"Codigo":4,"Nome":"ENLATADO","Subgrupo":"10211"},
    {"Codigo":5,"Nome":"COXA DE FRANGO","Subgrupo":"10123"}
]
2025-01-20 23:06:52.473 -03:00 [INF] JSON processado com sucesso no formato de lista.
